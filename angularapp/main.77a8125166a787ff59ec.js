(self.webpackChunkprimer_proyectito_test=self.webpackChunkprimer_proyectito_test||[]).push([[179],{8255:Ge=>{function Ie(k){return Promise.resolve().then(()=>{var I=new Error("Cannot find module '"+k+"'");throw I.code="MODULE_NOT_FOUND",I})}Ie.keys=()=>[],Ie.resolve=Ie,Ie.id=8255,Ge.exports=Ie},3018:(Ge,Ie,k)=>{"use strict";k.d(Ie,{deG:()=>yh,tb:()=>iC,AFp:()=>tC,ip1:()=>sy,CZH:()=>Rd,hGG:()=>Ex,z2F:()=>Ld,sBO:()=>Qv,Sil:()=>Md,_Vd:()=>Si,EJc:()=>oC,SBq:()=>hs,qLn:()=>z,vpe:()=>Ai,gxx:()=>Mo,tBr:()=>ya,XFs:()=>De,OlP:()=>vn,zs3:()=>Wt,ZZ4:()=>Sm,aQg:()=>gd,soG:()=>ay,YKP:()=>jf,v3s:()=>CC,h0i:()=>$o,PXZ:()=>DS,R0b:()=>Yr,FiY:()=>si,Lbi:()=>rC,g9A:()=>oy,Qsj:()=>qa,FYo:()=>kf,JOm:()=>Gs,Tiy:()=>Rc,q3G:()=>tn,tp0:()=>ts,EAV:()=>r,Rgc:()=>Vf,dDg:()=>kd,DyG:()=>dl,q4F:()=>Ff,GfV:()=>Lf,s_b:()=>yd,ifc:()=>pn,eFA:()=>EC,G48:()=>p0,X6Q:()=>ly,_c5:()=>fx,VLi:()=>vS,c2e:()=>sC,zSh:()=>sc,wAp:()=>et,vHH:()=>xe,EiD:()=>Nh,mCW:()=>is,qzn:()=>Bs,JVY:()=>Hu,pB0:()=>Ea,eBb:()=>vl,L6k:()=>$p,LAX:()=>qy,cg1:()=>fm,Tjo:()=>dx,kL8:()=>xv,yhl:()=>oi,dqk:()=>F,sIi:()=>Gl,CqO:()=>yc,QGY:()=>jo,F4k:()=>ds,RDi:()=>Cs,AaK:()=>U,z3N:()=>Br,TTD:()=>Yd,uIk:()=>df,Suo:()=>YT,Xpm:()=>Zo,lG2:()=>dp,Yz7:()=>rn,cJS:()=>hi,oAB:()=>su,Yjl:()=>hp,Y36:()=>Ks,_UZ:()=>nm,qZA:()=>ka,TgZ:()=>Mn,Ikx:()=>Sv,LFG:()=>Dn,$8M:()=>Ru,NdJ:()=>Fa,CRH:()=>QT,iGM:()=>$b,LSH:()=>So,kYT:()=>Qo,_uU:()=>wv});var I=k(9765),oe=k(5319),B=k(7574),ne=k(6682),me=k(2441);var pe=k(1307);function q(){return new I.xQ}function j(s){for(let o in s)if(s[o]===j)return o;throw Error("Could not find renamed property on target object.")}function U(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(U).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function W(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const ce=j({__forward_ref__:j});function te(s){return s.__forward_ref__=te,s.toString=function(){return U(this())},s}function ee(s){return function(s){return"function"==typeof s&&s.hasOwnProperty(ce)&&s.__forward_ref__===te}(s)?s():s}class xe extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function ke(s){return"string"==typeof s?s:null==s?"":String(s)}function ot(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ke(s)}function se(s,o){const u=o?` in ${o}`:"";throw new xe("201",`No provider for ${ot(s)} found${u}`)}function hn(s,o){null==s&&function(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function hi(s){return{providers:s.providers||[],imports:s.imports||[]}}function Er(s){return ro(s,Vn)||ro(s,Es)}function ro(s,o){return s.hasOwnProperty(o)?s[o]:null}function Wi(s){return s&&(s.hasOwnProperty(fi)||s.hasOwnProperty(dt))?s[fi]:null}const Vn=j({\u0275prov:j}),fi=j({\u0275inj:j}),Es=j({ngInjectableDef:j}),dt=j({ngInjectorDef:j});var De=(()=>((De=De||{})[De.Default=0]="Default",De[De.Host=1]="Host",De[De.Self=2]="Self",De[De.SkipSelf=4]="SkipSelf",De[De.Optional=8]="Optional",De))();let $t;function on(s){const o=$t;return $t=s,o}function Pt(s,o,u){const c=Er(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&De.Optional?null:void 0!==o?o:void se(U(s),"Injector")}function qe(s){return{toString:s}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),pn=(()=>((pn=pn||{})[pn.Emulated=0]="Emulated",pn[pn.None=2]="None",pn[pn.ShadowDom=3]="ShadowDom",pn))();const kr="undefined"!=typeof globalThis&&globalThis,ao="undefined"!=typeof window&&window,Yt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,H="undefined"!=typeof global&&global,F=kr||H||ao||Yt,Y={},Ce=[],Qe=j({\u0275cmp:j}),gt=j({\u0275dir:j}),Ct=j({\u0275pipe:j}),Nt=j({\u0275mod:j}),Rn=j({\u0275loc:j}),Ht=j({\u0275fac:j}),gn=j({__NG_ELEMENT_ID__:j});let uo=0;function Zo(s){return qe(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Ce,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||pn.Emulated,id:"c",styles:s.styles||Ce,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,_=s.pipes;return c.id+=uo++,c.inputs=pi(s.inputs,u),c.outputs=pi(s.outputs),f&&f.forEach(v=>v(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(Ud):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(Hc):null,c})}function Ud(s){return Wn(s)||function(s){return s[gt]||null}(s)}function Hc(s){return function(s){return s[Ct]||null}(s)}const Yo={};function su(s){return qe(()=>{const o={type:s.type,bootstrap:s.bootstrap||Ce,declarations:s.declarations||Ce,imports:s.imports||Ce,exports:s.exports||Ce,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Yo[s.id]=s.type),o})}function Qo(s,o){return qe(()=>{const u=ur(s,!0);u.declarations=o.declarations||Ce,u.imports=o.imports||Ce,u.exports=o.exports||Ce})}function pi(s,o){if(null==s)return Y;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const dp=Zo;function hp(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Wn(s){return s[Qe]||null}function ur(s,o){const u=s[Nt]||null;if(!u&&!0===o)throw new Error(`Type ${U(s)} does not have '\u0275mod' property.`);return u}function Vr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Lt(s){return Array.isArray(s)&&!0===s[1]}function uu(s){return 0!=(8&s.flags)}function Wc(s){return 2==(2&s.flags)}function Ur(s){return 1==(1&s.flags)}function gi(s){return null!==s.template}function Gd(s){return 0!=(512&s[2])}function qi(s,o){return s.hasOwnProperty(Ht)?s[Ht]:null}class Zd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yd(){return lu}function lu(s){return s.type.prototype.ngOnChanges&&(s.setInput=vy),mi}function mi(){const s=du(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Y)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function vy(s,o,u,c){const d=du(s)||function(s,o){return s[Ey]=o}(s,{previous:Y,current:null}),f=d.current||(d.current={}),_=d.previous,v=this.declaredInputs[u],C=_[v];f[v]=new Zd(C&&C.currentValue,o,_===Y),s[c]=o}Yd.ngInherit=!0;const Ey="__ngSimpleChanges__";function du(s){return s[Ey]||null}let go;function Cs(s){go=s}function Qt(s){return!!s.listen}const Qc={createRenderer:(s,o)=>void 0!==go?go:"undefined"!=typeof document?document:void 0};function Jt(s){for(;Array.isArray(s);)s=s[0];return s}function jr(s,o){return Jt(o[s.index])}function Ds(s,o){return s.data[o]}function lr(s,o){const u=o[s];return Vr(u)?u:u[0]}function mu(s){return 4==(4&s[2])}function yu(s){return 128==(128&s[2])}function Ts(s,o){return null==o?null:s[o]}function Xc(s){s[18]=0}function Qd(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const it={lFrame:Tp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Jd(){return it.bindingsEnabled}function be(){return it.lFrame.lView}function Dt(){return it.lFrame.tView}function mn(){let s=Ip();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ip(){return it.lFrame.currentTNode}function ei(s,o){const u=it.lFrame;u.currentTNode=s,u.isParent=o}function Xd(){return it.lFrame.isParent}function ia(){return it.isInCheckNoChangesMode}function As(s){it.isInCheckNoChangesMode=s}function xs(){return it.lFrame.bindingIndex++}function nh(s,o){const u=it.lFrame;u.bindingIndex=u.bindingRootIndex=s,Iu(o)}function Iu(s){it.lFrame.currentDirectiveIndex=s}function _o(){return it.lFrame.currentQueryIndex}function sh(s){it.lFrame.currentQueryIndex=s}function Iy(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function by(s,o,u){if(u&De.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&De.Host||(d=Iy(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=it.lFrame=Dp();return c.currentTNode=o,c.lView=s,!0}function bu(s){const o=Dp(),u=s[1];it.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Dp(){const s=it.lFrame,o=null===s?null:s.child;return null===o?Tp(s):o}function Tp(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Sp(){const s=it.lFrame;return it.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const k0=Sp;function Ap(){const s=Sp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function vo(s){it.lFrame.selectedIndex=s}function Xt(){const s=it.lFrame;return Ds(s.tView,s.selectedIndex)}function sa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:S}=f;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),v&&((s.contentHooks||(s.contentHooks=[])).push(u,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),T&&((s.viewHooks||(s.viewHooks=[])).push(u,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,T)),null!=S&&(s.destroyHooks||(s.destroyHooks=[])).push(u,S)}}function oa(s,o,u){ch(s,o,3,u)}function uh(s,o,u,c){(3&s[2])===u&&ch(s,o,u,c)}function Cu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function ch(s,o,u,c){const f=null!=c?c:-1,_=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<f||-1==f)&&(Sy(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Sy(s,o,u,c){const d=u[c]<0,f=u[c+1],v=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(v)}finally{}}}else try{f.call(v)}finally{}}class Du{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function en(s,o,u){const c=Qt(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],v=u[d++],C=u[d++];c?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=f,v=u[++d];nl(_)?c&&s.setProperty(o,_,v):c?s.setAttribute(o,_,v):o.setAttribute(_,v),d++}}return d}function dh(s){return 3===s||4===s||6===s}function nl(s){return 64===s.charCodeAt(0)}function hh(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||fh(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function fh(s,o,u,c,d){let f=0,_=s.length;if(-1===o)_=-1;else for(;f<s.length;){const v=s[f++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=f-1;break}}}for(;f<s.length;){const v=s[f];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(s.splice(_,0,o),f=_+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function xp(s){return-1!==s}function Tu(s){return 32767&s}function Su(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Au=!0;function rl(s){const o=Au;return Au=s,o}let yn=0;function br(s,o){const u=dr(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ol(c.data,s),ol(o,null),ol(c.blueprint,null));const d=aa(s,o),f=s.injectorIndex;if(xp(d)){const _=Tu(d),v=Su(d,o),C=v[1].data;for(let T=0;T<8;T++)o[f+T]=v[_+T]|C[_+T]}return o[f+8]=d,f}function ol(s,o){s.push(0,0,0,0,0,0,0,0,o)}function dr(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function aa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],_=f.type;if(c=2===_?f.declTNode:1===_?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function al(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(gn)&&(c=u[gn]),null==c&&(c=u[gn]=yn++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function xy(s,o,u){if(u&De.Optional)return s;se(o,"NodeInjector")}function ua(s,o,u,c){if(u&De.Optional&&void 0===c&&(c=null),0==(u&(De.Self|De.Host))){const d=s[9],f=on(void 0);try{return d?d.get(o,c,u&De.Optional):Pt(o,c,u&De.Optional)}finally{on(f)}}return xy(c,o,u)}function Np(s,o,u,c=De.Default,d){if(null!==s){const f=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(gn)?s[gn]:void 0;return"number"==typeof o?o>=0?255&o:Ry:o}(u);if("function"==typeof f){if(!by(o,s,c))return c&De.Host?xy(d,u,c):ua(o,u,c,d);try{const _=f(c);if(null!=_||c&De.Optional)return _;se(u)}finally{k0()}}else if("number"==typeof f){let _=null,v=dr(s,o),C=-1,T=c&De.Host?o[16][6]:null;for((-1===v||c&De.SkipSelf)&&(C=-1===v?aa(s,o):o[v+8],-1!==C&&Ny(c,!1)?(_=o[1],v=Tu(C),o=Su(C,o)):v=-1);-1!==v;){const S=o[1];if(Mp(f,v,S.data)){const R=gh(v,o,u,_,c,T);if(R!==vi)return R}C=o[v+8],-1!==C&&Ny(c,o[1].data[v+8]===T)&&Mp(f,v,o)?(_=S,v=Tu(C),o=Su(C,o)):v=-1}}}return ua(o,u,c,d)}const vi={};function Ry(){return new ni(mn(),be())}function gh(s,o,u,c,d,f){const _=o[1],v=_.data[s+8],S=xu(v,_,u,null==c?Wc(v)&&Au:c!=_&&0!=(3&v.type),d&De.Host&&f===v);return null!==S?ca(o,_,S,v):vi}function xu(s,o,u,c,d){const f=s.providerIndexes,_=o.data,v=1048575&f,C=s.directiveStart,S=f>>20,M=d?v+S:s.directiveEnd;for(let V=c?v:v+S;V<M;V++){const G=_[V];if(V<C&&u===G||V>=C&&G.type===u)return V}if(d){const V=_[C];if(V&&gi(V)&&V.type===u)return C}return null}function ca(s,o,u,c){let d=s[u];const f=o.data;if(function(s){return s instanceof Du}(d)){const _=d;_.resolving&&function(s,o){throw new xe("200",`Circular dependency in DI detected for ${s}`)}(ot(f[u]));const v=rl(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?on(_.injectImpl):null;by(s,c,De.Default);try{d=s[u]=_.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const _=lu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&on(C),rl(v),_.resolving=!1,k0()}}return d}function Mp(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Ny(s,o){return!(s&De.Self||s&De.Host&&o)}class ni{constructor(o,u){this._tNode=o,this._lView=u}get(o,u){return Np(this._tNode,this._lView,o,void 0,u)}}function Ru(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(dh(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(mn(),s)}const Eo="__parameters__";function _n(s,o,u){return qe(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return v.annotation=_,v;function v(C,T,S){const R=C.hasOwnProperty(Eo)?C[Eo]:Object.defineProperty(C,Eo,{value:[]})[Eo];for(;R.length<=S;)R.push(null);return(R[S]=R[S]||[]).push(_),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class vn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yh=new vn("AnalyzeForEntryComponents"),dl=Function;function ri(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),ri(c,o)):o!==s&&o.push(c)}return o}function ii(s,o){s.forEach(u=>Array.isArray(u)?ii(u,o):o(u))}function Mu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Qi(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Fs={},wh="__NG_DI_FLAG__",Vs="ngTempTokenPath",Ih=/\n/gm,pt="__source",Ji=j({provide:String,useValue:j});let Io;function Xi(s){const o=Io;return Io=s,o}function Vy(s,o=De.Default){if(void 0===Io)throw new Error("inject() must be called from an injection context");return null===Io?Pt(s,void 0,o):Io.get(s,o&De.Optional?null:void 0,o)}function Dn(s,o=De.Default){return($t||Vy)(ee(s),o)}function Us(s){const o=[];for(let u=0;u<s.length;u++){const c=ee(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,f=De.Default;for(let _=0;_<c.length;_++){const v=c[_],C=gl(v);"number"==typeof C?-1===C?d=v.token:f|=C:d=v}o.push(Dn(d,f))}else o.push(Dn(c))}return o}function ma(s,o){return s[wh]=o,s.prototype[wh]=o,s}function gl(s){return s[wh]}function Uy(s,o,u,c){const d=s[Vs];throw o[pt]&&d.unshift(o[pt]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=U(o);if(Array.isArray(o))d=o.map(U).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];f.push(_+":"+("string"==typeof v?JSON.stringify(v):U(v)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Ih,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Vs]=null,s}const ya=ma(_n("Inject",s=>({token:s})),-1),si=ma(_n("Optional"),8),ts=ma(_n("SkipSelf"),4);let bo;function js(s){var o;return(null===(o=function(){if(void 0===bo&&(bo=null,F.trustedTypes))try{bo=F.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return bo}())||void 0===o?void 0:o.createHTML(s))||s}class Do{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Wy extends Do{getTypeName(){return"HTML"}}class H0 extends Do{getTypeName(){return"Style"}}class To extends Do{getTypeName(){return"Script"}}class zy extends Do{getTypeName(){return"URL"}}class Bp extends Do{getTypeName(){return"ResourceURL"}}function Br(s){return s instanceof Do?s.changingThisBreaksApplicationSecurity:s}function Bs(s,o){const u=oi(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function oi(s){return s instanceof Do&&s.getTypeName()||null}function Hu(s){return new Wy(s)}function $p(s){return new H0(s)}function vl(s){return new To(s)}function qy(s){return new zy(s)}function Ea(s){return new Bp(s)}class Ky{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(js(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class El{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=js(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=js(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let d=u.length-1;0<d;d--){const _=u.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const xh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function is(s){return(s=String(s)).match(xh)||s.match(wl)?s:"unsafe:"+s}function $r(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function $s(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const Il=$r("area,br,col,hr,img,wbr"),Wp=$r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zp=$r("rp,rt"),Cl=$s(Il,$s(Wp,$r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$s(zp,$r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$s(zp,Wp)),Wu=$r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Rh=$r("srcset"),Zp=$s(Wu,Rh,$r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dl=$r("script,style,template");class Yp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Cl.hasOwnProperty(u))return this.sanitizedSomething=!0,!Dl.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let d=0;d<c.length;d++){const f=c.item(d),_=f.name,v=_.toLowerCase();if(!Zp.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=f.value;Wu[v]&&(C=is(C)),Rh[v]&&(s=C,C=(s=String(s)).split(",").map(o=>is(o.trim())).join(", ")),this.buf.push(" ",_,'="',Tl(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Cl.hasOwnProperty(u)&&!Il.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Tl(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const zu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yy=/([^\#-~ |!])/g;function Tl(s){return s.replace(/&/g,"&amp;").replace(zu,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Yy,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sl;function Nh(s,o){let u=null;try{Sl=Sl||function(s){const o=new El(s);return function(){try{return!!(new window.DOMParser).parseFromString(js(""),"text/html")}catch(s){return!1}}()?new Ky(o):o}(s);let c=o?String(o):"";u=Sl.getInertBodyElement(c);let d=5,f=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=f,f=u.innerHTML,u=Sl.getInertBodyElement(c)}while(c!==f);return js((new Yp).sanitizeChildren(qu(u)||u))}finally{if(u){const c=qu(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function qu(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var tn=(()=>((tn=tn||{})[tn.NONE=0]="NONE",tn[tn.HTML=1]="HTML",tn[tn.STYLE=2]="STYLE",tn[tn.SCRIPT=3]="SCRIPT",tn[tn.URL=4]="URL",tn[tn.RESOURCE_URL=5]="RESOURCE_URL",tn))();function So(s){const o=function(){const s=be();return s&&s[12]}();return o?o.sanitize(tn.URL,s)||"":Bs(s,"URL")?Br(s):is(ke(s))}const Jp="__ngContext__";function Bn(s,o){s[Jp]=o}function qn(s){const o=function(s){return s[Jp]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function b(s){return s.ngOriginalError}function O(s,...o){s.error(...o)}class z{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),d=(s=o)&&s.ngErrorLogger||O;var s;d(this._console,"ERROR",o),u&&d(this._console,"ORIGINAL ERROR",u),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(b(o)):null}_findOriginalError(o){let u=o&&b(o);for(;u&&b(u);)u=b(u);return u||null}}const Nl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(F))();function Pi(s){return s instanceof Function?s():s}var Gs=(()=>((Gs=Gs||{})[Gs.Important=1]="Important",Gs[Gs.DashCase=2]="DashCase",Gs))();function r_(s,o){return undefined(s,o)}function ig(s){const o=s[3];return Lt(o)?o[3]:o}function sg(s){return q0(s[13])}function og(s){return q0(s[4])}function q0(s){for(;null!==s&&!Lt(s);)s=s[4];return s}function Ol(s,o,u,c,d){if(null!=c){let f,_=!1;Lt(c)?f=c:Vr(c)&&(_=!0,c=c[0]);const v=Jt(c);0===s&&null!==u?null==d?Uh(o,u,v):ec(o,u,v,d||null,!0):1===s&&null!==u?ec(o,u,v,d||null,!0):2===s?function(s,o,u){const c=No(s,o);c&&function(s,o,u,c){Qt(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,v,_):3===s&&o.destroyNode(v),null!=f&&function(s,o,u,c,d){const f=u[7];f!==Jt(u)&&Ol(o,s,c,f,d);for(let v=10;v<u.length;v++){const C=u[v];$h(C[1],C,s,o,c,f)}}(o,s,f,u,d)}}function c_(s,o,u){return Qt(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function Y0(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Qd(d,-1)),u.splice(c,1)}function d_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Y0(d,c),o>0&&(s[u-1][4]=c[4]);const f=Qi(s,10+o);!function(s,o){$h(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Q0(s,o){if(!(256&o[2])){const u=o[11];Qt(u)&&u.destroyNode&&$h(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return h_(s[1],s);for(;o;){let u=null;if(Vr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Vr(o)&&h_(o[1],o),o=o[3];null===o&&(o=s),Vr(o)&&h_(o[1],o),u=o&&o[4]}o=u}}(o)}}function h_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Du)){const f=u[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const v=d[f[_]],C=f[_+1];try{C.call(v)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const _=u[f+1],v="function"==typeof _?_(o):Jt(o[_]),C=c[d=u[f+2]],T=u[f+3];"boolean"==typeof T?v.removeEventListener(u[f],C,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),f+=2}else{const _=c[d=u[f+1]];u[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&Qt(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Lt(o[3])){u!==o[3]&&Y0(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function X0(s,o,u){return function(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===pn.None||d===pn.Emulated)return null}return jr(c,u)}(s,o.parent,u)}function ec(s,o,u,c,d){Qt(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Uh(s,o,u){Qt(s)?s.appendChild(o,u):o.appendChild(u)}function ag(s,o,u,c,d){null!==c?ec(s,o,u,c,d):Uh(s,o,u)}function No(s,o){return Qt(s)?s.parentNode(o):o.parentNode}let tw=function(s,o,u){return 40&s.type?jr(s,u):null};function jh(s,o,u,c){const d=X0(s,c,o),f=o[11],v=function(s,o,u){return tw(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)ag(f,d,u[C],v,!1);else ag(f,d,u,v,!1)}function Bh(s,o){if(null!==o){const u=o.type;if(3&u)return jr(o,s);if(4&u)return rw(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Bh(s,c);{const d=s[o.index];return Lt(d)?rw(-1,d):Jt(d)}}if(32&u)return r_(o,s)()||Jt(s[o.index]);{const c=dg(s,o);return null!==c?Array.isArray(c)?c[0]:Bh(ig(s[16]),c):Bh(s,o.next)}}return null}function dg(s,o){return null!==o?s[16][6].projection[o.projection]:null}function rw(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Bh(c,d)}return o[7]}function hg(s,o,u,c,d,f,_){for(;null!=u;){const v=c[u.index],C=u.type;if(_&&0===o&&(v&&Bn(Jt(v),c),u.flags|=4),64!=(64&u.flags))if(8&C)hg(s,o,u.child,c,d,f,!1),Ol(o,s,d,v,f);else if(32&C){const T=r_(u,c);let S;for(;S=T();)Ol(o,s,d,S,f);Ol(o,s,d,v,f)}else 16&C?iw(s,o,c,u,d,f):Ol(o,s,d,v,f);u=_?u.projectionNext:u.next}}function $h(s,o,u,c,d,f){hg(u,c,s.firstChild,o,d,f,!1)}function iw(s,o,u,c,d,f){const _=u[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)Ol(o,s,d,C[T],f);else hg(s,o,C,_[3],d,f,!0)}function ow(s,o,u){Qt(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function f_(s,o,u){Qt(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function p_(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const aw="ng-template";function WC(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==p_(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function fg(s){return 4===s.type&&s.value!==aw}function zC(s,o,u){return o===(4!==s.type||u?s.value:aw)}function qC(s,o,u){let c=4;const d=s.attrs||[],f=function(s){for(let o=0;o<s.length;o++)if(dh(s[o]))return o;return s.length}(d);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!zC(s,C,u)||""===C&&1===o.length){if(ki(c))return!1;_=!0}}else{const T=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!WC(s.attrs,T,u)){if(ki(c))return!1;_=!0}continue}const R=KC(8&c?"class":C,d,fg(s),u);if(-1===R){if(ki(c))return!1;_=!0;continue}if(""!==T){let M;M=R>f?"":d[R+1].toLowerCase();const V=8&c?M:null;if(V&&-1!==p_(V,T,0)||2&c&&T!==M){if(ki(c))return!1;_=!0}}}}else{if(!_&&!ki(c)&&!ki(C))return!1;if(_&&ki(C))continue;_=!1,c=C|1&c}}return ki(c)||_}function ki(s){return 0==(1&s)}function KC(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let v=o[++d];for(;"string"==typeof v;)v=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function ZC(s,o,u=!1){for(let c=0;c<o.length;c++)if(qC(s,o[c],u))return!0;return!1}function uw(s,o){return s?":not("+o.trim()+")":o}function QC(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const v=s[++u];d+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!ki(_)&&(o+=uw(f,d),d=""),c=_,f=f||!ki(c);u++}return""!==d&&(o+=uw(f,d)),o}const ft={};function pw(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const _=s.data[f];sh(d),_.contentQueries(2,o[f],f)}}}function nc(s,o,u,c,d,f,_,v,C,T){const S=o.blueprint.slice();return S[0]=d,S[2]=140|c,Xc(S),S[3]=S[15]=s,S[8]=u,S[10]=_||s&&s[10],S[11]=v||s&&s[11],S[12]=C||s&&s[12]||null,S[9]=T||s&&s[9]||null,S[6]=f,S[16]=2==o.type?s[16]:S,S}function rc(s,o,u,c,d){let f=s.data[o];if(null===f)f=function(s,o,u,c,d){const f=Ip(),_=Xd(),C=s.data[o]=function(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(_?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,d),it.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const _=function(){const s=it.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ei(f,!0),f}function ic(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Sa(s,o,u){bu(o);try{const c=s.viewQuery;null!==c&&j_(1,c,u);const d=s.template;null!==d&&Eg(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&pw(s,o),s.staticViewQueries&&j_(2,s.viewQuery,u);const f=s.components;null!==f&&function(s,o){for(let u=0;u<o.length;u++)L_(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ap()}}function Aa(s,o,u,c){const d=o[2];if(256==(256&d))return;bu(o);const f=ia();try{Xc(o),function(s){it.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Eg(s,o,u,2,c);const _=3==(3&d);if(!f)if(_){const T=s.preOrderCheckHooks;null!==T&&oa(o,T,null)}else{const T=s.preOrderHooks;null!==T&&uh(o,T,0,null),Cu(o,0)}if(function(s){for(let o=sg(s);null!==o;o=og(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&Qd(f,1),d[2]|=1024}}}(o),function(s){for(let o=sg(s);null!==o;o=og(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];yu(c)&&Aa(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&pw(s,o),!f)if(_){const T=s.contentCheckHooks;null!==T&&oa(o,T)}else{const T=s.contentHooks;null!==T&&uh(o,T,1),Cu(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)vo(~d);else{const f=d,_=u[++c],v=u[++c];nh(_,f),v(2,o[f])}}}finally{vo(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let u=0;u<o.length;u++)fD(s,o[u])}(o,v);const C=s.viewQuery;if(null!==C&&j_(2,C,c),!f)if(_){const T=s.viewCheckHooks;null!==T&&oa(o,T)}else{const T=s.viewHooks;null!==T&&uh(o,T,2),Cu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Qd(o[3],-1))}finally{Ap()}}function D_(s,o,u,c){const d=o[10],f=!ia(),_=mu(o);try{f&&!_&&d.begin&&d.begin(),_&&Sa(s,o,c),Aa(s,o,u,c)}finally{f&&!_&&d.end&&d.end()}}function Eg(s,o,u,c,d){const f=it.lFrame.selectedIndex,_=2&c;try{vo(-1),_&&o.length>20&&function(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&oa(o,f,u)}else{const f=s.preOrderHooks;null!==f&&uh(o,f,0,u)}vo(u)}(s,o,20,ia()),u(c,d)}finally{vo(f)}}function S_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=wg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function wg(s,o,u,c,d,f,_,v,C,T){const S=20+c,R=S+d,M=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:ft);return u}(S,R),V="function"==typeof T?T():T;return M[1]={type:s,blueprint:M,template:u,queries:null,viewQuery:v,declTNode:o,data:M.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:V,incompleteFirstPass:!1}}function Ll(s,o,u,c){const d=Tw(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&xa(s).push(c,d.length-1))}function _w(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Tg(s,o,u,c,d,f){const _=f.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(c,d,_)}}function Sg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Kn(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Ag(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;gi(o)&&(u[""]=s)}}function xg(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Iw(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=qi(d.type)),_=new Du(f,gi(d),null);s.blueprint[c]=_,u[c]=_,Tg(s,o,0,c,ic(s,u,d.hostVars,ft),d)}function dD(s,o,u){const c=jr(o,s),d=S_(u),f=s[10],_=Kh(s,nc(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=_}function cs(s,o,u,c,d,f){const _=jr(s,o);!function(s,o,u,c,d,f,_){if(null==f)Qt(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const v=null==_?ke(f):_(f,c||"",d);Qt(s)?s.setAttribute(o,d,v,u):u?o.setAttributeNS(u,d,v):o.setAttribute(d,v)}}(o[11],_,f,s.value,u,c,d)}function hD(s,o,u,c,d,f){const _=f[o];if(null!==_){const v=c.setInput;for(let C=0;C<_.length;){const T=_[C++],S=_[C++],R=_[C++];null!==v?c.setInput(u,R,T,S):u[S]=R}}}function P_(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function fD(s,o){const u=lr(o,s);if(yu(u)){const c=u[1];80&u[2]?Aa(c,u,c.template,u[8]):u[5]>0&&Fl(u)}}function Fl(s){for(let c=sg(s);null!==c;c=og(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const _=f[1];Aa(_,f,_.template,f[8])}else f[5]>0&&Fl(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=lr(u[c],s);yu(d)&&d[5]>0&&Fl(d)}}function L_(s,o){const u=lr(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Sa(c,u,u[8])}function Kh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function V_(s){for(;s;){s[2]|=64;const o=ig(s);if(Gd(s)&&!o)return s;s=o}return null}function Ng(s,o,u){const c=o[10];c.begin&&c.begin();try{Aa(s,o,s.template,u)}catch(d){throw Qh(o,d),d}finally{c.end&&c.end()}}function U_(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=qn(u),d=c[1];D_(d,c,d.template,u)}}(s[8])}function j_(s,o,u){sh(0),o(s,u)}const gD=(()=>Promise.resolve(null))();function Tw(s){return s[7]||(s[7]=[])}function xa(s){return s.cleanup||(s.cleanup=[])}function Qh(s,o){const u=s[9],c=u?u.get(z,null):null;c&&c.handleError(o)}function $_(s,o,u,c,d){for(let f=0;f<u.length;){const _=u[f++],v=u[f++],C=o[_],T=s.data[_];null!==T.setInput?T.setInput(C,d,c,v):C[v]=d}}function Jh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?f=v:1==f?d=W(d,v):2==f&&(c=W(c,v+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Mo=new vn("INJECTOR",-1);class H_{get(o,u=Fs){if(u===Fs){const c=new Error(`NullInjectorError: No provider for ${U(o)}!`);throw c.name="NullInjectorError",c}return u}}const sc=new vn("Set Injector scope."),Vl={},Aw={};let oc;function Pg(){return void 0===oc&&(oc=new H_),oc}function kg(s,o=null,u=null,c){return new Lg(s,u,o||Pg(),c)}class Lg{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&ii(u,v=>this.processProvider(v,o,u)),ii([o],v=>this.processInjectorType(v,[],f)),this.records.set(Mo,Po(void 0,this));const _=this.records.get(sc);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:U(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Fs,c=De.Default){this.assertNotDestroyed();const d=Xi(this),f=on(void 0);try{if(!(c&De.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof vn)&&Er(o);v=C&&this.injectableDefInScope(C)?Po(ac(o),Vl):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&De.Self?Pg():this.parent).get(o,u=c&De.Optional&&u===Fs?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Vs]=_[Vs]||[]).unshift(U(o)),d)throw _;return Uy(_,o,"R3InjectorError",this.source)}throw _}finally{on(f),Xi(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(U(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=ee(o)))return!1;let d=Wi(o);const f=null==d&&o.ngModule||void 0,_=void 0===f?o:f,v=-1!==c.indexOf(_);if(void 0!==f&&(d=Wi(f)),null==d)return!1;if(null!=d.imports&&!v){let S;c.push(_);try{ii(d.imports,R=>{this.processInjectorType(R,u,c)&&(void 0===S&&(S=[]),S.push(R))})}finally{}if(void 0!==S)for(let R=0;R<S.length;R++){const{ngModule:M,providers:V}=S[R];ii(V,G=>this.processProvider(G,M,V||Ce))}}this.injectorDefTypes.add(_);const C=qi(_)||(()=>new _);this.records.set(_,Po(C,Vl));const T=d.providers;if(null!=T&&!v){const S=o;ii(T,R=>this.processProvider(R,S,T))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=uc(o=ee(o))?o:ee(o&&o.provide);const f=Vg(s=o)?Po(void 0,s.useValue):Po(function(s,o,u){let c;if(uc(s)){const d=ee(s);return qi(d)||ac(d)}if(Vg(s))c=()=>ee(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Us(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>Dn(ee(s.useExisting));else{const d=ee(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return qi(d)||ac(d);c=()=>new d(...Us(s.deps))}return c}(s),Vl);var s;if(uc(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Po(void 0,Vl,!0),_.factory=()=>Us(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===Vl&&(u.value=Aw,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ee(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ac(s){const o=Er(s),u=null!==o?o.factory:qi(s);if(null!==u)return u;if(s instanceof vn)throw new Error(`Token ${U(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=function(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?");throw new Error(`Can't resolve all parameters for ${U(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[Vn]||s[Es]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function Po(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Vg(s){return null!==s&&"object"==typeof s&&Ji in s}function uc(s){return"function"==typeof s}const Bg=function(s,o,u){return function(s,o=null,u=null,c){const d=kg(s,o,u,c);return d._resolveInjectorDefTypes(),d}({name:u},o,s,u)};class Wt{static create(o,u){return Array.isArray(o)?Bg(o,u,""):Bg(o.providers,o.parent,o.name||"")}}function DD(s,o){sa(qn(s)[1],mn())}Wt.THROW_IF_NOT_FOUND=Fs,Wt.NULL=new H_,Wt.\u0275prov=rn({token:Wt,providedIn:"any",factory:()=>Dn(Mo)}),Wt.__NG_ELEMENT_ID__=-1;let zg=null;function Hl(){if(!zg){const s=F.Symbol;if(s&&s.iterator)zg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(zg=c)}}}return zg}function Gl(s){return!!Kg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Hl()in s)}function Kg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function df(s,o,u,c){const d=be();return xr(d,xs(),o)&&(Dt(),cs(Xt(),d,s,o,u,c)),df}function Ks(s,o=De.Default){const u=be();return null===u?Dn(s,o):Np(mn(),u,ee(s),o)}function dv(s,o,u,c,d){const _=d?"class":"style";$_(s,u,o.inputs[_],_,c)}function Mn(s,o,u,c){const d=be(),f=Dt(),_=20+s,v=d[11],C=d[_]=c_(v,o,it.lFrame.currentNamespace),T=f.firstCreatePass?function(s,o,u,c,d,f,_){const v=o.consts,T=rc(o,s,2,d,Ts(v,f));return function(s,o,u,c){let d=!1;if(Jd()){const f=function(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];ZC(u,_.selectors,!1)&&(d||(d=[]),al(br(u,o),s,_.type),gi(_)?(Kn(s,u),d.unshift(_)):d.push(_))}return d}(s,o,u),_=null===c?null:{"":-1};if(null!==f){d=!0,xg(u,s.data.length,f.length);for(let S=0;S<f.length;S++){const R=f[S];R.providersResolver&&R.providersResolver(R)}let v=!1,C=!1,T=ic(s,o,f.length,null);for(let S=0;S<f.length;S++){const R=f[S];u.mergedAttrs=hh(u.mergedAttrs,R.hostAttrs),Iw(s,u,o,T,R),Ag(T,R,_),null!==R.contentQueries&&(u.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=128);const M=R.type.prototype;!v&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(M.ngOnChanges||M.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),T++}!function(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,_=[];let v=null,C=null;for(let T=o.directiveStart;T<c;T++){const S=d[T],R=S.inputs,M=null===f||fg(o)?null:P_(R,f);_.push(M),v=_w(R,T,v),C=_w(S.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,u)}_&&function(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new xe("301",`Export of name '${o[d+1]}' not found!`);c.push(o[d],f)}}}(u,c,_)}u.mergedAttrs=hh(u.mergedAttrs,u.attrs)}(o,u,T,Ts(v,_)),null!==T.attrs&&Jh(T,T.attrs,!1),null!==T.mergedAttrs&&Jh(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,f,d,0,o,u,c):f.data[_];ei(T,!0);const S=T.mergedAttrs;null!==S&&en(v,C,S);const R=T.classes;null!==R&&f_(v,C,R);const M=T.styles;null!==M&&ow(v,C,M),64!=(64&T.flags)&&jh(f,d,C,T),0===it.lFrame.elementDepthCount&&Bn(C,d),it.lFrame.elementDepthCount++,Ur(T)&&(function(s,o,u){!Jd()||(function(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||br(u,o),Bn(c,o);const _=u.initialInputs;for(let v=d;v<f;v++){const C=s.data[v],T=gi(C);T&&dD(o,u,C);const S=ca(o,s,v,u);Bn(S,o),null!==_&&hD(0,v-d,S,C,0,_),T&&(lr(u.index,o)[8]=S)}}(s,o,u,jr(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,d=u.directiveEnd,_=u.index,v=it.lFrame.currentDirectiveIndex;try{vo(_);for(let C=c;C<d;C++){const T=s.data[C],S=o[C];Iu(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Sg(T,S)}}finally{vo(-1),Iu(v)}}(s,o,u))}(f,d,T),function(s,o,u){if(uu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=s.data[f];_.contentQueries&&_.contentQueries(1,u[f],f)}}}(f,T,d)),null!==c&&function(s,o,u=jr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],v=-1===_?u(o,s):s[_];s[d++]=v}}}(d,T)}function ka(){let s=mn();Xd()?it.lFrame.isParent=!1:(s=s.parent,ei(s,!1));const o=s;it.lFrame.elementDepthCount--;const u=Dt();u.firstCreatePass&&(sa(u,s),uu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&dv(u,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&dv(u,o,be(),o.stylesWithoutHost,!1)}function nm(s,o,u,c){Mn(s,o,u,c),ka()}function jo(s){return!!s&&"function"==typeof s.then}function ds(s){return!!s&&"function"==typeof s.subscribe}const yc=ds;function Fa(s,o,u,c){const d=be(),f=Dt(),_=mn();return function(s,o,u,c,d,f,_,v){const C=Ur(c),S=s.firstCreatePass&&xa(s),R=o[8],M=Tw(o);let V=!0;if(3&c.type||v){const J=jr(c,o),Re=v?v(J):J,ve=M.length,Ye=v?ct=>v(Jt(ct[c.index])):c.index;if(Qt(u)){let ct=null;if(!v&&C&&(ct=function(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===u&&d[f+1]===c){const v=o[7],C=d[f+2];return v.length>C?v[C]:null}"string"==typeof _&&(f+=2)}return null}(s,o,d,c.index)),null!==ct)(ct.__ngLastListenerFn__||ct).__ngNextListenerFn__=f,ct.__ngLastListenerFn__=f,V=!1;else{f=vf(c,o,R,f,!1);const St=u.listen(Re,d,f);M.push(f,St),S&&S.push(d,Ye,ve,ve+1)}}else f=vf(c,o,R,f,!0),Re.addEventListener(d,f,_),M.push(f),S&&S.push(d,Ye,ve,_)}else f=vf(c,o,R,f,!1);const G=c.outputs;let ae;if(V&&null!==G&&(ae=G[d])){const J=ae.length;if(J)for(let Re=0;Re<J;Re+=2){const vr=o[ae[Re]][ae[Re+1]].subscribe(f),to=M.length;M.push(f,vr),S&&S.push(d,c.index,to,-(to+1))}}}(f,d,d[11],_,s,o,!!u,c),Fa}function _f(s,o,u,c){try{return!1!==u(c)}catch(d){return Qh(s,d),!1}}function vf(s,o,u,c,d){return function f(_){if(_===Function)return c;const v=2&s.flags?lr(s.index,o):o;0==(32&o[2])&&V_(v);let C=_f(o,0,c,_),T=f.__ngNextListenerFn__;for(;T;)C=_f(o,0,T,_)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function wv(s,o=""){const u=be(),c=Dt(),d=s+20,f=c.firstCreatePass?rc(c,d,1,o,null):c.data[d],_=u[d]=function(s,o){return Qt(s)?s.createText(o):s.createTextNode(o)}(u[11],o);jh(c,u,_,f),ei(f,!1)}function Sv(s,o,u){const c=be();return xr(c,xs(),o)&&function(s,o,u,c,d,f,_,v){const C=jr(o,u);let S,T=o.inputs;!v&&null!=T&&(S=T[c])?($_(s,u,S,c,d),Wc(o)&&function(s,o){const u=lr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,Qt(f)?f.setProperty(C,c,d):nl(c)||(C.setProperty?C.setProperty(c,d):C[c]=d))}(Dt(),Xt(),c,s,o,c[11],u,!0),Sv}const Ic=void 0;var Rf=["en",[["a","p"],["AM","PM"],Ic],[["AM","PM"],Ic,Ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ic,"{1} 'at' {0}",Ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Qs={};function fm(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=xI(o);if(u)return u;const c=o.split("-")[0];if(u=xI(c),u)return u;if("en"===c)return Rf;throw new Error(`Missing locale data for the locale "${s}".`)}function xv(s){return fm(s)[et.PluralCase]}function xI(s){return s in Qs||(Qs[s]=F.ng&&F.ng.common&&F.ng.common.locales&&F.ng.common.locales[s]),Qs[s]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const ja="en-US";let td=ja;function Ui(s){hn(s,"Expected localeId to be defined"),"string"==typeof s&&(td=s.toLowerCase().replace(/_/g,"-"))}class Wa{}const xc="ngComponent";class za{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${U(s)}. Did you add it to @NgModule.entryComponents?`);return o[xc]=s,o}(o)}}class Si{}function Cm(...s){}function hd(s,o){return new hs(jr(s,o))}Si.NULL=new za;const fd=function(){return hd(mn(),be())};let hs=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=fd,s})();function ZI(s){return s instanceof hs?s.nativeElement:s}class kf{}let qa=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>YI(),s})();const YI=function(){const s=be(),u=lr(mn().index,s);return function(s){return s[11]}(Vr(u)?u:s)};let Rc=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class Lf{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ff=new Lf("12.2.5");class QI{constructor(){}supports(o){return Gl(o)}create(o){return new eb(o)}}const JI=(s,o)=>o;class eb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||JI}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const _=!c||u&&u.currentIndex<Tm(c,d,f)?u:c,v=Tm(_,d,f),C=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{f||(f=[]);const T=v-d,S=C-d;if(T!=S){for(let M=0;M<T;M++){const V=M<f.length?f[M]:f[M]=0,G=V+M;S<=G&&G<T&&(f[M]=V+1)}f[_.previousIndex]=S-T}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Gl(o))throw new Error(`Error trying to diff '${U(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)f=o[v],_=this._trackByFn(v,f),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,f,_,v)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,_,v),c=!0),u=u._next}else d=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Hl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,v=>{_=this._trackByFn(d,v),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,v,_,d)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new fT(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Zv),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fT{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Zv{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new tb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tm(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class nb{constructor(){}supports(o){return o instanceof Map||Kg(o)}create(){return new rb}}class rb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Kg(o)))throw new Error(`Error trying to diff '${U(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new pT(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class pT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yv(){return new Sm([new QI])}let Sm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Yv()),deps:[[s,new ts,new si]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Yv}),s})();function Nc(){return new gd([new nb])}let gd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Nc()),deps:[[s,new ts,new si]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Nc}),s})();function Oc(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(Jt(f)),Lt(f))for(let v=10;v<f.length;v++){const C=f[v],T=C[1].firstChild;null!==T&&Oc(C[1],C,T,c)}const _=u.type;if(8&_)Oc(s,o,u.child,c);else if(32&_){const v=r_(u,o);let C;for(;C=v();)c.push(C)}else if(16&_){const v=dg(o,u);if(Array.isArray(v))c.push(...v);else{const C=ig(o[16]);Oc(C[1],C,v,c,!0)}}u=d?u.projectionNext:u.next}return c}class md{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Oc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Lt(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(d_(o,c),Qi(u,c))}this._attachedToViewContainer=!1}Q0(this._lView[1],this._lView)}onDestroy(o){Ll(this._lView[1],this._lView,null,o)}markForCheck(){V_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ng(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){As(!0);try{Ng(s,o,u)}finally{As(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,$h(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class ib extends md{constructor(o){super(o),this._view=o}detectChanges(){U_(this._view)}checkNoChanges(){!function(s){As(!0);try{U_(s)}finally{As(!1)}}(this._view)}get context(){return null}}const mT=function(s){return function(s,o,u){if(Wc(s)&&!u){const c=lr(s.index,o);return new md(c,c)}return 47&s.type?new md(o[16],o):null}(mn(),be(),16==(16&s))};let Qv=(()=>{class s{}return s.__NG_ELEMENT_ID__=mT,s})();const _T=[new nb],ir=new Sm([new QI]),vT=new gd(_T),wT=function(){return Uf(mn(),be())};let Vf=(()=>{class s{}return s.__NG_ELEMENT_ID__=wT,s})();const IT=Vf,eE=class extends IT{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=nc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),Sa(u,c,o),new md(c)}};function Uf(s,o){return 4&s.type?new eE(o,s,hd(s,o)):null}class $o{}class jf{}const nE=function(){return cb(mn(),be())};let yd=(()=>{class s{}return s.__NG_ELEMENT_ID__=nE,s})();const ab=yd,ub=class extends ab{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return hd(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const o=aa(this._hostTNode,this._hostLView);if(xp(o)){const u=Su(o,this._hostLView),c=Tu(o);return new ni(u[1].data[c+8],u)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=iE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const _=c||this.parentInjector;if(!f&&null==o.ngModule&&_){const C=_.get($o,null);C&&(f=C)}const v=o.create(_,d,void 0,f);return this.insert(v.hostView,u),v}insert(o,u){const c=o._lView,d=c[1];if(Lt(c[3])){const S=this.indexOf(o);if(-1!==S)this.detach(S);else{const R=c[3],M=new ub(R,R[6],R[3]);M.detach(M.indexOf(o))}}const f=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],Mu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(d,c,_,f);const v=rw(f,_),C=c[11],T=No(C,_[7]);return null!==T&&function(s,o,u,c,d,f){c[0]=d,c[6]=o,$h(s,c,u,1,d,f)}(d,_[6],C,c,T,v),o.attachToViewContainerRef(),Mu(sE(_),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=iE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=d_(this._lContainer,u);c&&(Qi(sE(this._lContainer),u),Q0(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=d_(this._lContainer,u);return c&&null!=Qi(sE(this._lContainer),u)?new md(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function iE(s){return s[8]}function sE(s){return s[8]||(s[8]=[])}function cb(s,o){let u;const c=o[s.index];if(Lt(c))u=c;else{let d;if(8&s.type)d=Jt(c);else{const f=o[11];d=f.createComment("");const _=jr(s,o);ec(f,No(f,_),d,function(s,o){return Qt(s)?s.nextSibling(o):o.nextSibling}(f,_),!1)}o[s.index]=u=function(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}(c,o,d,s),Kh(o,u)}return new ub(u,s,o)}const Lc={};class zm extends Si{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Wn(o);return new kE(u,this.ngModule)}}function qm(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const jT=new vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Nl});class kE extends Wa{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(QC).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return qm(this.componentDef.inputs)}get outputs(){return qm(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function(s,o){return{get:(u,c,d)=>{const f=s.get(u,Lc,d);return f!==Lc||c===Lc?f:o.get(u,c,d)}}}(o,d.injector):o,_=f.get(kf,Qc),v=f.get(Rc,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=c?function(s,o,u){if(Qt(s))return s.selectRootElement(o,u===pn.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):c_(_.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),R=this.componentDef.onPush?576:528,M=function(s,o){return{components:[],scheduler:s||Nl,clean:gD,playerHandler:o||null,flags:0}}(),V=wg(0,null,null,1,0,null,null,null,null,null),G=nc(null,V,M,R,null,null,_,C,v,f);let ae,J;bu(G);try{const Re=function(s,o,u,c,d,f){const _=u[1];u[20]=s;const C=rc(_,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(Jh(C,T,!0),null!==s&&(en(d,s,T),null!==C.classes&&f_(d,s,C.classes),null!==C.styles&&ow(d,s,C.styles)));const S=c.createRenderer(s,o),R=nc(u,S_(o),null,o.onPush?64:16,u[20],C,c,S,f||null,null);return _.firstCreatePass&&(al(br(C,u),_,o.type),Kn(_,C),xg(C,u.length,1)),Kh(u,R),u[20]=R}(S,this.componentDef,G,_,C);if(S)if(c)en(C,S,["ng-version",Ff.full]);else{const{attrs:ve,classes:Ye}=function(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!ki(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);ve&&en(C,S,ve),Ye&&Ye.length>0&&f_(C,S,Ye.join(" "))}if(J=Ds(V,20),void 0!==u){const ve=J.projection=[];for(let Ye=0;Ye<this.ngContentSelectors.length;Ye++){const ct=u[Ye];ve.push(null!=ct?Array.from(ct):null)}}ae=function(s,o,u,c,d){const f=u[1],_=function(s,o,u){const c=mn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Iw(s,c,o,ic(s,o,1,null),u));const d=ca(o,s,c.directiveStart,c);Bn(d,o);const f=jr(c,o);return f&&Bn(f,o),d}(f,u,o);if(c.components.push(_),s[8]=_,d&&d.forEach(C=>C(_,o)),o.contentQueries){const C=mn();o.contentQueries(1,_,C.directiveStart)}const v=mn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(vo(v.index),Tg(u[1],v,0,v.directiveStart,v.directiveEnd,o),Sg(o,_)),_}(Re,this.componentDef,G,M,[DD]),Sa(V,G,null)}finally{Ap()}return new xb(this.componentType,ae,hd(J,G),G,J)}}class xb extends class{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new ib(d),this.componentType=o}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const wd=new Map;class Nb extends $o{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new zm(this);const c=ur(o),d=o[Rn]||null;d&&Ui(d),this._bootstrapComponents=Pi(c.bootstrap),this._r3Injector=kg(o,u,[{provide:$o,useValue:this},{provide:Si,useValue:this.componentFactoryResolver}],U(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Wt.THROW_IF_NOT_FOUND,c=De.Default){return o===Wt||o===$o||o===Mo?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Qf extends jf{constructor(o){super(),this.moduleType=o,null!==ur(o)&&function(s){const o=new Set;!function u(c){const d=ur(c,!0),f=d.id;null!==f&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${U(o)} vs ${U(o.name)}`)}(f,wd.get(f),c),wd.set(f,c));const _=Pi(d.imports);for(const v of _)o.has(v)||(o.add(v),u(v))}(s)}(o)}create(o){return new Nb(this.moduleType,o)}}function Qm(s){return o=>{setTimeout(s,void 0,o)}}const Ai=class extends I.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,_;let v=o,C=u||(()=>null),T=c;if(o&&"object"==typeof o){const R=o;v=null===(d=R.next)||void 0===d?void 0:d.bind(R),C=null===(f=R.error)||void 0===f?void 0:f.bind(R),T=null===(_=R.complete)||void 0===_?void 0:_.bind(R)}this.__isAsync&&(C=Qm(C),v&&(v=Qm(v)),T&&(T=Qm(T)));const S=super.subscribe({next:v,error:C,complete:T});return o instanceof oe.w&&o.add(S),S}};function Mt(){return this._results[Hl()]()}class Xf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Hl(),c=Xf.prototype;c[u]||(c[u]=Mt)}get changes(){return this._changes||(this._changes=new Ai)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=ri(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Zt{constructor(o){this.queryList=o,this.matches=null}clone(){return new Zt(this.queryList)}setDirty(){this.queryList.setDirty()}}class ar{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const _=u.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new ar(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==qE(o,u).matches&&this.queries[u].setDirty()}}class ms{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Jm{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Jm(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class GE{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new GE(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,Xm(u,f)),this.matchTNodeWithReadOption(o,u,xu(u,o,f,!1,!1))}else c===Vf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,xu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===hs||d===yd||d===Vf&&4&u.type)this.addMatch(u.index,-2);else{const f=xu(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Xm(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Bb(s,o,u,c){return-1===u?function(s,o){return 11&s.type?hd(s,o):4&s.type?Uf(s,o):null}(o,s):-2===u?function(s,o,u){return u===hs?hd(o,s):u===Vf?Uf(o,s):u===yd?cb(o,s):void 0}(s,o,c):ca(s,s[1],u,o)}function ey(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,_=u.matches,v=[];for(let C=0;C<_.length;C+=2){const T=_[C];v.push(T<0?null:Bb(o,f[T],_[C+1],u.metadata.read))}d.matches=v}return d.matches}function WE(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const _=ey(s,o,d,u);for(let v=0;v<f.length;v+=2){const C=f[v];if(C>0)c.push(_[v/2]);else{const T=f[v+1],S=o[-C];for(let R=10;R<S.length;R++){const M=S[R];M[17]===M[3]&&WE(M[1],M,T,c)}if(null!==S[9]){const R=S[9];for(let M=0;M<R.length;M++){const V=R[M];WE(V[1],V,T,c)}}}}}return c}function $b(s){const o=be(),u=Dt(),c=_o();sh(c+1);const d=qE(u,c);if(s.dirty&&mu(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?WE(u,o,c,[]):ey(u,o,d,c);s.reset(f,ZI),s.notifyOnChanges()}return!0}return!1}function YT(s,o,u,c){const d=Dt();if(d.firstCreatePass){const f=mn();(function(s,o,u){null===s.queries&&(s.queries=new Jm),s.queries.track(new GE(o,u))})(d,new ms(o,u,c),f.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function(s,o,u){const c=new Xf(4==(4&u));Ll(s,o,c,c.destroy),null===o[19]&&(o[19]=new ar),o[19].queries.push(new Zt(c))}(d,be(),u)}function QT(){return s=be(),o=_o(),s[19].queries[o].queryList;var s,o}function qE(s,o){return s.queries.getByIndex(o)}const sy=new vn("Application Initializer");let Rd=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Cm,this.reject=Cm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(jo(f))u.push(f);else if(yc(f)){const _=new Promise((v,C)=>{f.subscribe({complete:v,error:C})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Dn(sy,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const tC=new vn("AppId"),dS={provide:tC,useFactory:function(){return`${iu()}${iu()}${iu()}`},deps:[]};function iu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oy=new vn("Platform Initializer"),rC=new vn("Platform ID"),iC=new vn("appBootstrapListener");let sC=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const ay=new vn("LocaleId"),oC=new vn("DefaultCurrencyCode");class aC{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const ap=function(s){return new Qf(s)},pS=ap,cy=function(s){return Promise.resolve(ap(s))},c0=function(s){const o=ap(s),c=Pi(ur(s).declarations).reduce((d,f)=>{const _=Wn(f);return _&&d.push(new kE(_)),d},[]);return new aC(o,c)},uC=c0,Zr=function(s){return Promise.resolve(c0(s))};let Md=(()=>{class s{constructor(){this.compileModuleSync=pS,this.compileModuleAsync=cy,this.compileModuleAndAllComponentsSync=uC,this.compileModuleAndAllComponentsAsync=Zr}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();const cp=(()=>Promise.resolve(0))();function _r(s){"undefined"==typeof Zone?cp.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Yr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ai(!1),this.onMicrotaskEmpty=new Ai(!1),this.onStable=new Ai(!1),this.onError=new Ai(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=F.requestAnimationFrame,o=F.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(F,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,d0(s),s.isCheckStableRunning=!0,zo(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),d0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,_,v)=>{try{return lC(s),u.invokeTask(d,f,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),dC(s)}},onInvoke:(u,c,d,f,_,v,C)=>{try{return lC(s),u.invoke(d,f,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),dC(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,d0(s),zo(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,Pd,Cm,Cm);try{return f.runTask(_,u,c)}finally{f.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Pd={};function zo(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function d0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function lC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dC(s){s._nesting--,zo(s)}class yS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ai,this.onMicrotaskEmpty=new Ai,this.onStable=new Ai,this.onError=new Ai}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let kd=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yr.assertNotInAngularZone(),_r(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_r(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Dn(Yr))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),hC=(()=>{class s{constructor(){this._applications=new Map,h0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return h0.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();class _S{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function vS(s){h0=s}let h0=new _S,f0=!0,fC=!1;function ly(){return fC=!0,f0}function p0(){if(fC)throw new Error("Cannot enable prod mode after platform setup.");f0=!1}let _s;const CS=new vn("AllowMultipleToken");class DS{constructor(o,u){this.name=o,this.token=u}}function EC(s,o,u=[]){const c=`Platform: ${o}`,d=new vn(c);return(f=[])=>{let _=y0();if(!_||_.injector.get(CS,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const v=u.concat(f).concat({provide:d,useValue:!0},{provide:sc,useValue:"platform"});!function(s){if(_s&&!_s.destroyed&&!_s.injector.get(CS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_s=s.get(wC);const o=s.get(oy,null);o&&o.forEach(u=>u())}(Wt.create({providers:v,name:c}))}return function(s){const o=y0();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(d)}}function y0(){return _s&&!_s.destroyed?_s:null}let wC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(s,o){let u;return u="noop"===s?new yS:("zone.js"===s?void 0:s)||new Yr({enableLongStackTrace:ly(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:Yr,useValue:v}];return v.run(()=>{const T=Wt.create({providers:C,parent:this.injector,name:u.moduleType.name}),S=u.create(T),R=S.injector.get(z,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const M=v.onError.subscribe({next:V=>{R.handleError(V)}});S.onDestroy(()=>{dy(this._modules,S),M.unsubscribe()})}),function(s,o,u){try{const c=u();return jo(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(R,v,()=>{const M=S.injector.get(Rd);return M.runInitializers(),M.donePromise.then(()=>(Ui(S.injector.get(ay,ja)||ja),this._moduleDoBootstrap(S),S))})})}bootstrapModule(u,c=[]){const d=v0({},c);return function(s,o,u){const c=new Qf(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(Ld);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${U(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Dn(Wt))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function v0(s,o){return Array.isArray(o)?o.reduce(v0,s):Object.assign(Object.assign({},s),o)}let Ld=(()=>{class s{constructor(u,c,d,f,_){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new B.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new B.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Yr.assertNotInAngularZone(),_r(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Yr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ne.T)(v,C.pipe(s=>(0,pe.x)()(function(s,o){return function(c){let d;d="function"==typeof s?s:function(){return s};const f=Object.create(c,me.N);return f.source=c,f.subjectFactory=d,f}}(q)(s))))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=u instanceof Wa?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get($o),v=d.create(Wt.NULL,[],c||d.selector,f),C=v.location.nativeElement,T=v.injector.get(kd,null),S=T&&v.injector.get(hC);return T&&S&&S.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),dy(this.components,v),S&&S.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;dy(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(iC,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Dn(Yr),Dn(Wt),Dn(z),Dn(Si),Dn(Rd))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function dy(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class CC{}class i{}const n={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let r=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||n}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,d]=u.split("#");return void 0===d&&(d="default"),k(8255)(c).then(f=>f[d]).then(f=>a(f,c,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(u){let[c,d]=u.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),k(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[d+f]).then(_=>a(_,c,d))}}return s.\u0275fac=function(u){return new(u||s)(Dn(Md),Dn(i,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})();function a(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const dx=function(s){return null},fx=EC(null,"core",[{provide:rC,useValue:"unknown"},{provide:wC,deps:[Wt]},{provide:hC,deps:[]},{provide:sC,deps:[]}]),_x=[{provide:Ld,useClass:Ld,deps:[Yr,Wt,z,Si,Rd]},{provide:jT,deps:[Yr],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Rd,useClass:Rd,deps:[[new si,sy]]},{provide:Md,useClass:Md,deps:[]},dS,{provide:Sm,useFactory:function(){return ir},deps:[]},{provide:gd,useFactory:function(){return vT},deps:[]},{provide:ay,useFactory:function(s){return Ui(s=s||"undefined"!=typeof $localize&&$localize.locale||ja),s},deps:[[new ya(ay),new si,new ts]]},{provide:oC,useValue:"USD"}];let Ex=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Dn(Ld))},s.\u0275mod=su({type:s}),s.\u0275inj=hi({providers:_x}),s})()},8939:(Ge,Ie,k)=>{"use strict";k.d(Ie,{hO:()=>U,xv:()=>q,Dh:()=>pe,GT:()=>ie,on:()=>L,pX:()=>me});var I=k(3018),oe=k(7841),B=k(9126);Ge=k.hmd(Ge);const ne=["ngOnDestroy"],me=(W,ce,te,ee={})=>new Proxy(W,{get:(Oe,Se)=>te.runOutsideAngular(()=>{var xe;if(W[Se])return(null===(xe=null==ee?void 0:ee.spy)||void 0===xe?void 0:xe.get)&&ee.spy.get(Se,W[Se]),W[Se];if(ne.indexOf(Se)>-1)return()=>{};const Pe=ce.toPromise().then(Fe=>{const ke=Fe&&Fe[Se];return"function"==typeof ke?ke.bind(Fe):ke&&ke.then?ke.then(ot=>te.run(()=>ot)):te.run(()=>ke)});return new Proxy(()=>{},{get:(Fe,ke)=>Pe[ke],apply:(Fe,ke,ot)=>Pe.then(zt=>{var ye;const re=zt&&zt(...ot);return(null===(ye=null==ee?void 0:ee.spy)||void 0===ye?void 0:ye.apply)&&ee.spy.apply(Se,ot,re),re})})})}),ie=(W,ce)=>{ce.forEach(te=>{Object.getOwnPropertyNames(te.prototype||te).forEach(ee=>{Object.defineProperty(W.prototype,ee,Object.getOwnPropertyDescriptor(te.prototype||te,ee))})})};class _e{constructor(ce){return ce}}const pe=new I.OlP("angularfire2.app.options"),q=new I.OlP("angularfire2.app.name");function L(W,ce,te){const Oe="object"==typeof te&&te||{};Oe.name=Oe.name||"string"==typeof te&&te||"[DEFAULT]";const xe=oe.Z.apps.filter(Pe=>Pe&&Pe.name===Oe.name)[0]||ce.runOutsideAngular(()=>oe.Z.initializeApp(W,Oe));try{JSON.stringify(W)!==JSON.stringify(xe.options)&&j("error",`${xe.name} Firebase App already initialized with different options${Ge.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Pe){}return new _e(xe)}const j=(W,...ce)=>{(0,I.X6Q)()&&"undefined"!=typeof console&&console[W](...ce)},$={provide:_e,useFactory:L,deps:[pe,I.R0b,[new I.FiY,q]]};let U=(()=>{class W{constructor(te){oe.Z.registerVersion("angularfire",B.q4.full,"core"),oe.Z.registerVersion("angularfire",B.q4.full,"app-compat"),oe.Z.registerVersion("angular",I.q4F.full,te.toString())}static initializeApp(te,ee){return{ngModule:W,providers:[{provide:pe,useValue:te},{provide:q,useValue:ee}]}}}return W.\u0275fac=function(te){return new(te||W)(I.LFG(I.Lbi))},W.\u0275mod=I.oAB({type:W}),W.\u0275inj=I.cJS({providers:[$]}),W})()},9126:(Ge,Ie,k)=>{"use strict";k.d(Ie,{q4:()=>L,iC:()=>re,HU:()=>Pe,cc:()=>U});var I=k(3018);(0,k(5452).registerVersion)("firebase","9.0.2","app");var me=k(7771),ie=k(3637),_e=k(3342),pe=k(3101),q=k(309);Ge=k.hmd(Ge);const L=new I.GfV("7.0.4"),j=!!Ge.hot,$=(he,...Q)=>{(0,I.X6Q)()&&"undefined"!=typeof console&&console[he](...Q)};function U(he,Q,Ne,We,It){const[,Je,bt]=globalThis.\u0275AngularfireInstanceCache.find(Vt=>Vt[0]===he)||[];if(Je)return function(he,Q){try{return he.toString()===Q.toString()}catch(Ne){return he===Q}}(It,bt)||($("error",`${Q} was already initialized on the ${Ne} Firebase App with different settings.${j?" You may need to reload as Firebase is not HMR aware.":""}`),$("warn",{is:It,was:bt})),Je;{const Vt=We();return globalThis.\u0275AngularfireInstanceCache.push([he,Vt,It]),Vt}}function Oe(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Se{constructor(Q,Ne=me.N){this.zone=Q,this.delegate=Ne}now(){return this.delegate.now()}schedule(Q,Ne,We){const It=this.zone;return this.delegate.schedule(function(bt){It.runGuarded(()=>{Q.apply(this,[bt])})},Ne,We)}}class xe{constructor(Q){this.zone=Q,this.task=null}call(Q,Ne){const We=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oe,{},Oe,Oe)),Ne.pipe((0,_e.b)({next:We,complete:We,error:We})).subscribe(Q).add(We)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pe=(()=>{class he{constructor(Ne){this.ngZone=Ne,this.outsideAngular=Ne.runOutsideAngular(()=>new Se(Zone.current)),this.insideAngular=Ne.run(()=>new Se(Zone.current,ie.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return he.\u0275fac=function(Ne){return new(Ne||he)(I.LFG(I.R0b))},he.\u0275prov=I.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})();function Fe(){const he=globalThis.\u0275AngularFireScheduler;if(!he)throw new Error("AngularFireModule has not been provided");return he}function re(he){return Fe(),function(he){return function(Ne){return(Ne=Ne.lift(new xe(he.ngZone))).pipe((0,pe.R)(he.outsideAngular),(0,q.QV)(he.insideAngular))}}(Fe())(he)}},4486:(Ge,Ie,k)=>{"use strict";k.d(Ie,{Z:()=>te});var I=k(4685),oe=k(6034),B=k(5452),ne=k(300);class me{constructor(Oe,Se){this._delegate=Oe,this.firebase=Se,(0,B._addComponent)(Oe,new oe.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Oe,Se=B._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(Oe);return!Pe.isInitialized()&&"EXPLICIT"===(null===(xe=Pe.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Se})}_removeServiceInstance(Oe,Se=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(Se)}_addComponent(Oe){(0,B._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,B._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function q(){const ee=function(ee){const Oe={},Se={__esModule:!0,initializeApp:function(ye,re={}){const se=B.initializeApp(ye,re);if((0,I.r3)(Oe,se.name))return Oe[se.name];const de=new ee(se,Se);return Oe[se.name]=de,de},app:Pe,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function(ye){const re=ye.name,se=re.replace("-compat","");if(B._registerComponent(ye)&&"PUBLIC"===ye.type){const de=(ue=Pe())=>{if("function"!=typeof ue[se])throw _e.create("invalid-app-argument",{appName:re});return ue[se]()};void 0!==ye.serviceProps&&(0,I.ZB)(de,ye.serviceProps),Se[se]=de,ee.prototype[se]=function(...ue){return this._getService.bind(this,re).apply(this,ye.multipleInstances?ue:[])}}return"PUBLIC"===ye.type?Se[se]:null},removeApp:function(ye){delete Oe[ye]},useAsService:function(ye,re){return"serverAuth"===re?null:re},modularAPIs:B}};function Pe(ye){if(!(0,I.r3)(Oe,ye=ye||B._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:ye});return Oe[ye]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function(){return Object.keys(Oe).map(ye=>Oe[ye])}}),Pe.App=ee,Se}(me);return ee.INTERNAL=Object.assign(Object.assign({},ee.INTERNAL),{createFirebaseNamespace:q,extendNamespace:function(Se){(0,I.ZB)(ee,Se)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),ee}(),j=new ne.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ee=self.firebase.SDK_VERSION;ee&&ee.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ce=L;(0,B.registerVersion)("@firebase/app-compat","0.1.1",undefined);const te=ce},5452:(Ge,Ie,k)=>{"use strict";k.r(Ie),k.d(Ie,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Xr,_DEFAULT_ENTRY_NAME:()=>It,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Qr,_apps:()=>bt,_clearComponents:()=>Rt,_components:()=>Vt,_getProvider:()=>hn,_registerComponent:()=>Jr,_removeServiceInstance:()=>at,deleteApp:()=>io,getApp:()=>Er,getApps:()=>ro,initializeApp:()=>hi,onLog:()=>Vn,registerVersion:()=>Wi,setLogLevel:()=>fi});var I=k(8239),oe=k(6034),B=k(300),ne=k(4685);class me{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map($t=>{if(function(dt){const De=dt.getComponent();return"VERSION"===(null==De?void 0:De.type)}($t)){const sn=$t.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter($t=>$t).join(" ")}}const _e="@firebase/app",q=new B.Yd("@firebase/app"),It="[DEFAULT]",Je={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,Vt=new Map;function dn(dt,De){try{dt.container.addComponent(De)}catch($t){q.debug(`Component ${De.name} failed to register with FirebaseApp ${dt.name}`,$t)}}function Qr(dt,De){dt.container.addOrOverwriteComponent(De)}function Jr(dt){const De=dt.name;if(Vt.has(De))return q.debug(`There were multiple attempts to register component ${De}.`),!1;Vt.set(De,dt);for(const $t of bt.values())dn($t,dt);return!0}function hn(dt,De){return dt.container.getProvider(De)}function at(dt,De,$t=It){hn(dt,De).clearInstance($t)}function Rt(){Vt.clear()}const no=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class rn{constructor(De,$t,sn){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},$t),this._name=$t.name,this._automaticDataCollectionEnabled=$t.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new oe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}const Xr="9.0.0";function hi(dt,De={}){"object"!=typeof De&&(De={name:De});const $t=Object.assign({name:It,automaticDataCollectionEnabled:!1},De),sn=$t.name;if("string"!=typeof sn||!sn)throw no.create("bad-app-name",{appName:String(sn)});const on=bt.get(sn);if(on){if((0,ne.vZ)(dt,on.options)&&(0,ne.vZ)($t,on.config))return on;throw no.create("duplicate-app",{appName:sn})}const Pt=new oe.H0(sn);for(const qe of Vt.values())Pt.addComponent(qe);const ze=new rn(dt,$t,Pt);return bt.set(sn,ze),ze}function Er(dt=It){const De=bt.get(dt);if(!De)throw no.create("no-app",{appName:dt});return De}function ro(){return Array.from(bt.values())}function io(dt){return so.apply(this,arguments)}function so(){return(so=(0,I.Z)(function*(dt){const De=dt.name;bt.has(De)&&(bt.delete(De),yield Promise.all(dt.container.getProviders().map($t=>$t.delete())),dt.isDeleted=!0)})).apply(this,arguments)}function Wi(dt,De,$t){var sn;let on=null!==(sn=Je[dt])&&void 0!==sn?sn:dt;$t&&(on+=`-${$t}`);const Pt=on.match(/\s|\//),ze=De.match(/\s|\//);if(Pt||ze){const qe=[`Unable to register library "${on}" with version "${De}":`];return Pt&&qe.push(`library name "${on}" contains illegal characters (whitespace or "/")`),Pt&&ze&&qe.push("and"),ze&&qe.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void q.warn(qe.join(" "))}Jr(new oe.wA(`${on}-version`,()=>({library:on,version:De}),"VERSION"))}function Vn(dt,De){if(null!==dt&&"function"!=typeof dt)throw no.create("invalid-log-argument");(0,B.Am)(dt,De)}function fi(dt){(0,B.Ub)(dt)}Jr(new oe.wA("platform-logger",De=>new me(De),"PRIVATE")),Wi(_e,"0.7.0",undefined),Wi("fire-js","")},6034:(Ge,Ie,k)=>{"use strict";k.d(Ie,{wA:()=>B,H0:()=>pe});var I=k(4762),oe=k(4685),B=function(){function q(L,j,$){this.name=L,this.instanceFactory=j,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return q.prototype.setInstantiationMode=function(L){return this.instantiationMode=L,this},q.prototype.setMultipleInstances=function(L){return this.multipleInstances=L,this},q.prototype.setServiceProps=function(L){return this.serviceProps=L,this},q.prototype.setInstanceCreatedCallback=function(L){return this.onInstanceCreated=L,this},q}(),ne="[DEFAULT]",me=function(){function q(L,j){this.name=L,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return q.prototype.get=function(L){var j=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(j)){var $=new oe.BH;if(this.instancesDeferred.set(j,$),this.isInitialized(j)||this.shouldAutoInitialize())try{var U=this.getOrInitializeService({instanceIdentifier:j});U&&$.resolve(U)}catch(W){}}return this.instancesDeferred.get(j).promise},q.prototype.getImmediate=function(L){var j,$=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),U=null!==(j=null==L?void 0:L.optional)&&void 0!==j&&j;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(U)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(W){if(U)return null;throw W}},q.prototype.getComponent=function(){return this.component},q.prototype.setComponent=function(L){var j,$;if(L.name!==this.name)throw Error("Mismatching Component "+L.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=L,this.shouldAutoInitialize()){if(function(q){return"EAGER"===q.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){}try{for(var U=(0,I.XA)(this.instancesDeferred.entries()),W=U.next();!W.done;W=U.next()){var ce=(0,I.CR)(W.value,2),ee=ce[1],Oe=this.normalizeInstanceIdentifier(ce[0]);try{var Se=this.getOrInitializeService({instanceIdentifier:Oe});ee.resolve(Se)}catch(xe){}}}catch(xe){j={error:xe}}finally{try{W&&!W.done&&($=U.return)&&$.call(U)}finally{if(j)throw j.error}}}},q.prototype.clearInstance=function(L){void 0===L&&(L=ne),this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)},q.prototype.delete=function(){return(0,I.mG)(this,void 0,void 0,function(){var L;return(0,I.Jh)(this,function(j){switch(j.label){case 0:return L=Array.from(this.instances.values()),[4,Promise.all((0,I.ev)((0,I.ev)([],(0,I.CR)(L.filter(function($){return"INTERNAL"in $}).map(function($){return $.INTERNAL.delete()}))),(0,I.CR)(L.filter(function($){return"_delete"in $}).map(function($){return $._delete()}))))];case 1:return j.sent(),[2]}})})},q.prototype.isComponentSet=function(){return null!=this.component},q.prototype.isInitialized=function(L){return void 0===L&&(L=ne),this.instances.has(L)},q.prototype.getOptions=function(L){return void 0===L&&(L=ne),this.instancesOptions.get(L)||{}},q.prototype.initialize=function(L){var j,$;void 0===L&&(L={});var U=L.options,W=void 0===U?{}:U,ce=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(ce))throw Error(this.name+"("+ce+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var te=this.getOrInitializeService({instanceIdentifier:ce,options:W});try{for(var ee=(0,I.XA)(this.instancesDeferred.entries()),Oe=ee.next();!Oe.done;Oe=ee.next()){var Se=(0,I.CR)(Oe.value,2),Pe=Se[1];ce===this.normalizeInstanceIdentifier(Se[0])&&Pe.resolve(te)}}catch(ke){j={error:ke}}finally{try{Oe&&!Oe.done&&($=ee.return)&&$.call(ee)}finally{if(j)throw j.error}}return te},q.prototype.onInit=function(L,j){var $,U=this.normalizeInstanceIdentifier(j),W=null!==($=this.onInitCallbacks.get(U))&&void 0!==$?$:new Set;W.add(L),this.onInitCallbacks.set(U,W);var ce=this.instances.get(U);return ce&&L(ce,U),function(){W.delete(L)}},q.prototype.invokeOnInitCallbacks=function(L,j){var $,U,W=this.onInitCallbacks.get(j);if(W)try{for(var ce=(0,I.XA)(W),te=ce.next();!te.done;te=ce.next()){var ee=te.value;try{ee(L,j)}catch(Oe){}}}catch(Oe){$={error:Oe}}finally{try{te&&!te.done&&(U=ce.return)&&U.call(ce)}finally{if($)throw $.error}}},q.prototype.getOrInitializeService=function(L){var j=L.instanceIdentifier,$=L.options,U=void 0===$?{}:$,W=this.instances.get(j);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:ie(j),options:U}),this.instances.set(j,W),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(W,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,W)}catch(ce){}return W||null},q.prototype.normalizeInstanceIdentifier=function(L){return void 0===L&&(L=ne),this.component?this.component.multipleInstances?L:ne:L},q.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},q}();function ie(q){return q===ne?void 0:q}var pe=function(){function q(L){this.name=L,this.providers=new Map}return q.prototype.addComponent=function(L){var j=this.getProvider(L.name);if(j.isComponentSet())throw new Error("Component "+L.name+" has already been registered with "+this.name);j.setComponent(L)},q.prototype.addOrOverwriteComponent=function(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)},q.prototype.getProvider=function(L){if(this.providers.has(L))return this.providers.get(L);var j=new me(L,this);return this.providers.set(L,j),j},q.prototype.getProviders=function(){return Array.from(this.providers.values())},q}()},300:(Ge,Ie,k)=>{"use strict";function I(){for(var $=0,U=0,W=arguments.length;U<W;U++)$+=arguments[U].length;var ce=Array($),te=0;for(U=0;U<W;U++)for(var ee=arguments[U],Oe=0,Se=ee.length;Oe<Se;Oe++,te++)ce[te]=ee[Oe];return ce}k.d(Ie,{in:()=>ne,Yd:()=>q,Ub:()=>L,Am:()=>j});var oe,B=[],ne=(()=>{return($=ne||(ne={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ne;var $})(),me={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ie=ne.INFO,_e=((oe={})[ne.DEBUG]="log",oe[ne.VERBOSE]="log",oe[ne.INFO]="info",oe[ne.WARN]="warn",oe[ne.ERROR]="error",oe),pe=function($,U){for(var W=[],ce=2;ce<arguments.length;ce++)W[ce-2]=arguments[ce];if(!(U<$.logLevel)){var te=(new Date).toISOString(),ee=_e[U];if(!ee)throw new Error("Attempted to log a message with an invalid logType (value: "+U+")");console[ee].apply(console,I(["["+te+"]  "+$.name+":"],W))}},q=function(){function $(U){this.name=U,this._logLevel=ie,this._logHandler=pe,this._userLogHandler=null,B.push(this)}return Object.defineProperty($.prototype,"logLevel",{get:function(){return this._logLevel},set:function(U){if(!(U in ne))throw new TypeError('Invalid value "'+U+'" assigned to `logLevel`');this._logLevel=U},enumerable:!1,configurable:!0}),$.prototype.setLogLevel=function(U){this._logLevel="string"==typeof U?me[U]:U},Object.defineProperty($.prototype,"logHandler",{get:function(){return this._logHandler},set:function(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(U){this._userLogHandler=U},enumerable:!1,configurable:!0}),$.prototype.debug=function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,I([this,ne.DEBUG],U)),this._logHandler.apply(this,I([this,ne.DEBUG],U))},$.prototype.log=function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,I([this,ne.VERBOSE],U)),this._logHandler.apply(this,I([this,ne.VERBOSE],U))},$.prototype.info=function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,I([this,ne.INFO],U)),this._logHandler.apply(this,I([this,ne.INFO],U))},$.prototype.warn=function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,I([this,ne.WARN],U)),this._logHandler.apply(this,I([this,ne.WARN],U))},$.prototype.error=function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,I([this,ne.ERROR],U)),this._logHandler.apply(this,I([this,ne.ERROR],U))},$}();function L($){B.forEach(function(U){U.setLogLevel($)})}function j($,U){for(var W=function(Oe){var Se=null;U&&U.level&&(Se=me[U.level]),Oe.userLogHandler=null===$?null:function(xe,Pe){for(var Fe=[],ke=2;ke<arguments.length;ke++)Fe[ke-2]=arguments[ke];var ot=Fe.map(function(zt){if(null==zt)return null;if("string"==typeof zt)return zt;if("number"==typeof zt||"boolean"==typeof zt)return zt.toString();if(zt instanceof Error)return zt.message;try{return JSON.stringify(zt)}catch(ye){return null}}).filter(function(zt){return zt}).join(" ");Pe>=(null!=Se?Se:xe.logLevel)&&$({level:ne[Pe].toLowerCase(),message:ot,args:Fe,type:xe.name})}},ce=0,te=B;ce<te.length;ce++)W(te[ce])}},4685:(Ge,Ie,k)=>{"use strict";k.d(Ie,{BH:()=>W,LL:()=>Ne,ZR:()=>Q,tV:()=>L,r3:()=>at,Sg:()=>ce,ne:()=>so,vZ:()=>rn,ZB:()=>$,pd:()=>ro,m9:()=>Yt,z$:()=>te,jU:()=>Se,ru:()=>xe,d:()=>Fe,xb:()=>vs,w1:()=>ke,hl:()=>re,uI:()=>ee,UG:()=>Oe,b$:()=>Pe,G6:()=>ye,Mn:()=>ot,xO:()=>hi,zd:()=>Er});var I=k(4762),me=function(H){for(var F=[],X=0,le=0;le<H.length;le++){var Y=H.charCodeAt(le);Y<128?F[X++]=Y:Y<2048?(F[X++]=Y>>6|192,F[X++]=63&Y|128):55296==(64512&Y)&&le+1<H.length&&56320==(64512&H.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&H.charCodeAt(++le)),F[X++]=Y>>18|240,F[X++]=Y>>12&63|128,F[X++]=Y>>6&63|128,F[X++]=63&Y|128):(F[X++]=Y>>12|224,F[X++]=Y>>6&63|128,F[X++]=63&Y|128)}return F},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(H,F){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var X=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[],Y=0;Y<H.length;Y+=3){var Ce=H[Y],Qe=Y+1<H.length,gt=Qe?H[Y+1]:0,Ct=Y+2<H.length,Nt=Ct?H[Y+2]:0,gn=(15&gt)<<2|Nt>>6,uo=63&Nt;Ct||(uo=64,Qe||(gn=64)),le.push(X[Ce>>2],X[(3&Ce)<<4|gt>>4],X[gn],X[uo])}return le.join("")},encodeString:function(H,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(H):this.encodeByteArray(me(H),F)},decodeString:function(H,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(H):function(H){for(var F=[],X=0,le=0;X<H.length;){var Y=H[X++];if(Y<128)F[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){var Ce=H[X++];F[le++]=String.fromCharCode((31&Y)<<6|63&Ce)}else if(Y>239&&Y<365){var Ct=((7&Y)<<18|(63&(Ce=H[X++]))<<12|(63&(Qe=H[X++]))<<6|63&H[X++])-65536;F[le++]=String.fromCharCode(55296+(Ct>>10)),F[le++]=String.fromCharCode(56320+(1023&Ct))}else{Ce=H[X++];var Qe=H[X++];F[le++]=String.fromCharCode((15&Y)<<12|(63&Ce)<<6|63&Qe)}}return F.join("")}(this.decodeStringToByteArray(H,F))},decodeStringToByteArray:function(H,F){this.init_();for(var X=F?this.charToByteMapWebSafe_:this.charToByteMap_,le=[],Y=0;Y<H.length;){var Ce=X[H.charAt(Y++)],gt=Y<H.length?X[H.charAt(Y)]:0,Nt=++Y<H.length?X[H.charAt(Y)]:64,Ht=++Y<H.length?X[H.charAt(Y)]:64;if(++Y,null==Ce||null==gt||null==Nt||null==Ht)throw Error();le.push(Ce<<2|gt>>4),64!==Nt&&(le.push(gt<<4&240|Nt>>2),64!==Ht&&le.push(Nt<<6&192|Ht))}return le},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},q=function(H){return function(H){var F=me(H);return _e.encodeByteArray(F,!0)}(H).replace(/\./g,"")},L=function(H){try{return _e.decodeString(H,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function $(H,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return F}for(var le in F)!F.hasOwnProperty(le)||!U(le)||(H[le]=$(H[le],F[le]));return H}function U(H){return"__proto__"!==H}var W=function(){function H(){var F=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(X,le){F.resolve=X,F.reject=le})}return H.prototype.wrapCallback=function(F){var X=this;return function(le,Y){le?X.reject(le):X.resolve(Y),"function"==typeof F&&(X.promise.catch(function(){}),1===F.length?F(le):F(le,Y))}},H}();function ce(H,F){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var le=F||"demo-project",Y=H.iat||0,Ce=H.sub||H.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Qe=(0,I.pi)({iss:"https://securetoken.google.com/"+le,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},H);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(Qe)),""].join(".")}function te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(te())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Se(){return"object"==typeof self&&self.self===self}function xe(){var H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return te().indexOf("Electron/")>=0}function ke(){var H=te();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function ot(){return te().indexOf("MSAppHost/")>=0}function ye(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function re(){return"indexedDB"in self&&null!=indexedDB}var Q=function(H){function F(X,le,Y){var Ce=H.call(this,le)||this;return Ce.code=X,Ce.customData=Y,Ce.name="FirebaseError",Object.setPrototypeOf(Ce,F.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ce,Ne.prototype.create),Ce}return(0,I.ZT)(F,H),F}(Error),Ne=function(){function H(F,X,le){this.service=F,this.serviceName=X,this.errors=le}return H.prototype.create=function(F){for(var X=[],le=1;le<arguments.length;le++)X[le-1]=arguments[le];var Y=X[0]||{},Ce=this.service+"/"+F,Qe=this.errors[F],gt=Qe?We(Qe,Y):"Error",Ct=this.serviceName+": "+gt+" ("+Ce+").",Nt=new Q(Ce,Ct,Y);return Nt},H}();function We(H,F){return H.replace(It,function(X,le){var Y=F[le];return null!=Y?String(Y):"<"+le+"?>"})}var It=/\{\$([^}]+)}/g;function at(H,F){return Object.prototype.hasOwnProperty.call(H,F)}function vs(H){for(var F in H)if(Object.prototype.hasOwnProperty.call(H,F))return!1;return!0}function rn(H,F){if(H===F)return!0;for(var X=Object.keys(H),le=Object.keys(F),Y=0,Ce=X;Y<Ce.length;Y++){if(!le.includes(Qe=Ce[Y]))return!1;var gt=H[Qe],Ct=F[Qe];if(Xr(gt)&&Xr(Ct)){if(!rn(gt,Ct))return!1}else if(gt!==Ct)return!1}for(var Nt=0,Rn=le;Nt<Rn.length;Nt++){var Qe;if(!X.includes(Qe=Rn[Nt]))return!1}return!0}function Xr(H){return null!==H&&"object"==typeof H}function hi(H){for(var F=[],X=function(Ct,Nt){Array.isArray(Nt)?Nt.forEach(function(Rn){F.push(encodeURIComponent(Ct)+"="+encodeURIComponent(Rn))}):F.push(encodeURIComponent(Ct)+"="+encodeURIComponent(Nt))},le=0,Y=Object.entries(H);le<Y.length;le++){var Ce=Y[le];X(Ce[0],Ce[1])}return F.length?"&"+F.join("&"):""}function Er(H){var F={};return H.replace(/^\?/,"").split("&").forEach(function(le){if(le){var Y=le.split("="),Qe=Y[1];F[decodeURIComponent(Y[0])]=decodeURIComponent(Qe)}}),F}function ro(H){var F=H.indexOf("?");if(!F)return"";var X=H.indexOf("#",F);return H.substring(F,X>0?X:void 0)}function so(H,F){var X=new Wi(H,F);return X.subscribe.bind(X)}!function(){function H(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var F=1;F<this.blockSize;++F)this.pad_[F]=0;this.reset()}H.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},H.prototype.compress_=function(F,X){X||(X=0);var le=this.W_;if("string"==typeof F)for(var Y=0;Y<16;Y++)le[Y]=F.charCodeAt(X)<<24|F.charCodeAt(X+1)<<16|F.charCodeAt(X+2)<<8|F.charCodeAt(X+3),X+=4;else for(Y=0;Y<16;Y++)le[Y]=F[X]<<24|F[X+1]<<16|F[X+2]<<8|F[X+3],X+=4;for(Y=16;Y<80;Y++)le[Y]=4294967295&((Ce=le[Y-3]^le[Y-8]^le[Y-14]^le[Y-16])<<1|Ce>>>31);var Ht,gn,Qe=this.chain_[0],gt=this.chain_[1],Ct=this.chain_[2],Nt=this.chain_[3],Rn=this.chain_[4];for(Y=0;Y<80;Y++){Y<40?Y<20?(Ht=Nt^gt&(Ct^Nt),gn=1518500249):(Ht=gt^Ct^Nt,gn=1859775393):Y<60?(Ht=gt&Ct|Nt&(gt|Ct),gn=2400959708):(Ht=gt^Ct^Nt,gn=3395469782);var Ce=(Qe<<5|Qe>>>27)+Ht+Rn+gn+le[Y]&4294967295;Rn=Nt,Nt=Ct,Ct=4294967295&(gt<<30|gt>>>2),gt=Qe,Qe=Ce}this.chain_[0]=this.chain_[0]+Qe&4294967295,this.chain_[1]=this.chain_[1]+gt&4294967295,this.chain_[2]=this.chain_[2]+Ct&4294967295,this.chain_[3]=this.chain_[3]+Nt&4294967295,this.chain_[4]=this.chain_[4]+Rn&4294967295},H.prototype.update=function(F,X){if(null!=F){void 0===X&&(X=F.length);for(var le=X-this.blockSize,Y=0,Ce=this.buf_,Qe=this.inbuf_;Y<X;){if(0===Qe)for(;Y<=le;)this.compress_(F,Y),Y+=this.blockSize;if("string"==typeof F){for(;Y<X;)if(Ce[Qe]=F.charCodeAt(Y),++Y,++Qe===this.blockSize){this.compress_(Ce),Qe=0;break}}else for(;Y<X;)if(Ce[Qe]=F[Y],++Y,++Qe===this.blockSize){this.compress_(Ce),Qe=0;break}}this.inbuf_=Qe,this.total_+=X}},H.prototype.digest=function(){var F=[],X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&X,X/=256;this.compress_(this.buf_);var Y=0;for(le=0;le<5;le++)for(var Ce=24;Ce>=0;Ce-=8)F[Y]=this.chain_[le]>>Ce&255,++Y;return F}}();var Wi=function(){function H(F,X){var le=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(function(){F(le)}).catch(function(Y){le.error(Y)})}return H.prototype.next=function(F){this.forEachObserver(function(X){X.next(F)})},H.prototype.error=function(F){this.forEachObserver(function(X){X.error(F)}),this.close(F)},H.prototype.complete=function(){this.forEachObserver(function(F){F.complete()}),this.close()},H.prototype.subscribe=function(F,X,le){var Ce,Y=this;if(void 0===F&&void 0===X&&void 0===le)throw new Error("Missing Observer.");void 0===(Ce=function(H,F){if("object"!=typeof H||null===H)return!1;for(var X=0,le=["next","error","complete"];X<le.length;X++){var Y=le[X];if(Y in H&&"function"==typeof H[Y])return!0}return!1}(F)?F:{next:F,error:X,complete:le}).next&&(Ce.next=Es),void 0===Ce.error&&(Ce.error=Es),void 0===Ce.complete&&(Ce.complete=Es);var Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Y.finalError?Ce.error(Y.finalError):Ce.complete()}catch(gt){}}),this.observers.push(Ce),Qe},H.prototype.unsubscribeOne=function(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},H.prototype.forEachObserver=function(F){if(!this.finalized)for(var X=0;X<this.observers.length;X++)this.sendOne(X,F)},H.prototype.sendOne=function(F,X){var le=this;this.task.then(function(){if(void 0!==le.observers&&void 0!==le.observers[F])try{X(le.observers[F])}catch(Y){"undefined"!=typeof console&&console.error&&console.error(Y)}})},H.prototype.close=function(F){var X=this;this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(function(){X.observers=void 0,X.onNoObservers=void 0}))},H}();function Es(){}function Yt(H){return H&&H._delegate?H._delegate:H}},7841:(Ge,Ie,k)=>{"use strict";k.d(Ie,{Z:()=>I.Z});var I=k(4486);I.Z.registerVersion("firebase","9.0.2","app-compat")},6780:(Ge,Ie,k)=>{"use strict";k.r(Ie);var I=k(8239),oe=k(4486),B=k(4685),ne=k(5452),me=k(4762),ie=k(300),_e=k(6034);const ce=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},te=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ee=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new ie.Yd("@firebase/auth");function xe(E,...p){Se.logLevel<=ie.in.ERROR&&Se.error(`Auth (${ne.SDK_VERSION}): ${E}`,...p)}function Pe(E,...p){throw zt(E,...p)}function Fe(E,...p){return zt(E,...p)}function ke(E,p,m){const b=Object.assign(Object.assign({},te()),{[p]:m});return new B.LL("auth","Firebase",b).create(p,{appName:E.name})}function ot(E,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Pe(E,"argument-error"),ke(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zt(E,...p){if("string"!=typeof E){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(m,...b)}return ee.create(E,...p)}function ye(E,p,...m){if(!E)throw zt(p,...m)}function re(E){const p="INTERNAL ASSERTION FAILED: "+E;throw xe(p),new Error(p)}function se(E,p){E||re(p)}const de=new Map;function ue(E){se(E instanceof Function,"Expected a class definition");let p=de.get(E);return p?(se(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,de.set(E,p),p)}function Ne(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function We(){return"http:"===It()||"https:"===It()}function It(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Vt{constructor(p,m){this.shortDelay=p,this.longDelay=m,se(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(We()||(0,B.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function dn(E,p){se(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Qr{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},hn=new Vt(3e4,6e4);function at(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function Rt(E,p,m,b){return vs.apply(this,arguments)}function vs(){return(vs=(0,I.Z)(function*(E,p,m,b,A={}){return no(E,A,()=>{let O={},z={};b&&("GET"===p?z=b:O={body:JSON.stringify(b)});const ge=(0,B.xO)(Object.assign({key:E.config.apiKey},z)).slice(1),Le=new(Qr.headers());return Le.set("Content-Type","application/json"),Le.set("X-Client-Version",E._getSdkClientVersion()),E.languageCode&&Le.set("X-Firebase-Locale",E.languageCode),Qr.fetch()(Er(E,E.config.apiHost,m,ge),Object.assign({method:p,headers:Le,referrerPolicy:"no-referrer"},O))})})).apply(this,arguments)}function no(E,p,m){return rn.apply(this,arguments)}function rn(){return(rn=(0,I.Z)(function*(E,p,m){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},Jr),p);try{const A=new ro(E),O=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const z=yield O.json();if("needConfirmation"in z)throw io(E,"account-exists-with-different-credential",z);if(O.ok&&!("errorMessage"in z))return z;{const ge=O.ok?z.errorMessage:z.error.message,[Le,$e]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw io(E,"credential-already-in-use",z);if("EMAIL_EXISTS"===Le)throw io(E,"email-already-in-use",z);const rt=b[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw ke(E,rt,$e);Pe(E,rt)}}catch(A){if(A instanceof B.ZR)throw A;Pe(E,"network-request-failed")}})).apply(this,arguments)}function Xr(E,p,m,b){return hi.apply(this,arguments)}function hi(){return(hi=(0,I.Z)(function*(E,p,m,b,A={}){const O=yield Rt(E,p,m,b,A);return"mfaPendingCredential"in O&&Pe(E,"multi-factor-auth-required",{serverResponse:O}),O})).apply(this,arguments)}function Er(E,p,m,b){const A=`${p}${m}?${b}`;return E.config.emulator?dn(E.config,A):`${E.config.apiScheme}://${A}`}class ro{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Fe(this.auth,"timeout")),hn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function io(E,p,m){const b={appName:E.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const A=Fe(E,p,b);return A.customData._tokenResponse=m,A}function Wi(){return(Wi=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Vn(E,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Es(E,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function De(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function on(){return(on=(0,I.Z)(function*(E,p=!1){const m=(0,B.m9)(E),b=yield m.getIdToken(p),A=ze(b);ye(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,z=null==O?void 0:O.sign_in_provider;return{claims:A,token:b,authTime:De(Pt(A.auth_time)),issuedAtTime:De(Pt(A.iat)),expirationTime:De(Pt(A.exp)),signInProvider:z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(E){return 1e3*Number(E)}function ze(E){const[p,m,b]=E.split(".");if(void 0===p||void 0===m||void 0===b)return xe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,B.tV)(m);return A?JSON.parse(A):(xe("Failed to decode base64 JWT payload"),null)}catch(A){return xe("Caught error parsing JWT payload as JSON",A),null}}function fn(E,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,I.Z)(function*(E,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof B.ZR&&Ri(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function Ri({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class pn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,I.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,I.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class kr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=De(this.lastLoginAt),this.creationTime=De(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ao(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(E){var p;const m=E.auth,b=yield E.getIdToken(),A=yield fn(E,Es(m,{idToken:b}));ye(null==A?void 0:A.users.length,m,"internal-error");const O=A.users[0];E._notifyReloadListener(O);const z=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?le(O.providerUserInfo):[],ge=X(E.providerData,z),rt=!!E.isAnonymous&&!(E.email&&O.passwordHash||(null==ge?void 0:ge.length)),Xe={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new kr(O.createdAt,O.lastLoginAt),isAnonymous:rt};Object.assign(E,Xe)})).apply(this,arguments)}function F(){return(F=(0,I.Z)(function*(E){const p=(0,B.m9)(E);yield ao(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function X(E,p){return[...E.filter(b=>!p.some(A=>A.providerId===b.providerId)),...p]}function le(E){return E.map(p=>{var{providerId:m}=p,b=(0,me._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ce(){return(Ce=(0,I.Z)(function*(E,p){const m=yield no(E,{},()=>{const b=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:O}=E.config,z=Er(E,A,"/v1/token",`key=${O}`);return Qr.fetch()(z,{method:"POST",headers:{"X-Client-Version":E._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ye(p.idToken,"internal-error"),ye(void 0!==p.idToken,"internal-error"),ye(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(E){const p=ze(E);return ye(p,"internal-error"),ye(void 0!==p.exp,"internal-error"),ye(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,I.Z)(function*(){return ye(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,I.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:z}=yield function(E,p){return Ce.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(A,O,Number(z))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:A,expirationTime:O}=m,z=new Qe;return b&&(ye("string"==typeof b,"internal-error",{appName:p}),z.refreshToken=b),A&&(ye("string"==typeof A,"internal-error",{appName:p}),z.accessToken=A),O&&(ye("number"==typeof O,"internal-error",{appName:p}),z.expirationTime=O),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return re("not implemented")}}function gt(E,p){ye("string"==typeof E||void 0===E,"internal-error",{appName:p})}class Ct{constructor(p){var{uid:m,auth:b,stsTokenManager:A}=p,O=(0,me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.metadata=new kr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,I.Z)(function*(){const b=yield fn(m,m.stsTokenManager.getToken(m.auth,p));return ye(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function(E){return on.apply(this,arguments)}(this,p)}reload(){return function(E){return F.apply(this,arguments)}(this)}_assign(p){this!==p&&(ye(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Ct(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,I.Z)(function*(){let A=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield ao(b)),yield b.auth._persistUserIfCurrent(b),A&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,I.Z)(function*(){const m=yield p.getIdToken();return yield fn(p,function(E,p){return Wi.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,A,O,z,ge,Le,$e,rt;const Xe=null!==(b=m.displayName)&&void 0!==b?b:void 0,Kt=null!==(A=m.email)&&void 0!==A?A:void 0,En=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,os=null!==(z=m.photoURL)&&void 0!==z?z:void 0,eg=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,Fh=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,xo=null!==($e=m.createdAt)&&void 0!==$e?$e:void 0,e_=null!==(rt=m.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:Nl,emailVerified:tg,isAnonymous:ng,providerData:Vh,stsTokenManager:Ro}=m;ye(Nl&&Ro,p,"internal-error");const Pi=Qe.fromJSON(this.name,Ro);ye("string"==typeof Nl,p,"internal-error"),gt(Xe,p.name),gt(Kt,p.name),ye("boolean"==typeof tg,p,"internal-error"),ye("boolean"==typeof ng,p,"internal-error"),gt(En,p.name),gt(os,p.name),gt(eg,p.name),gt(Fh,p.name),gt(xo,p.name),gt(e_,p.name);const rg=new Ct({uid:Nl,auth:p,email:Kt,emailVerified:tg,displayName:Xe,isAnonymous:ng,photoURL:os,phoneNumber:En,tenantId:eg,stsTokenManager:Pi,createdAt:xo,lastLoginAt:e_});return Vh&&Array.isArray(Vh)&&(rg.providerData=Vh.map(z0=>Object.assign({},z0))),Fh&&(rg._redirectEventId=Fh),rg}static _fromIdTokenResponse(p,m,b=!1){return(0,I.Z)(function*(){const A=new Qe;A.updateFromServerResponse(m);const O=new Ct({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:b});return yield ao(O),O})()}}const Rn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(m,b){var A=this;return(0,I.Z)(function*(){A.storage[m]=b})()}_get(m){var b=this;return(0,I.Z)(function*(){const A=b.storage[m];return void 0===A?null:A})()}_remove(m){var b=this;return(0,I.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return E.type="NONE",E})();function Ht(E,p,m){return`firebase:${E}:${p}:${m}`}class gn{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:A,name:O}=this.auth;this.fullUserKey=Ht(this.userKey,A.apiKey,O),this.fullPersistenceKey=Ht("persistence",A.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,I.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Ct._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,I.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,I.Z)(function*(){if(!m.length)return new gn(ue(Rn),p,b);const A=(yield Promise.all(m.map(function(){var $e=(0,I.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let O=A[0]||ue(Rn);const z=Ht(b,p.config.apiKey,p.name);let ge=null;for(const $e of m)try{const rt=yield $e._get(z);if(rt){const Xe=Ct._fromJSON(p,rt);$e!==O&&(ge=Xe),O=$e;break}}catch(rt){}const Le=A.filter($e=>$e._shouldAllowMigration);return O._shouldAllowMigration&&Le.length?(O=Le[0],ge&&(yield O._set(z,ge.toJSON())),yield Promise.all(m.map(function(){var $e=(0,I.Z)(function*(rt){if(rt!==O)try{yield rt._remove(z)}catch(Xe){}});return function(rt){return $e.apply(this,arguments)}}())),new gn(O,p,b)):new gn(O,p,b)})()}}function uo(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Hc(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Zo(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(su(p))return"Blackberry";if(Qo(p))return"Webos";if(Vd(p))return"Safari";if((p.includes("chrome/")||Ud(p))&&!p.includes("edge/"))return"Chrome";if(Yo(p))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Zo(E=(0,B.z$)()){return/firefox\//i.test(E)}function Vd(E=(0,B.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ud(E=(0,B.z$)()){return/crios\//i.test(E)}function Hc(E=(0,B.z$)()){return/iemobile/i.test(E)}function Yo(E=(0,B.z$)()){return/android/i.test(E)}function su(E=(0,B.z$)()){return/blackberry/i.test(E)}function Qo(E=(0,B.z$)()){return/webos/i.test(E)}function pi(E=(0,B.z$)()){return/iphone|ipad|ipod/i.test(E)}function Ni(E=(0,B.z$)()){return pi(E)||Yo(E)||Qo(E)||su(E)||/windows phone/i.test(E)||Hc(E)}function ur(E,p=[]){let m;switch(E){case"Browser":m=uo((0,B.z$)());break;case"Worker":m=`${uo((0,B.z$)())}-${E}`;break;default:m=E}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ne.SDK_VERSION}/${b}`}class yy{constructor(p,m){this.app=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=ue(m)),this._initializationPromise=this.queue((0,I.Z)(function*(){var A;b._deleted||(b.persistenceManager=yield gn.create(b,p),!b._deleted&&((null===(A=b._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(m),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,I.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,I.Z)(function*(){var b;let A=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const O=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,z=null==A?void 0:A._redirectEventId,ge=yield m.tryRedirectSignIn(p);(!O||O===z)&&(null==ge?void 0:ge.user)&&(A=ge.user)}return A?A._redirectEventId?(ye(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===A._redirectEventId?m.directlySetCurrentUser(A):m.reloadAndSetCurrentUserOrClear(A)):m.reloadAndSetCurrentUserOrClear(A):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,I.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(A){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,I.Z)(function*(){try{yield ao(p)}catch(b){if("auth/network-request-failed"!==b.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,I.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,I.Z)(function*(){const b=p?(0,B.m9)(p):null;return b&&ye(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,I.Z)(function*(){if(!m._deleted)return p&&ye(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,I.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,I.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,I.Z)(function*(){yield m.assertedPersistence.setPersistence(ue(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,I.Z)(function*(){const A=yield b.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,I.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&ue(p)||m._popupRedirectResolver;ye(b,m,"argument-error"),m.redirectPersistenceManager=yield gn.create(m,[ue(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,I.Z)(function*(){var b,A;return m._isInitialized&&(yield m.queue((0,I.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,I.Z)(function*(){if(p===m.currentUser)return m.queue((0,I.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,A){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(z,this,"internal-error"),z.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,b,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,I.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function kt(E){return(0,B.m9)(E)}class je{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qt(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function ws(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class cr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return re("not implemented")}_getIdTokenResponse(p){return re("not implemented")}_linkToIdToken(p,m){return re("not implemented")}_getReauthenticationResolver(p){return re("not implemented")}}function an(E,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:resetPassword",at(E,p))})).apply(this,arguments)}function Jo(E,p){return ht.apply(this,arguments)}function ht(){return(ht=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gc(E,p){return Is.apply(this,arguments)}function Is(){return(Is=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:update",at(E,p))})).apply(this,arguments)}function bs(){return(bs=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithPassword",at(E,p))})).apply(this,arguments)}function Un(E,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:sendOobCode",at(E,p))})).apply(this,arguments)}function Xo(E,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,I.Z)(function*(E,p){return Un(E,p)})).apply(this,arguments)}function Gt(E,p){return ou.apply(this,arguments)}function ou(){return(ou=(0,I.Z)(function*(E,p){return Un(E,p)})).apply(this,arguments)}function Bd(E,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,I.Z)(function*(E,p){return Un(E,p)})).apply(this,arguments)}function $d(E,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,I.Z)(function*(E,p){return Un(E,p)})).apply(this,arguments)}function zi(){return(zi=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithEmailLink",at(E,p))})).apply(this,arguments)}function Hd(){return(Hd=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithEmailLink",at(E,p))})).apply(this,arguments)}class Vr extends cr{constructor(p,m,b,A=null){super("password",b),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new Vr(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new Vr(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,I.Z)(function*(){switch(m.signInMethod){case"password":return function(E,p){return bs.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(E,p){return zi.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Pe(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,I.Z)(function*(){switch(b.signInMethod){case"password":return Jo(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,p){return Hd.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Pe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Lt(E,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithIdp",at(E,p))})).apply(this,arguments)}class Ur extends cr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Ur(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Pe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A}=m,O=(0,me._T)(m,["providerId","signInMethod"]);if(!b||!A)return null;const z=new Ur(b,A);return Object.assign(z,O),z}_getIdTokenResponse(p){return Lt(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,Lt(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Lt(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function gi(E,p){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:sendVerificationCode",at(E,p))})).apply(this,arguments)}function Wd(){return(Wd=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithPhoneNumber",at(E,p))})).apply(this,arguments)}function fp(){return(fp=(0,I.Z)(function*(E,p){const m=yield Xr(E,"POST","/v1/accounts:signInWithPhoneNumber",at(E,p));if(m.temporaryProof)throw io(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const T0={USER_NOT_FOUND:"user-not-found"};function pp(){return(pp=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithPhoneNumber",at(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),T0)})).apply(this,arguments)}class na extends cr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new na({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new na({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(E,p){return Wd.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(E,p){return fp.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(E,p){return pp.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:A,temporaryProof:O}=p;return b||m||A||O?new na({verificationId:m,verificationCode:b,phoneNumber:A,temporaryProof:O}):null}}class zc{constructor(p){var m,b,A,O,z,ge;const Le=(0,B.zd)((0,B.pd)(p)),$e=null!==(m=Le.apiKey)&&void 0!==m?m:null,rt=null!==(b=Le.oobCode)&&void 0!==b?b:null,Xe=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);ye($e&&rt&&Xe,"argument-error"),this.apiKey=$e,this.operation=Xe,this.code=rt,this.continueUrl=null!==(O=Le.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(z=Le.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ge=Le.tenantId)&&void 0!==ge?ge:null}static parseLink(p){const m=function(E){const p=(0,B.zd)((0,B.pd)(E)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,b=(0,B.zd)((0,B.pd)(E)).deep_link_id;return(b?(0,B.zd)((0,B.pd)(b)).link:null)||b||m||p||E}(p);try{return new zc(m)}catch(b){return null}}}let gp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,b){return Vr._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const A=zc.parseLink(b);return ye(A,"argument-error"),Vr._fromEmailAndCode(m,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class fo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class cu extends fo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class po extends cu{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ye("providerId"in m&&"signInMethod"in m,"argument-error"),Ur._fromParams(m)}credential(p){return this._credential(p)}_credential(p){return ye(p.idToken||p.accessToken,"argument-error"),Ur._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return po.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return po.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:O,nonce:z,providerId:ge}=p;if(!b&&!A&&!m&&!O||!ge)return null;try{return new po(ge)._credential({idToken:m,accessToken:b,rawNonce:z,pendingToken:O})}catch(Le){return null}}}let zd=(()=>{class E extends cu{constructor(){super("facebook.com")}static credential(m){return Ur._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),qd=(()=>{class E extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ur._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:A}=m;if(!b&&!A)return null;try{return E.credential(b,A)}catch(O){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Kd=(()=>{class E extends cu{constructor(){super("github.com")}static credential(m){return Ur._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ra extends cr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Lt(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,Lt(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Lt(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:A,pendingToken:O}=m;return b&&A&&O&&b===A?new ra(b,O):null}static _create(p,m){return new ra(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Zd=(()=>{class E extends cu{constructor(){super("twitter.com")}static credential(m,b){return Ur._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:A}=m;if(!b||!A)return null;try{return E.credential(b,A)}catch(O){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Yd(E,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signUp",at(E,p))})).apply(this,arguments)}class mi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,A=!1){return(0,I.Z)(function*(){const O=yield Ct._fromIdTokenResponse(p,b,A),z=vy(b);return new mi({user:O,providerId:z,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,I.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const A=vy(b);return new mi({user:p,providerId:A,_tokenResponse:b,operationType:m})})()}}function vy(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function du(){return(du=(0,I.Z)(function*(E){var p;const m=kt(E);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new mi({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Yd(m,{returnSecureToken:!0}),A=yield mi._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class qc extends B.ZR{constructor(p,m,b,A){var O;super(m.code,m.message),this.operationType=b,this.user=A,this.name="FirebaseError",Object.setPrototypeOf(this,qc.prototype),this.appName=p.name,this.code=m.code,this.tenantId=null!==(O=p.tenantId)&&void 0!==O?O:void 0,this.serverResponse=m.customData.serverResponse}static _fromErrorAndOperation(p,m,b,A){return new qc(p,m,b,A)}}function hu(E,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?qc._fromErrorAndOperation(E,O,p,b):O})}function mp(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function Kc(){return(Kc=(0,I.Z)(function*(E,p){const m=(0,B.m9)(E);yield Cs(!0,m,p);const{providerUserInfo:b}=yield Vn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=mp(b||[]);return m.providerData=m.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Zc(E,p){return go.apply(this,arguments)}function go(){return(go=(0,I.Z)(function*(E,p,m=!1){const b=yield fn(E,p._linkToIdToken(E.auth,yield E.getIdToken()),m);return mi._forOperation(E,"link",b)})).apply(this,arguments)}function Cs(E,p,m){return fu.apply(this,arguments)}function fu(){return(fu=(0,I.Z)(function*(E,p,m){yield ao(p);const A=!1===E?"provider-already-linked":"no-such-provider";ye(mp(p.providerData).has(m)===E,p.auth,A)})).apply(this,arguments)}function Yc(E,p){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,I.Z)(function*(E,p,m=!1){const{auth:b}=E,A="reauthenticate";try{const O=yield fn(E,hu(b,A,p,E),m);ye(O.idToken,b,"internal-error");const z=ze(O.idToken);ye(z,b,"internal-error");const{sub:ge}=z;return ye(E.uid===ge,b,"user-mismatch"),mi._forOperation(E,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Pe(b,"user-mismatch"),O}})).apply(this,arguments)}function yp(E,p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,I.Z)(function*(E,p,m=!1){const b="signIn",A=yield hu(E,b,p),O=yield mi._fromIdTokenResponse(E,b,A);return m||(yield E._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Jc(E,p){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,I.Z)(function*(E,p){return yp(kt(E),p)})).apply(this,arguments)}function _p(E,p){return vp.apply(this,arguments)}function vp(){return(vp=(0,I.Z)(function*(E,p){const m=(0,B.m9)(E);return yield Cs(!1,m,p.providerId),Zc(m,p)})).apply(this,arguments)}function pu(E,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,I.Z)(function*(E,p){return Yc((0,B.m9)(E),p)})).apply(this,arguments)}function M0(E,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,I.Z)(function*(E,p){return Xr(E,"POST","/v1/accounts:signInWithCustomToken",at(E,p))})).apply(this,arguments)}function lr(){return(lr=(0,I.Z)(function*(E,p){const m=kt(E),b=yield M0(m,{token:p,returnSecureToken:!0}),A=yield mi._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class mu{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?yu._fromServerResponse(p,m):Pe(p,"internal-error")}}class yu extends mu{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new yu(m)}}function _u(E,p,m){var b;ye((null===(b=m.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),ye(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ye(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iosBundleId=m.iOS.bundleId),m.android&&(ye(m.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Xc(){return(Xc=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E),A={requestType:"PASSWORD_RESET",email:p};m&&_u(b,A,m),yield Gt(b,A)})).apply(this,arguments)}function it(){return(it=(0,I.Z)(function*(E,p,m){yield an((0,B.m9)(E),{oobCode:p,newPassword:m})})).apply(this,arguments)}function mo(){return(mo=(0,I.Z)(function*(E,p){yield Gc((0,B.m9)(E),{oobCode:p})})).apply(this,arguments)}function vu(E,p){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,I.Z)(function*(E,p){const m=(0,B.m9)(E),b=yield an(m,{oobCode:p}),A=b.requestType;switch(ye(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(b.mfaInfo,m,"internal-error");default:ye(b.email,m,"internal-error")}let O=null;return b.mfaInfo&&(O=mu._fromServerResponse(kt(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function yo(){return(yo=(0,I.Z)(function*(E,p){const{data:m}=yield vu((0,B.m9)(E),p);return m.email})).apply(this,arguments)}function be(){return(be=(0,I.Z)(function*(E,p,m){const b=kt(E),A=yield Yd(b,{returnSecureToken:!0,email:p,password:m}),O=yield mi._fromIdTokenResponse(b,"signIn",A);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function mn(){return(mn=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E),A={requestType:"EMAIL_SIGNIN",email:p};ye(m.handleCodeInApp,b,"argument-error"),m&&_u(b,A,m),yield Bd(b,A)})).apply(this,arguments)}function ei(){return(ei=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E),A=gp.credentialWithLink(p,m||Ne());return ye(A._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Jc(b,A)})).apply(this,arguments)}function Xd(E,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:createAuthUri",at(E,p))})).apply(this,arguments)}function bp(){return(bp=(0,I.Z)(function*(E,p){const b={identifier:p,continueUri:We()?Ne():"http://localhost"},{signinMethods:A}=yield Xd((0,B.m9)(E),b);return A||[]})).apply(this,arguments)}function As(){return(As=(0,I.Z)(function*(E,p){const m=(0,B.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&_u(m.auth,A,p);const{email:O}=yield Xo(m.auth,A);O!==E.email&&(yield E.reload())})).apply(this,arguments)}function ti(){return(ti=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};m&&_u(b.auth,O,m);const{email:z}=yield $d(b.auth,O);z!==E.email&&(yield E.reload())})).apply(this,arguments)}function eh(E,p){return xs.apply(this,arguments)}function xs(){return(xs=(0,I.Z)(function*(E,p){return Rt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function th(){return(th=(0,I.Z)(function*(E,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,B.m9)(E),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},z=yield fn(b,eh(b.auth,O));b.displayName=z.displayName||null,b.photoURL=z.photoUrl||null;const ge=b.providerData.find(({providerId:Le})=>"password"===Le);ge&&(ge.displayName=b.displayName,ge.photoURL=b.photoURL),yield b._updateTokensIfNecessary(z)})).apply(this,arguments)}function rh(E,p,m){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,I.Z)(function*(E,p,m){const{auth:b}=E,O={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const z=yield fn(E,Jo(b,O));yield E._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class _o{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class sh extends _o{constructor(p,m,b,A){super(p,m,b),this.username=A}}class Iy extends _o{constructor(p,m){super(p,"facebook.com",m)}}class by extends sh{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class bu extends _o{constructor(p,m){super(p,"google.com",m)}}class Dp extends sh{constructor(p,m,b){super(p,"twitter.com",m,b)}}function Tp(E){const{user:p,_tokenResponse:m}=E;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(E){var p,m;if(!E)return null;const{providerId:b}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},O=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const z=null===(m=null===(p=ze(E.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new _o(O,"anonymous"!==z&&"custom"!==z?z:null)}if(!b)return null;switch(b){case"facebook.com":return new Iy(O,A);case"github.com":return new by(O,A);case"google.com":return new bu(O,A);case"twitter.com":return new Dp(O,A,E.screenName||null);case"custom":case"anonymous":return new _o(O,null);default:return new _o(O,b,A)}}(m)}class Zi{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new Zi("enroll",p)}static _fromMfaPendingCredential(p){return new Zi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Zi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Zi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class oh{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=kt(p),A=(m.serverResponse.mfaInfo||[]).map(z=>mu._fromServerResponse(b,z));ye(m.serverResponse.mfaPendingCredential,b,"internal-error");const O=Zi._fromMfaPendingCredential(m.serverResponse.mfaPendingCredential);return new oh(O,A,function(){var z=(0,I.Z)(function*(ge){const Le=yield ge._process(b,O);delete m.serverResponse.mfaInfo,delete m.serverResponse.mfaPendingCredential;const $e=Object.assign(Object.assign({},m.serverResponse),{idToken:Le.idToken,refreshToken:Le.refreshToken});switch(m.operationType){case"signIn":const rt=yield mi._fromIdTokenResponse(b,m.operationType,$e);return yield b._updateCurrentUser(rt.user),rt;case"reauthenticate":return ye(m.user,b,"internal-error"),mi._forOperation(m.user,m.operationType,$e);default:Pe(b,"internal-error")}});return function(ge){return z.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,I.Z)(function*(){return m.signInResolver(p)})()}}function Cy(E,p){return Rt(E,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:E.tenantId},p))}class sa{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>mu._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new sa(p)}getSession(){var p=this;return(0,I.Z)(function*(){return Zi._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var b=this;return(0,I.Z)(function*(){const A=p,O=yield b.getSession(),z=yield fn(b.user,A._process(b.user.auth,O,m));return yield b.user._updateTokensIfNecessary(z),b.user.reload()})()}unenroll(p){var m=this;return(0,I.Z)(function*(){const b="string"==typeof p?p:p.uid,A=yield m.user.getIdToken(),O=yield fn(m.user,function(E,p){return Rt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:E.tenantId},p))}(m.user.auth,{idToken:A,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==b),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const oa=new WeakMap,Cu="__sak";class ch{constructor(p,m){this.storage=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}}const el=(()=>{class E extends ch{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,B.z$)();return Vd(E)||pi(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Ni(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const A=this.storage.getItem(b),O=this.localCache[b];A!==O&&m(b,O,A)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((ge,Le,$e)=>{this.notifyListeners(ge,$e)});const A=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(A);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!b)return}const O=()=>{const ge=this.storage.getItem(A);!b&&this.localCache[A]===ge||this.notifyListeners(A,ge)},z=this.storage.getItem(A);(0,B.w1)()&&10===document.documentMode&&z!==m.newValue&&m.newValue!==m.oldValue?setTimeout(O,10):O()}notifyListeners(m,b){this.localCache[m]=b;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var A=()=>super._set,O=this;return(0,I.Z)(function*(){yield A().call(O,m,b),O.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,A=this;return(0,I.Z)(function*(){const O=yield b().call(A,m);return A.localCache[m]=JSON.stringify(O),O})()}_remove(m){var b=()=>super._remove,A=this;return(0,I.Z)(function*(){yield b().call(A,m),delete A.localCache[m]})()}}return E.type="LOCAL",E})(),Yi=(()=>{class E extends ch{constructor(){super(window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return E.type="SESSION",E})();let Ns=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(O=>O.isListeningto(m));if(b)return b;const A=new E(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,I.Z)(function*(){const A=m,{eventId:O,eventType:z,data:ge}=A.data,Le=b.handlersMap[z];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:z});const $e=Array.from(Le).map(function(){var Xe=(0,I.Z)(function*(Kt){return Kt(A.origin,ge)});return function(Kt){return Xe.apply(this,arguments)}}()),rt=yield function(E){return Promise.all(E.map(function(){var p=(0,I.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}($e);A.ports[0].postMessage({status:"done",eventId:O,eventType:z,response:rt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function tl(E="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return E+m}class L0{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var A=this;return(0,I.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let z,ge;return new Promise((Le,$e)=>{const rt=tl("",20);O.port1.start();const Xe=setTimeout(()=>{$e(new Error("unsupported_event"))},b);ge={messageChannel:O,onMessage(Kt){const En=Kt;if(En.data.eventId===rt)switch(En.data.status){case"ack":clearTimeout(Xe),z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Le(En.data.response);break;default:clearTimeout(Xe),clearTimeout(z),$e(new Error("invalid_response"))}}},A.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),A.target.postMessage({eventType:p,eventId:rt,data:m},[O.port2])}).finally(()=>{ge&&A.removeMessageHandler(ge)})})()}}function en(){return window}function nl(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}function fh(){return(fh=(0,I.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Rp="firebaseLocalStorageDb",Au="firebaseLocalStorage",rl="fbase_key";class il{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function sl(E,p){return E.transaction([Au],p?"readwrite":"readonly").objectStore(Au)}function yn(){const E=indexedDB.open(Rp,1);return new Promise((p,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(Au,{keyPath:rl})}catch(A){m(A)}}),E.addEventListener("success",(0,I.Z)(function*(){const b=E.result;b.objectStoreNames.contains(Au)?p(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Rp);return new il(E).toPromise()}(),p(yield yn()))}))})}function tt(E,p,m){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(E,p,m){const b=sl(E,!0).put({[rl]:p,value:m});return new il(b).toPromise()})).apply(this,arguments)}function dr(){return(dr=(0,I.Z)(function*(E,p){const m=sl(E,!1).get(p),b=yield new il(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function aa(E,p){const m=sl(E,!0).delete(p);return new il(m).toPromise()}const ua=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,I.Z)(function*(){return m.db||(m.db=yield yn()),m.db})()}_withRetries(m){var b=this;return(0,I.Z)(function*(){let A=0;for(;;)try{const O=yield b._openDb();return yield m(O)}catch(O){if(A++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,I.Z)(function*(){return nl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,I.Z)(function*(){m.receiver=Ns._getInstance(nl()?self:null),m.receiver._subscribe("keyChanged",function(){var b=(0,I.Z)(function*(A,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(A,O){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,I.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,I.Z)(function*(){var b,A;if(m.activeServiceWorker=yield function(){return fh.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new L0(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,I.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const m=yield yn();return yield tt(m,Cu,"1"),yield aa(m,Cu),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,I.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var A=this;return(0,I.Z)(function*(){return A._withPendingWrite((0,I.Z)(function*(){return yield A._withRetries(O=>tt(O,m,b)),A.localCache[m]=b,A.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,I.Z)(function*(){const A=yield b._withRetries(O=>function(E,p){return dr.apply(this,arguments)}(O,m));return b.localCache[m]=A,A})()}_remove(m){var b=this;return(0,I.Z)(function*(){return b._withPendingWrite((0,I.Z)(function*(){return yield b._withRetries(A=>aa(A,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,I.Z)(function*(){const b=yield m._withRetries(z=>{const ge=sl(z,!1).getAll();return new il(ge).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:z,value:ge}of b)O.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(ge)&&(m.notifyListeners(z,ge),A.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!O.has(z)&&(m.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(m,b){this.localCache[m]=b;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Np(E,p){return Rt(E,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:E.tenantId},p))}function gh(){return(gh=(0,I.Z)(function*(E){return(yield Rt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ca(E){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=p,b.onerror=A=>{const O=Fe("internal-error");O.customData=A,m(O)},b.type="text/javascript",b.charset="UTF-8",function(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(b)})}function Op(E){return`__${E}${Math.floor(1e6*Math.random())}`}const ni=1e12;class ul{constructor(p){this.auth=p,this.counter=ni,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new mh(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||ni;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ni))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,I.Z)(function*(){var b;return null===(b=m._widgets.get(p||ni))||void 0===b||b.execute(),""})()}}class mh{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ye(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hr=Op("rcb"),Eo=new Vt(3e4,6e4);class mt{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!en().grecaptcha}load(p,m=""){return ye((E=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(en().grecaptcha):new Promise((b,A)=>{const O=en().setTimeout(()=>{A(Fe(p,"network-request-failed"))},Eo.get());en()[hr]=()=>{en().clearTimeout(O),delete en()[hr];const ge=en().grecaptcha;if(!ge)return void A(Fe(p,"internal-error"));const Le=ge.render;ge.render=($e,rt)=>{const Xe=Le($e,rt);return this.counter++,Xe},this.hostLanguage=m,b(ge)},ca(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:hr,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),A(Fe(p,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!en().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class _n{load(p){return(0,I.Z)(function*(){return new ul(p)})()}clearedOneInstance(){}}const Oy="recaptcha",F0={theme:"light",type:"image"};class V0{constructor(p,m=Object.assign({},F0),b){this.parameters=m,this.type=Oy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(b),this.isInvisible="invisible"===this.parameters.size,ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ye(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _n:new mt,this.validateStartingState()}verify(){var p=this;return(0,I.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(O=>{const z=ge=>{!ge||(p.tokenChangeListeners.delete(z),O(ge))};p.tokenChangeListeners.add(z),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=en()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,I.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,I.Z)(function*(){ye(We()&&!nl(),p.auth,"internal-error"),yield function(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(E){return gh.apply(this,arguments)}(p.auth);ye(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nu{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=na._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function yh(){return(yh=(0,I.Z)(function*(E,p,m){const b=kt(E),A=yield Ei(b,p,(0,B.m9)(m));return new Nu(A,O=>Jc(b,O))})).apply(this,arguments)}function da(){return(da=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E);yield Cs(!1,b,"phone");const A=yield Ei(b.auth,p,(0,B.m9)(m));return new Nu(A,O=>_p(b,O))})).apply(this,arguments)}function Pp(){return(Pp=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E),A=yield Ei(b.auth,p,(0,B.m9)(m));return new Nu(A,O=>pu(b,O))})).apply(this,arguments)}function Ei(E,p,m){return kp.apply(this,arguments)}function kp(){return(kp=(0,I.Z)(function*(E,p,m){var b;const A=yield m.verify();try{let O;if(ye("string"==typeof A,E,"argument-error"),ye(m.type===Oy,E,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const z=O.session;if("phoneNumber"in O)return ye("enroll"===z.type,E,"internal-error"),(yield Cy(E,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ye("signin"===z.type,E,"internal-error");const ge=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return ye(ge,E,"missing-multi-factor-info"),(yield Np(E,{mfaPendingCredential:z.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield gi(E,{phoneNumber:O.phoneNumber,recaptchaToken:A});return z}}finally{m._reset()}})).apply(this,arguments)}function Ms(){return(Ms=(0,I.Z)(function*(E,p){yield Zc((0,B.m9)(E),p)})).apply(this,arguments)}let cl=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=kt(m)}verifyPhoneNumber(m,b){return Ei(this.auth,m,(0,B.m9)(b))}static credential(m,b){return na._fromVerification(m,b)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:A}=m;return b&&A?na._fromTokenResponse(b,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ha(E,p){return p?ue(p):(ye(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class bn extends cr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Lt(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Lt(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Lt(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ll(E){return yp(E.auth,new bn(E),E.bypassAuthState)}function Cn(E){const{auth:p,user:m}=E;return ye(m,p,"internal-error"),Yc(m,new bn(E),E.bypassAuthState)}function dl(E){return fa.apply(this,arguments)}function fa(){return(fa=(0,I.Z)(function*(E){const{auth:p,user:m}=E;return ye(m,p,"internal-error"),Zc(m,new bn(E),E.bypassAuthState)})).apply(this,arguments)}class Lp{constructor(p,m,b,A,O=!1){this.auth=p,this.resolver=b,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,I.Z)(function*(b,A){p.pendingPromise={resolve:b,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,I.Z)(function*(){const{urlResponse:b,sessionId:A,postBody:O,tenantId:z,error:ge,type:Le}=p;if(ge)return void m.reject(ge);const $e={auth:m.auth,requestUri:b,sessionId:A,tenantId:z||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)($e))}catch(rt){m.reject(rt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ll;case"linkViaPopup":case"linkViaRedirect":return dl;case"reauthViaPopup":case"reauthViaRedirect":return Cn;default:Pe(this.auth,"internal-error")}}resolve(p){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Py=new Vt(2e3,1e4);function ii(){return(ii=(0,I.Z)(function*(E,p,m){const b=kt(E);ot(E,p,fo);const A=ha(b,m);return new _h(b,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Qi(){return(Qi=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E);ot(b.auth,p,fo);const A=ha(b.auth,m);return new _h(b.auth,"reauthViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}function Pu(){return(Pu=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E);ot(b.auth,p,fo);const A=ha(b.auth,m);return new _h(b.auth,"linkViaPopup",p,A,b).executeNotNull()})).apply(this,arguments)}let _h=(()=>{class E extends Lp{constructor(m,b,A,O,z){super(m,b,O,z),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,I.Z)(function*(){const b=yield m.execute();return ye(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,I.Z)(function*(){se(1===m.filter.length,"Popup operations only handle one event");const b=tl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Fe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,A;this.pollId=(null===(A=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Py.get())};m()}}return E.currentPopupAction=null,E})();const Cr=new Map;class B0 extends Lp{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,I.Z)(function*(){let b=Cr.get(m.auth._key());if(!b){try{const O=(yield function(E,p){return fr.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(O)}catch(A){b=()=>Promise.reject(A)}Cr.set(m.auth._key(),b)}return b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,I.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const A=yield b.auth._redirectUserForId(p.eventId);if(A)return b.user=A,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function fr(){return(fr=(0,I.Z)(function*(E,p){const m=ga(p),b="true"===(yield pa(E)._get(m));return yield pa(E)._remove(m),b})).apply(this,arguments)}function ku(E,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,I.Z)(function*(E,p){return pa(E)._set(ga(p),"true")})).apply(this,arguments)}function pa(E){return ue(E._redirectPersistence)}function ga(E){return Ht("pendingRedirect",E.config.apiKey,E.name)}function Eh(){return(Eh=(0,I.Z)(function*(E,p,m){const b=kt(E);ot(E,p,fo);const A=ha(b,m);return yield ku(A,b),A._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Fu(){return(Fu=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E);ot(b.auth,p,fo);const A=ha(b.auth,m);yield ku(A,b.auth);const O=yield bh(b);return A._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Fs(){return(Fs=(0,I.Z)(function*(E,p,m){const b=(0,B.m9)(E);ot(b.auth,p,fo);const A=ha(b.auth,m);yield Cs(!1,b,p.providerId),yield ku(A,b.auth);const O=yield bh(b);return A._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Vs(){return(Vs=(0,I.Z)(function*(E,p){return yield kt(E)._initializationPromise,fl(E,p,!1)})).apply(this,arguments)}function fl(E,p){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,I.Z)(function*(E,p,m=!1){const b=kt(E),A=ha(b,p),z=yield new B0(b,A,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield b._persistUserIfCurrent(z.user),yield b._setRedirectUser(null,p)),z})).apply(this,arguments)}function bh(E){return pt.apply(this,arguments)}function pt(){return(pt=(0,I.Z)(function*(E){const p=tl(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class Ji{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xi(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Xi(p)){const A=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Fe(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Io(p))}saveEventToCache(p){this.cachedEventUids.add(Io(p)),this.lastProcessedEventTime=Date.now()}}function Io(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Xi({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Dn(E){return pl.apply(this,arguments)}function pl(){return(pl=(0,I.Z)(function*(E,p={}){return Rt(E,"GET","/v1/projects",p)})).apply(this,arguments)}const es=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Us=/^https?/;function gl(){return(gl=(0,I.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Dn(E);for(const m of p)try{if(Uy(m))return}catch(b){}Pe(E,"unauthorized-domain")})).apply(this,arguments)}function Uy(E){const p=Ne(),{protocol:m,hostname:b}=new URL(p);if(E.startsWith("chrome-extension://")){const z=new URL(E);return""===z.hostname&&""===b?"chrome-extension:"===m&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===b}if(!Us.test(m))return!1;if(es.test(E))return b===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(b)}const jn=new Vt(3e4,6e4);function Oi(){const E=en().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let si=null;function Vu(E){return si=si||function(E){return new Promise((p,m)=>{var b,A,O;function z(){Oi(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Oi(),m(Fe(E,"network-request-failed"))},timeout:jn.get()})}if(null===(A=null===(b=en().gapi)||void 0===b?void 0:b.iframes)||void 0===A?void 0:A.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=en().gapi)||void 0===O?void 0:O.load)){const ge=Op("iframefcb");return en()[ge]=()=>{gapi.load?z():m(Fe(E,"network-request-failed"))},ca(`https://apis.google.com/js/api.js?onload=${ge}`)}z()}}).catch(p=>{throw si=null,p})}(E),si}const ts=new Vt(5e3,15e3),Dh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Uu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Th(E){const p=E.config;ye(p.authDomain,E,"auth-domain-config-required");const m=p.emulator?dn(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:E.name,v:ne.SDK_VERSION},A=Uu.get(E.config.apiHost);A&&(b.eid=A);const O=E._getFrameworks();return O.length&&(b.fw=O.join(",")),`${m}?${(0,B.xO)(b).slice(1)}`}function ns(){return(ns=(0,I.Z)(function*(E){const p=yield Vu(E),m=en().gapi;return ye(m,E,"internal-error"),p.open({where:document.body,url:Th(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dh,dontclear:!0},b=>new Promise(function(){var A=(0,I.Z)(function*(O,z){yield b.restyle({setHideOnLeave:!1});const ge=Fe(E,"network-request-failed"),Le=en().setTimeout(()=>{z(ge)},ts.get());function $e(){en().clearTimeout(Le),O(b)}b.ping($e).then($e,()=>{z(ge)})});return function(O,z){return A.apply(this,arguments)}}()))})).apply(this,arguments)}const yt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function bo(E,p,m,b,A,O){ye(E.config.authDomain,E,"auth-domain-config-required"),ye(E.config.apiKey,E,"invalid-api-key");const z={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:b,v:ne.SDK_VERSION,eventId:A};if(p instanceof fo){p.setDefaultLanguage(E.languageCode),z.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Le,$e]of Object.entries(O||{}))z[Le]=$e}if(p instanceof cu){const Le=p.getScopes().filter($e=>""!==$e);Le.length>0&&(z.scopes=Le.join(","))}E.tenantId&&(z.tid=E.tenantId);const ge=z;for(const Le of Object.keys(ge))void 0===ge[Le]&&delete ge[Le];return`${function({config:E}){return E.emulator?dn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,B.xO)(ge).slice(1)}`}const js="webStorageSupport";class Co extends class{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return re("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Co(p)}_finalizeEnroll(p,m,b){return function(E,p){return Rt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:E.tenantId},p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(E,p){return Rt(E,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:E.tenantId},p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ah{constructor(){}static assertion(p){return Co._fromCredential(p)}}var E;class $u{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,I.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{var A;p((null===(A=b)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function To(){return window}function Br(){return(Br=(0,I.Z)(function*(E,p,m){var b;const{BuildInfo:A}=To();se(p.sessionId,"AuthEvent did not contain a session ID");const O=yield Ea(p.sessionId),z={};return pi()?z.ibi=A.packageName:Yo()?z.apn=A.packageName:Pe(E,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=O,bo(E,m,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,z)})).apply(this,arguments)}function oi(){return(oi=(0,I.Z)(function*(E){const{BuildInfo:p}=To(),m={};pi()?m.iosBundleId=p.packageName:Yo()?m.androidPackageName=p.packageName:Pe(E,"operation-not-supported-in-this-environment"),yield Dn(E,m)})).apply(this,arguments)}function vl(){return(vl=(0,I.Z)(function*(E,p,m){const{cordova:b}=To();let A=()=>{};try{yield new Promise((O,z)=>{let ge=null;function Le(){var Xe;O();const Kt=null===(Xe=b.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof Kt&&Kt(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function $e(){ge||(ge=window.setTimeout(()=>{z(Fe(E,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===(null==document?void 0:document.visibilityState)&&$e()}p.addPassiveListener(Le),document.addEventListener("resume",$e,!1),Yo()&&document.addEventListener("visibilitychange",rt,!1),A=()=>{p.removePassiveListener(Le),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",rt,!1),ge&&window.clearTimeout(ge)}})}finally{A()}})).apply(this,arguments)}function Ea(E){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,I.Z)(function*(E){const p=Ky(E),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ky(E){if(se(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const p=new ArrayBuffer(E.length),m=new Uint8Array(p);for(let b=0;b<E.length;b++)m[b]=E.charCodeAt(b);return m}E="Browser",(0,ne._registerComponent)(new _e.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),{apiKey:A,authDomain:O}=b.options;return(z=>{ye(A&&!A.includes(":"),"invalid-api-key",{appName:z.name}),ye(!(null==O?void 0:O.includes(":")),"argument-error",{appName:z.name});const ge={apiKey:A,authDomain:O,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ur(E)},Le=new yy(z,ge);return function(E,p){const m=(null==p?void 0:p.persistence)||[],b=(Array.isArray(m)?m:[m]).map(ue);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(Le,m),Le})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new _e.wA("auth-internal",p=>{const m=kt(p.getProvider("auth").getImmediate());return new $u(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)("@firebase/auth","0.17.2",void 0);class Hp extends Ji{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,I.Z)(function*(){yield p.initPromise})()}}function wl(E){return is.apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(E){const p=yield $s()._get(Il(E));return p&&(yield $s()._remove(Il(E))),p})).apply(this,arguments)}function $r(){const E=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*p.length);E.push(p.charAt(b))}return E.join("")}function $s(){return ue(el)}function Il(E){return Ht("authEvent",E.config.apiKey,E.name)}function wa(E){if(!(null==E?void 0:E.includes("?")))return{};const[p,...m]=E.split("?");return(0,B.zd)(m.join("?"))}function Wu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function Dl(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function zu(E=(0,B.z$)()){return!("file:"!==Dl()&&"ionic:"!==Dl()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function qu(){try{const E=self.localStorage,p=tl();if(E)return E.setItem(p,"1"),E.removeItem(p),!function(E=(0,B.z$)()){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)||function(E=(0,B.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,B.hl)()}catch(E){return Oh()&&(0,B.hl)()}return!1}function Oh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tn(){return("http:"===Dl()||"https:"===Dl()||(0,B.ru)()||zu())&&!((0,B.b$)()||(0,B.UG)())&&qu()&&!Oh()}function Mh(){return zu()&&"undefined"!=typeof document}function So(){return(So=(0,I.Z)(function*(){return!!Mh()&&new Promise(E=>{const p=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),E(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},Ku=ye,Hs="persistence";function Ph(E){return kh.apply(this,arguments)}function kh(){return(kh=(0,I.Z)(function*(E){yield E._initializationPromise;const p=Zu(),m=Ht(Hs,E.config.apiKey,E.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(m,E._getPersistence())})).apply(this,arguments)}function Zu(){return"undefined"!=typeof window?window:null}const ss=ye;class un{constructor(){this.browserResolver=ue(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=fl}_openPopup(p,m,b,A){var O=this;return(0,I.Z)(function*(){var z;se(null===(z=O.eventManagers[p._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ge=bo(p,m,b,Ne(),A);return function(E,p,m,b=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-b)/2,0).toString();let ge="";const Le=Object.assign(Object.assign({},yt),{width:b.toString(),height:A.toString(),top:O,left:z}),$e=(0,B.z$)().toLowerCase();m&&(ge=Ud($e)?"_blank":m),Zo($e)&&(p=p||"http://localhost",Le.scrollbars="yes");const rt=Object.entries(Le).reduce((Kt,[En,os])=>`${Kt}${En}=${os},`,"");if(function(E=(0,B.z$)()){var p;return pi(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}($e)&&"_self"!==ge)return function(E,p){const m=document.createElement("a");m.href=E,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",ge),new yl(null);const Xe=window.open(p||"",ge,rt);ye(Xe,E,"popup-blocked");try{Xe.focus()}catch(Kt){}return new yl(Xe)}(p,ge,tl())})()}_openRedirect(p,m,b,A){var O=this;return(0,I.Z)(function*(){return yield O._originValidation(p),E=bo(p,m,b,Ne(),A),en().location.href=E,new Promise(()=>{});var E})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:O}=this.eventManagers[m];return A?Promise.resolve(A):(se(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b}initAndGetManager(p){var m=this;return(0,I.Z)(function*(){const b=yield function(E){return ns.apply(this,arguments)}(p),A=new Ji(p);return b.register("authEvent",O=>(ye(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=b,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(js,{type:js},A=>{var O;const z=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[js];void 0!==z&&m(!!z),Pe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return gl.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ni()||Vd()||pi()}}),this.cordovaResolver=ue(class{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fl}_initialize(p){var m=this;return(0,I.Z)(function*(){const b=p._key();let A=m.eventManagers.get(b);return A||(A=new Hp(p),m.eventManagers.set(b,A),m.attachCallbackListeners(p,A)),A})()}_openPopup(p){Pe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,b,A){var O=this;return(0,I.Z)(function*(){!function(E){var p,m,b,A,O,z,ge,Le,$e,rt;const Xe=To();ye("function"==typeof(null===(p=null==Xe?void 0:Xe.universalLinks)||void 0===p?void 0:p.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(void 0!==(null===(m=null==Xe?void 0:Xe.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye("function"==typeof(null===(O=null===(A=null===(b=null==Xe?void 0:Xe.cordova)||void 0===b?void 0:b.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(Le=null===(ge=null===(z=null==Xe?void 0:Xe.cordova)||void 0===z?void 0:z.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Le?void 0:Le.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(rt=null===($e=null==Xe?void 0:Xe.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===rt?void 0:rt.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const z=yield O._initialize(p);yield z.initialized(),z.resetRedirect(),Cr.clear(),yield O._originValidation(p);const ge=function(E,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:$r(),postBody:null,tenantId:E.tenantId,error:Fe(E,"no-auth-event")}}(p,b,A);yield function(E,p){return $s()._set(Il(E),p)}(p,ge);const Le=yield function(E,p,m){return Br.apply(this,arguments)}(p,ge,m),$e=yield function(E){const{cordova:p}=To();return new Promise(m=>{p.plugins.browsertab.isAvailable(b=>{let A=null;b?p.plugins.browsertab.openUrl(E):A=p.InAppBrowser.open(E,function(E=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(A)})})}(Le);return function(E,p,m){return vl.apply(this,arguments)}(p,z,$e)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(E){return oi.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:b,handleOpenURL:A,BuildInfo:O}=To(),z=setTimeout((0,I.Z)(function*(){yield wl(p),m.onEvent(Wu())}),500),ge=function(){var rt=(0,I.Z)(function*(Xe){clearTimeout(z);const Kt=yield wl(p);let En=null;Kt&&(null==Xe?void 0:Xe.url)&&(En=function(E,p){var m,b;const A=function(E){const p=wa(E),m=p.link?decodeURIComponent(p.link):void 0,b=wa(m).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return wa(A).link||A||b||m||E}(p);if(A.includes("/__/auth/callback")){const O=wa(A),z=O.firebaseError?function(E){try{return JSON.parse(E)}catch(p){return null}}(decodeURIComponent(O.firebaseError)):null,ge=null===(b=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Le=ge?Fe(ge):null;return Le?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:A,postBody:null}}return null}(Kt,Xe.url)),m.onEvent(En||Wu())});return function(Kt){return rt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ge);const Le=A,$e=`${O.packageName.toLowerCase()}://`;To().handleOpenURL=function(){var rt=(0,I.Z)(function*(Xe){if(Xe.toLowerCase().startsWith($e)&&ge({url:Xe}),"function"==typeof Le)try{Le(Xe)}catch(Kt){console.error(Kt)}});return function(Xe){return rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=fl}_initialize(p){var m=this;return(0,I.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,b,A){var O=this;return(0,I.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,m,b,A)})()}_openRedirect(p,m,b,A){var O=this;return(0,I.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,m,b,A)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Mh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ss(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,I.Z)(function*(){if(p.underlyingResolver)return;const m=yield function(){return So.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Yu(E){return E.unwrap()}function Jp(E){return zn(E)}function Bn(E,p){var m;const b=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Xy(E,function(E,p){var m;const b=(0,B.m9)(E),A=p;return ye(p.operationType,b,"argument-error"),ye(null===(m=A.serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),oh._fromError(b,A)}(E,p));else if(b){const A=zn(p),O=p;A&&(O.credential=A,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}function zn(E){const{_tokenResponse:p}=E instanceof B.ZR?E.customData:E;if(!p)return null;if(!(E instanceof B.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return cl.credentialFromResult(E);const m=p.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=qd;break;case"facebook.com":b=zd;break;case"github.com":b=Kd;break;case"twitter.com":b=Zd;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:z,pendingToken:ge,nonce:Le}=p;return O||z||A||ge?ge?m.startsWith("saml.")?ra._create(m,ge):Ur._fromParams({providerId:m,signInMethod:m,pendingToken:ge,idToken:A,accessToken:O}):new po(m).credential({idToken:A,accessToken:O,rawNonce:Le}):null}return E instanceof B.ZR?b.credentialFromError(E):b.credentialFromResult(E)}function qn(E,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,I.Z)(function*(E,p){let m;try{m=yield p}catch(O){throw O instanceof B.ZR&&Bn(E,O),O}const{operationType:b,user:A}=m;return{operationType:b,credential:Jp(m),additionalUserInfo:Tp(m),user:Mi.getOrCreate(A)}})).apply(this,arguments)}function Ia(E,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,I.Z)(function*(E,p){const m=yield p;return{verificationId:m.verificationId,confirm:b=>qn(E,m.confirm(b))}})).apply(this,arguments)}class Xy{constructor(p,m){this.resolver=m,this.auth=function(E){return E.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return qn(Yu(this.auth),this.resolver.resolveSignIn(p))}}class Mi{constructor(p){this._delegate=p,this.multiFactor=function(E){const p=(0,B.m9)(E);return oa.has(p)||oa.set(p,sa._fromUser(p)),oa.get(p)}(p)}static getOrCreate(p){return Mi.USER_MAP.has(p)||Mi.USER_MAP.set(p,new Mi(p)),Mi.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,I.Z)(function*(){return qn(m.auth,_p(m._delegate,p))})()}linkWithPhoneNumber(p,m){var b=this;return(0,I.Z)(function*(){return Ia(b.auth,function(E,p,m){return da.apply(this,arguments)}(b._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,I.Z)(function*(){return qn(m.auth,function(E,p,m){return Pu.apply(this,arguments)}(m._delegate,p,un))})()}linkWithRedirect(p){var m=this;return(0,I.Z)(function*(){return yield Ph(kt(m.auth)),function(E,p,m){return function(E,p,m){return Fs.apply(this,arguments)}(E,p,m)}(m._delegate,p,un)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,I.Z)(function*(){return qn(m.auth,pu(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Ia(this.auth,function(E,p,m){return Pp.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return qn(this.auth,function(E,p,m){return Qi.apply(this,arguments)}(this._delegate,p,un))}reauthenticateWithRedirect(p){var m=this;return(0,I.Z)(function*(){return yield Ph(kt(m.auth)),function(E,p,m){return function(E,p,m){return Fu.apply(this,arguments)}(E,p,m)}(m._delegate,p,un)})()}sendEmailVerification(p){return function(E,p){return As.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,I.Z)(function*(){return yield function(E,p){return Kc.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function(E,p){return rh((0,B.m9)(E),p,null)}(this._delegate,p)}updatePassword(p){return function(E,p){return rh((0,B.m9)(E),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(E,p){return Ms.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(E,p){return th.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function(E,p,m){return ti.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mi.USER_MAP=new WeakMap;const Qu=ye;let Lh=(()=>{class E{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Qu(A,"invalid-api-key",{appName:m.name});let O=[Rn];if("undefined"!=typeof window){O=function(E,p){const m=Zu();if(!(null==m?void 0:m.sessionStorage))return[];const b=Ht(Hs,E,p);switch(m.sessionStorage.getItem(b)){case Tn.NONE:return[Rn];case Tn.LOCAL:return[ua,Yi];case Tn.SESSION:return[Yi];default:return[]}}(A,m.name);for(const ge of[ua,el,Yi])O.includes(ge)||O.push(ge)}Qu(A,"invalid-api-key",{appName:m.name});const z="undefined"!=typeof window?un:void 0;this._delegate=b.initialize({options:{persistence:O,popupRedirectResolver:z}}),this._delegate._updateErrorMap(ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function(E,p,m){const b=kt(E);ye(b._canInitEmulator,b,"emulator-config-failed"),ye(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),O=qt(p),{host:z,port:ge}=function(E){const p=qt(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(b);if(A){const O=A[1];return{host:O,port:ws(b.substr(O.length+1))}}{const[O,z]=b.split(":");return{host:O,port:ws(z)}}}(p);b.config.emulator={url:`${O}//${z}${null===ge?"":`:${ge}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:z,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),function(E){function p(){const m=document.createElement("p"),b=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!E&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}(A)}(this._delegate,m,b)}applyActionCode(m){return function(E,p){return mo.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return vu(this._delegate,m)}confirmPasswordReset(m,b){return function(E,p,m){return it.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var A=this;return(0,I.Z)(function*(){return qn(A._delegate,function(E,p,m){return be.apply(this,arguments)}(A._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(E,p){return bp.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(E,p){const m=zc.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,I.Z)(function*(){Qu(tn(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function(E,p){return Vs.apply(this,arguments)}(m._delegate,un);return b?qn(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(E,p){kt(E)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,b,A){const{next:O,error:z,complete:ge}=Ju(m,b,A);return this._delegate.onAuthStateChanged(O,z,ge)}onIdTokenChanged(m,b,A){const{next:O,error:z,complete:ge}=Ju(m,b,A);return this._delegate.onIdTokenChanged(O,z,ge)}sendSignInLinkToEmail(m,b){return function(E,p,m){return mn.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function(E,p,m){return Xc.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,I.Z)(function*(){let A;switch(function(E,p){Ku(Object.values(Tn).includes(p),E,"invalid-persistence-type"),(0,B.b$)()?Ku(p!==Tn.SESSION,E,"unsupported-persistence-type"):(0,B.UG)()?Ku(p===Tn.NONE,E,"unsupported-persistence-type"):Oh()?Ku(p===Tn.NONE||p===Tn.LOCAL&&(0,B.hl)(),E,"unsupported-persistence-type"):Ku(p===Tn.NONE||qu(),E,"unsupported-persistence-type")}(b._delegate,m),m){case Tn.SESSION:A=Yi;break;case Tn.LOCAL:A=(yield ue(ua)._isAvailable())?ua:el;break;case Tn.NONE:A=Rn;break;default:return Pe("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return qn(this._delegate,function(E){return du.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return qn(this._delegate,Jc(this._delegate,m))}signInWithCustomToken(m){return qn(this._delegate,function(E,p){return lr.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return qn(this._delegate,function(E,p,m){return Jc((0,B.m9)(E),gp.credential(p,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return qn(this._delegate,function(E,p,m){return ei.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Ia(this._delegate,function(E,p,m){return yh.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,I.Z)(function*(){return Qu(tn(),b._delegate,"operation-not-supported-in-this-environment"),qn(b._delegate,function(E,p,m){return ii.apply(this,arguments)}(b._delegate,m,un))})()}signInWithRedirect(m){var b=this;return(0,I.Z)(function*(){return Qu(tn(),b._delegate,"operation-not-supported-in-this-environment"),yield Ph(b._delegate),function(E,p,m){return function(E,p,m){return Eh.apply(this,arguments)}(E,p,m)}(b._delegate,m,un)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(E,p){return yo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=Tn,E})();function Ju(E,p,m){let b=E;"function"!=typeof E&&({next:b,error:p,complete:m}=E);const A=b;return{next:z=>A(z&&Mi.getOrCreate(z)),error:p,complete:m}}class xl{constructor(){this.providerId="phone",this._delegate=new cl(Yu(oe.Z.auth()))}static credential(p,m){return cl.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}xl.PHONE_SIGN_IN_METHOD=cl.PHONE_SIGN_IN_METHOD,xl.PROVIDER_ID=cl.PROVIDER_ID;const Xp=ye;class ba{constructor(p,m,b=oe.Z.app()){var A;Xp(null===(A=b.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new V0(p,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(E){E.INTERNAL.registerComponent(new _e.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Lh(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gp,FacebookAuthProvider:zd,GithubAuthProvider:Kd,GoogleAuthProvider:qd,OAuthProvider:po,PhoneAuthProvider:xl,PhoneMultiFactorGenerator:Ah,RecaptchaVerifier:ba,TwitterAuthProvider:Zd,Auth:Lh,AuthCredential:cr,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.1.2")}(oe.Z)},7574:(Ge,Ie,k)=>{"use strict";k.d(Ie,{y:()=>j});var I=k(7393),B=k(9181),ne=k(6490),ie=k(6554),_e=k(4487);var L=k(2494);let j=(()=>{class U{constructor(ce){this._isScalar=!1,ce&&(this._subscribe=ce)}lift(ce){const te=new U;return te.source=this,te.operator=ce,te}subscribe(ce,te,ee){const{operator:Oe}=this,Se=function(U,W,ce){if(U){if(U instanceof I.L)return U;if(U[B.b])return U[B.b]()}return U||W||ce?new I.L(U,W,ce):new I.L(ne.c)}(ce,te,ee);if(Se.add(Oe?Oe.call(Se,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!Se.syncErrorThrowable?this._subscribe(Se):this._trySubscribe(Se)),L.v.useDeprecatedSynchronousErrorHandling&&Se.syncErrorThrowable&&(Se.syncErrorThrowable=!1,Se.syncErrorThrown))throw Se.syncErrorValue;return Se}_trySubscribe(ce){try{return this._subscribe(ce)}catch(te){L.v.useDeprecatedSynchronousErrorHandling&&(ce.syncErrorThrown=!0,ce.syncErrorValue=te),function(U){for(;U;){const{closed:W,destination:ce,isStopped:te}=U;if(W||te)return!1;U=ce&&ce instanceof I.L?ce:null}return!0}(ce)?ce.error(te):console.warn(te)}}forEach(ce,te){return new(te=$(te))((ee,Oe)=>{let Se;Se=this.subscribe(xe=>{try{ce(xe)}catch(Pe){Oe(Pe),Se&&Se.unsubscribe()}},Oe,ee)})}_subscribe(ce){const{source:te}=this;return te&&te.subscribe(ce)}[ie.L](){return this}pipe(...ce){return 0===ce.length?this:function(U){return 0===U.length?_e.y:1===U.length?U[0]:function(ce){return U.reduce((te,ee)=>ee(te),ce)}}(ce)(this)}toPromise(ce){return new(ce=$(ce))((te,ee)=>{let Oe;this.subscribe(Se=>Oe=Se,Se=>ee(Se),()=>te(Oe))})}}return U.create=W=>new U(W),U})();function $(U){if(U||(U=L.v.Promise||Promise),!U)throw new Error("no Promise impl found");return U}},6490:(Ge,Ie,k)=>{"use strict";k.d(Ie,{c:()=>B});var I=k(2494),oe=k(4449);const B={closed:!0,next(ne){},error(ne){if(I.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,oe.z)(ne)},complete(){}}},9765:(Ge,Ie,k)=>{"use strict";k.d(Ie,{Yc:()=>_e,xQ:()=>pe});var I=k(7574),oe=k(7393),B=k(5319),ne=k(7971),me=k(8858),ie=k(9181);class _e extends oe.L{constructor(j){super(j),this.destination=j}}let pe=(()=>{class L extends I.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new _e(this)}lift($){const U=new q(this,this);return U.operator=$,U}next($){if(this.closed)throw new ne.N;if(!this.isStopped){const{observers:U}=this,W=U.length,ce=U.slice();for(let te=0;te<W;te++)ce[te].next($)}}error($){if(this.closed)throw new ne.N;this.hasError=!0,this.thrownError=$,this.isStopped=!0;const{observers:U}=this,W=U.length,ce=U.slice();for(let te=0;te<W;te++)ce[te].error($);this.observers.length=0}complete(){if(this.closed)throw new ne.N;this.isStopped=!0;const{observers:$}=this,U=$.length,W=$.slice();for(let ce=0;ce<U;ce++)W[ce].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe($){if(this.closed)throw new ne.N;return super._trySubscribe($)}_subscribe($){if(this.closed)throw new ne.N;return this.hasError?($.error(this.thrownError),B.w.EMPTY):this.isStopped?($.complete(),B.w.EMPTY):(this.observers.push($),new me.W(this,$))}asObservable(){const $=new I.y;return $.source=this,$}}return L.create=(j,$)=>new q(j,$),L})();class q extends pe{constructor(j,$){super(),this.destination=j,this.source=$}next(j){const{destination:$}=this;$&&$.next&&$.next(j)}error(j){const{destination:$}=this;$&&$.error&&this.destination.error(j)}complete(){const{destination:j}=this;j&&j.complete&&this.destination.complete()}_subscribe(j){const{source:$}=this;return $?this.source.subscribe(j):B.w.EMPTY}}},8858:(Ge,Ie,k)=>{"use strict";k.d(Ie,{W:()=>oe});var I=k(5319);class oe extends I.w{constructor(ne,me){super(),this.subject=ne,this.subscriber=me,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ne=this.subject,me=ne.observers;if(this.subject=null,!me||0===me.length||ne.isStopped||ne.closed)return;const ie=me.indexOf(this.subscriber);-1!==ie&&me.splice(ie,1)}}},7393:(Ge,Ie,k)=>{"use strict";k.d(Ie,{L:()=>_e});var I=k(9105),oe=k(6490),B=k(5319),ne=k(9181),me=k(2494),ie=k(4449);class _e extends B.w{constructor(L,j,$){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=oe.c;break;case 1:if(!L){this.destination=oe.c;break}if("object"==typeof L){L instanceof _e?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,L,j,$)}}[ne.b](){return this}static create(L,j,$){const U=new _e(L,j,$);return U.syncErrorThrowable=!1,U}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class pe extends _e{constructor(L,j,$,U){super(),this._parentSubscriber=L;let W,ce=this;(0,I.m)(j)?W=j:j&&(W=j.next,$=j.error,U=j.complete,j!==oe.c&&(ce=Object.create(j),(0,I.m)(ce.unsubscribe)&&this.add(ce.unsubscribe.bind(ce)),ce.unsubscribe=this.unsubscribe.bind(this))),this._context=ce,this._next=W,this._error=$,this._complete=U}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:j}=this;me.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?this.__tryOrSetError(j,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:j}=this,{useDeprecatedSynchronousErrorHandling:$}=me.v;if(this._error)$&&j.syncErrorThrowable?(this.__tryOrSetError(j,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(j.syncErrorThrowable)$?(j.syncErrorValue=L,j.syncErrorThrown=!0):(0,ie.z)(L),this.unsubscribe();else{if(this.unsubscribe(),$)throw L;(0,ie.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const j=()=>this._complete.call(this._context);me.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,j),this.unsubscribe()):(this.__tryOrUnsub(j),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,j){try{L.call(this._context,j)}catch($){if(this.unsubscribe(),me.v.useDeprecatedSynchronousErrorHandling)throw $;(0,ie.z)($)}}__tryOrSetError(L,j,$){if(!me.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{j.call(this._context,$)}catch(U){return me.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=U,L.syncErrorThrown=!0,!0):((0,ie.z)(U),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(Ge,Ie,k)=>{"use strict";k.d(Ie,{w:()=>ie});var I=k(9796),oe=k(1555),B=k(9105);const me=(()=>{function pe(q){return Error.call(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((L,j)=>`${j+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q,this}return pe.prototype=Object.create(Error.prototype),pe})();class ie{constructor(q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,q&&(this._ctorUnsubscribe=!0,this._unsubscribe=q)}unsubscribe(){let q;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:j,_unsubscribe:$,_subscriptions:U}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof ie)L.remove(this);else if(null!==L)for(let W=0;W<L.length;++W)L[W].remove(this);if((0,B.m)($)){j&&(this._unsubscribe=void 0);try{$.call(this)}catch(W){q=W instanceof me?_e(W.errors):[W]}}if((0,I.k)(U)){let W=-1,ce=U.length;for(;++W<ce;){const te=U[W];if((0,oe.K)(te))try{te.unsubscribe()}catch(ee){q=q||[],ee instanceof me?q=q.concat(_e(ee.errors)):q.push(ee)}}}if(q)throw new me(q)}add(q){let L=q;if(!q)return ie.EMPTY;switch(typeof q){case"function":L=new ie(q);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof ie)){const U=L;L=new ie,L._subscriptions=[U]}break;default:throw new Error("unrecognized teardown "+q+" added to Subscription.")}let{_parentOrParents:j}=L;if(null===j)L._parentOrParents=this;else if(j instanceof ie){if(j===this)return L;L._parentOrParents=[j,this]}else{if(-1!==j.indexOf(this))return L;j.push(this)}const $=this._subscriptions;return null===$?this._subscriptions=[L]:$.push(L),L}remove(q){const L=this._subscriptions;if(L){const j=L.indexOf(q);-1!==j&&L.splice(j,1)}}}var pe;function _e(pe){return pe.reduce((q,L)=>q.concat(L instanceof me?L.errors:L),[])}ie.EMPTY=((pe=new ie).closed=!0,pe)},2494:(Ge,Ie,k)=>{"use strict";k.d(Ie,{v:()=>oe});let I=!1;const oe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(B){if(B){const ne=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ne.stack)}else I&&console.log("RxJS: Back to a better error behavior. Thank you. <3");I=B},get useDeprecatedSynchronousErrorHandling(){return I}}},5345:(Ge,Ie,k)=>{"use strict";k.d(Ie,{IY:()=>ne,Ds:()=>ie,ft:()=>pe});var I=k(7393),oe=k(7574),B=k(7444);class ne extends I.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends I.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function pe(q,L){if(L.closed)return;if(q instanceof oe.y)return q.subscribe(L);let j;try{j=(0,B.s)(q)(L)}catch($){L.error($)}return j}},2441:(Ge,Ie,k)=>{"use strict";k.d(Ie,{c:()=>me,N:()=>ie});var I=k(9765),oe=k(7574),B=k(5319),ne=k(1307);class me extends oe.y{constructor(j,$){super(),this.source=j,this.subjectFactory=$,this._refCount=0,this._isComplete=!1}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let j=this._connection;return j||(this._isComplete=!1,j=this._connection=new B.w,j.add(this.source.subscribe(new _e(this.getSubject(),this))),j.closed&&(this._connection=null,j=B.w.EMPTY)),j}refCount(){return(0,ne.x)()(this)}}const ie=(()=>{const L=me.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class _e extends I.Yc{constructor(j,$){super(j),this.connectable=$}_error(j){this._unsubscribe(),super._error(j)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const j=this.connectable;if(j){this.connectable=null;const $=j._connection;j._refCount=0,j._subject=null,j._connection=null,$&&$.unsubscribe()}}}},9193:(Ge,Ie,k)=>{"use strict";k.d(Ie,{E:()=>oe,c:()=>B});var I=k(7574);const oe=new I.y(me=>me.complete());function B(me){return me?function(me){return new I.y(ie=>me.schedule(()=>ie.complete()))}(me):oe}},4402:(Ge,Ie,k)=>{"use strict";k.d(Ie,{D:()=>ce});var I=k(7574),oe=k(7444),B=k(5319),ne=k(6554),_e=k(4087),pe=k(377),j=k(4072),$=k(9489);function ce(te,ee){return ee?function(te,ee){if(null!=te){if(function(te){return te&&"function"==typeof te[ne.L]}(te))return function(te,ee){return new I.y(Oe=>{const Se=new B.w;return Se.add(ee.schedule(()=>{const xe=te[ne.L]();Se.add(xe.subscribe({next(Pe){Se.add(ee.schedule(()=>Oe.next(Pe)))},error(Pe){Se.add(ee.schedule(()=>Oe.error(Pe)))},complete(){Se.add(ee.schedule(()=>Oe.complete()))}}))})),Se})}(te,ee);if((0,j.t)(te))return function(te,ee){return new I.y(Oe=>{const Se=new B.w;return Se.add(ee.schedule(()=>te.then(xe=>{Se.add(ee.schedule(()=>{Oe.next(xe),Se.add(ee.schedule(()=>Oe.complete()))}))},xe=>{Se.add(ee.schedule(()=>Oe.error(xe)))}))),Se})}(te,ee);if((0,$.z)(te))return(0,_e.r)(te,ee);if(function(te){return te&&"function"==typeof te[pe.hZ]}(te)||"string"==typeof te)return function(te,ee){if(!te)throw new Error("Iterable cannot be null");return new I.y(Oe=>{const Se=new B.w;let xe;return Se.add(()=>{xe&&"function"==typeof xe.return&&xe.return()}),Se.add(ee.schedule(()=>{xe=te[pe.hZ](),Se.add(ee.schedule(function(){if(Oe.closed)return;let Pe,Fe;try{const ke=xe.next();Pe=ke.value,Fe=ke.done}catch(ke){return void Oe.error(ke)}Fe?Oe.complete():(Oe.next(Pe),this.schedule())}))})),Se})}(te,ee)}throw new TypeError((null!==te&&typeof te||te)+" is not observable")}(te,ee):te instanceof I.y?te:new I.y((0,oe.s)(te))}},6693:(Ge,Ie,k)=>{"use strict";k.d(Ie,{n:()=>ne});var I=k(7574),oe=k(5015),B=k(4087);function ne(me,ie){return ie?(0,B.r)(me,ie):new I.y((0,oe.V)(me))}},6682:(Ge,Ie,k)=>{"use strict";k.d(Ie,{T:()=>me});var I=k(7574),oe=k(4869),B=k(3282),ne=k(6693);function me(...ie){let _e=Number.POSITIVE_INFINITY,pe=null,q=ie[ie.length-1];return(0,oe.K)(q)?(pe=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(_e=ie.pop())):"number"==typeof q&&(_e=ie.pop()),null===pe&&1===ie.length&&ie[0]instanceof I.y?ie[0]:(0,B.J)(_e)((0,ne.n)(ie,pe))}},5917:(Ge,Ie,k)=>{"use strict";k.d(Ie,{of:()=>ne});var I=k(4869),oe=k(6693),B=k(4087);function ne(...me){let ie=me[me.length-1];return(0,I.K)(ie)?(me.pop(),(0,B.r)(me,ie)):(0,oe.n)(me)}},8002:(Ge,Ie,k)=>{"use strict";k.d(Ie,{U:()=>oe});var I=k(7393);function oe(me,ie){return function(pe){if("function"!=typeof me)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new B(me,ie))}}class B{constructor(ie,_e){this.project=ie,this.thisArg=_e}call(ie,_e){return _e.subscribe(new ne(ie,this.project,this.thisArg))}}class ne extends I.L{constructor(ie,_e,pe){super(ie),this.project=_e,this.count=0,this.thisArg=pe||this}_next(ie){let _e;try{_e=this.project.call(this.thisArg,ie,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(_e)}}},3282:(Ge,Ie,k)=>{"use strict";k.d(Ie,{J:()=>B});var I=k(9773),oe=k(4487);function B(ne=Number.POSITIVE_INFINITY){return(0,I.zg)(oe.y,ne)}},9773:(Ge,Ie,k)=>{"use strict";k.d(Ie,{zg:()=>ne});var I=k(8002),oe=k(4402),B=k(5345);function ne(pe,q,L=Number.POSITIVE_INFINITY){return"function"==typeof q?j=>j.pipe(ne(($,U)=>(0,oe.D)(pe($,U)).pipe((0,I.U)((W,ce)=>q($,W,U,ce))),L)):("number"==typeof q&&(L=q),j=>j.lift(new me(pe,L)))}class me{constructor(q,L=Number.POSITIVE_INFINITY){this.project=q,this.concurrent=L}call(q,L){return L.subscribe(new ie(q,this.project,this.concurrent))}}class ie extends B.Ds{constructor(q,L,j=Number.POSITIVE_INFINITY){super(q),this.project=L,this.concurrent=j,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(q){this.active<this.concurrent?this._tryNext(q):this.buffer.push(q)}_tryNext(q){let L;const j=this.index++;try{L=this.project(q,j)}catch($){return void this.destination.error($)}this.active++,this._innerSub(L)}_innerSub(q){const L=new B.IY(this),j=this.destination;j.add(L);const $=(0,B.ft)(q,L);$!==L&&j.add($)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(q){this.destination.next(q)}notifyComplete(){const q=this.buffer;this.active--,q.length>0?this._next(q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ge,Ie,k)=>{"use strict";k.d(Ie,{ht:()=>j,QV:()=>q});var I=k(7393),oe=k(9193),B=k(5917),ne=k(7574);class pe{constructor(W,ce,te){this.kind=W,this.value=ce,this.error=te,this.hasValue="N"===W}observe(W){switch(this.kind){case"N":return W.next&&W.next(this.value);case"E":return W.error&&W.error(this.error);case"C":return W.complete&&W.complete()}}do(W,ce,te){switch(this.kind){case"N":return W&&W(this.value);case"E":return ce&&ce(this.error);case"C":return te&&te()}}accept(W,ce,te){return W&&"function"==typeof W.next?this.observe(W):this.do(W,ce,te)}toObservable(){switch(this.kind){case"N":return(0,B.of)(this.value);case"E":return U=this.error,new ne.y(ce=>ce.error(U));case"C":return(0,oe.c)()}var U;throw new Error("unexpected notification kind value")}static createNext(W){return void 0!==W?new pe("N",W):pe.undefinedValueNotification}static createError(W){return new pe("E",void 0,W)}static createComplete(){return pe.completeNotification}}function q(U,W=0){return function(te){return te.lift(new L(U,W))}}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class L{constructor(W,ce=0){this.scheduler=W,this.delay=ce}call(W,ce){return ce.subscribe(new j(W,this.scheduler,this.delay))}}class j extends I.L{constructor(W,ce,te=0){super(W),this.scheduler=ce,this.delay=te}static dispatch(W){const{notification:ce,destination:te}=W;ce.observe(te),this.unsubscribe()}scheduleMessage(W){this.destination.add(this.scheduler.schedule(j.dispatch,this.delay,new $(W,this.destination)))}_next(W){this.scheduleMessage(pe.createNext(W))}_error(W){this.scheduleMessage(pe.createError(W)),this.unsubscribe()}_complete(){this.scheduleMessage(pe.createComplete()),this.unsubscribe()}}class ${constructor(W,ce){this.notification=W,this.destination=ce}}},1307:(Ge,Ie,k)=>{"use strict";k.d(Ie,{x:()=>oe});var I=k(7393);function oe(){return function(ie){return ie.lift(new B(ie))}}class B{constructor(ie){this.connectable=ie}call(ie,_e){const{connectable:pe}=this;pe._refCount++;const q=new ne(ie,pe),L=_e.subscribe(q);return q.closed||(q.connection=pe.connect()),L}}class ne extends I.L{constructor(ie,_e){super(ie),this.connectable=_e}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const _e=ie._refCount;if(_e<=0)return void(this.connection=null);if(ie._refCount=_e-1,_e>1)return void(this.connection=null);const{connection:pe}=this,q=ie._connection;this.connection=null,q&&(!pe||q===pe)&&q.unsubscribe()}}},3101:(Ge,Ie,k)=>{"use strict";k.d(Ie,{R:()=>ee});var I=k(7574);let oe=1;const B=Promise.resolve(),ne={};function me(Se){return Se in ne&&(delete ne[Se],!0)}const ie={setImmediate(Se){const xe=oe++;return ne[xe]=!0,B.then(()=>me(xe)&&Se()),xe},clearImmediate(Se){me(Se)}};var pe=k(6465),L=k(6102);const U=new class extends L.v{flush(xe){this.active=!0,this.scheduled=void 0;const{actions:Pe}=this;let Fe,ke=-1,ot=Pe.length;xe=xe||Pe.shift();do{if(Fe=xe.execute(xe.state,xe.delay))break}while(++ke<ot&&(xe=Pe.shift()));if(this.active=!1,Fe){for(;++ke<ot&&(xe=Pe.shift());)xe.unsubscribe();throw Fe}}}(class extends pe.o{constructor(xe,Pe){super(xe,Pe),this.scheduler=xe,this.work=Pe}requestAsyncId(xe,Pe,Fe=0){return null!==Fe&&Fe>0?super.requestAsyncId(xe,Pe,Fe):(xe.actions.push(this),xe.scheduled||(xe.scheduled=ie.setImmediate(xe.flush.bind(xe,null))))}recycleAsyncId(xe,Pe,Fe=0){if(null!==Fe&&Fe>0||null===Fe&&this.delay>0)return super.recycleAsyncId(xe,Pe,Fe);0===xe.actions.length&&(ie.clearImmediate(Pe),xe.scheduled=void 0)}});var W=k(9796);class te extends I.y{constructor(xe,Pe=0,Fe=U){var Se;super(),this.source=xe,this.delayTime=Pe,this.scheduler=Fe,(!(!(0,W.k)(Se=Pe)&&Se-parseFloat(Se)+1>=0)||Pe<0)&&(this.delayTime=0),(!Fe||"function"!=typeof Fe.schedule)&&(this.scheduler=U)}static create(xe,Pe=0,Fe=U){return new te(xe,Pe,Fe)}static dispatch(xe){const{source:Pe,subscriber:Fe}=xe;return this.add(Pe.subscribe(Fe))}_subscribe(xe){return this.scheduler.schedule(te.dispatch,this.delayTime,{source:this.source,subscriber:xe})}}function ee(Se,xe=0){return function(Fe){return Fe.lift(new Oe(Se,xe))}}class Oe{constructor(xe,Pe){this.scheduler=xe,this.delay=Pe}call(xe,Pe){return new te(Pe,this.delay,this.scheduler).subscribe(xe)}}},3342:(Ge,Ie,k)=>{"use strict";k.d(Ie,{b:()=>ne});var I=k(7393);function oe(){}var B=k(9105);function ne(_e,pe,q){return function(j){return j.lift(new me(_e,pe,q))}}class me{constructor(pe,q,L){this.nextOrObserver=pe,this.error=q,this.complete=L}call(pe,q){return q.subscribe(new ie(pe,this.nextOrObserver,this.error,this.complete))}}class ie extends I.L{constructor(pe,q,L,j){super(pe),this._tapNext=oe,this._tapError=oe,this._tapComplete=oe,this._tapError=L||oe,this._tapComplete=j||oe,(0,B.m)(q)?(this._context=this,this._tapNext=q):q&&(this._context=q,this._tapNext=q.next||oe,this._tapError=q.error||oe,this._tapComplete=q.complete||oe)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(q){return void this.destination.error(q)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(q){return void this.destination.error(q)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},4087:(Ge,Ie,k)=>{"use strict";k.d(Ie,{r:()=>B});var I=k(7574),oe=k(5319);function B(ne,me){return new I.y(ie=>{const _e=new oe.w;let pe=0;return _e.add(me.schedule(function(){pe!==ne.length?(ie.next(ne[pe++]),ie.closed||_e.add(this.schedule())):ie.complete()})),_e})}},6465:(Ge,Ie,k)=>{"use strict";k.d(Ie,{o:()=>B});var I=k(5319);class oe extends I.w{constructor(me,ie){super()}schedule(me,ie=0){return this}}class B extends oe{constructor(me,ie){super(me,ie),this.scheduler=me,this.work=ie,this.pending=!1}schedule(me,ie=0){if(this.closed)return this;this.state=me;const _e=this.id,pe=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(pe,_e,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(pe,this.id,ie),this}requestAsyncId(me,ie,_e=0){return setInterval(me.flush.bind(me,this),_e)}recycleAsyncId(me,ie,_e=0){if(null!==_e&&this.delay===_e&&!1===this.pending)return ie;clearInterval(ie)}execute(me,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(me,ie);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ie){let pe,_e=!1;try{this.work(me)}catch(q){_e=!0,pe=!!q&&q||new Error(q)}if(_e)return this.unsubscribe(),pe}_unsubscribe(){const me=this.id,ie=this.scheduler,_e=ie.actions,pe=_e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&_e.splice(pe,1),null!=me&&(this.id=this.recycleAsyncId(ie,me,null)),this.delay=null}}},6102:(Ge,Ie,k)=>{"use strict";k.d(Ie,{v:()=>oe});let I=(()=>{class B{constructor(me,ie=B.now){this.SchedulerAction=me,this.now=ie}schedule(me,ie=0,_e){return new this.SchedulerAction(this,me).schedule(_e,ie)}}return B.now=()=>Date.now(),B})();class oe extends I{constructor(ne,me=I.now){super(ne,()=>oe.delegate&&oe.delegate!==this?oe.delegate.now():me()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ne,me=0,ie){return oe.delegate&&oe.delegate!==this?oe.delegate.schedule(ne,me,ie):super.schedule(ne,me,ie)}flush(ne){const{actions:me}=this;if(this.active)return void me.push(ne);let ie;this.active=!0;do{if(ie=ne.execute(ne.state,ne.delay))break}while(ne=me.shift());if(this.active=!1,ie){for(;ne=me.shift();)ne.unsubscribe();throw ie}}}},3637:(Ge,Ie,k)=>{"use strict";k.d(Ie,{z:()=>B});var I=k(6465);const B=new(k(6102).v)(I.o)},7771:(Ge,Ie,k)=>{"use strict";k.d(Ie,{c:()=>ie,N:()=>me});var I=k(6465),B=k(6102);const me=new class extends B.v{}(class extends I.o{constructor(pe,q){super(pe,q),this.scheduler=pe,this.work=q}schedule(pe,q=0){return q>0?super.schedule(pe,q):(this.delay=q,this.state=pe,this.scheduler.flush(this),this)}execute(pe,q){return q>0||this.closed?super.execute(pe,q):this._execute(pe,q)}requestAsyncId(pe,q,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(pe,q,L):pe.flush(this)}}),ie=me},377:(Ge,Ie,k)=>{"use strict";k.d(Ie,{hZ:()=>oe});const oe="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ge,Ie,k)=>{"use strict";k.d(Ie,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ge,Ie,k)=>{"use strict";k.d(Ie,{b:()=>I});const I="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ge,Ie,k)=>{"use strict";k.d(Ie,{N:()=>oe});const oe=(()=>{function B(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return B.prototype=Object.create(Error.prototype),B})()},4449:(Ge,Ie,k)=>{"use strict";function I(oe){setTimeout(()=>{throw oe},0)}k.d(Ie,{z:()=>I})},4487:(Ge,Ie,k)=>{"use strict";function I(oe){return oe}k.d(Ie,{y:()=>I})},9796:(Ge,Ie,k)=>{"use strict";k.d(Ie,{k:()=>I});const I=Array.isArray||(oe=>oe&&"number"==typeof oe.length)},9489:(Ge,Ie,k)=>{"use strict";k.d(Ie,{z:()=>I});const I=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},9105:(Ge,Ie,k)=>{"use strict";function I(oe){return"function"==typeof oe}k.d(Ie,{m:()=>I})},1555:(Ge,Ie,k)=>{"use strict";function I(oe){return null!==oe&&"object"==typeof oe}k.d(Ie,{K:()=>I})},4072:(Ge,Ie,k)=>{"use strict";function I(oe){return!!oe&&"function"!=typeof oe.subscribe&&"function"==typeof oe.then}k.d(Ie,{t:()=>I})},4869:(Ge,Ie,k)=>{"use strict";function I(oe){return oe&&"function"==typeof oe.schedule}k.d(Ie,{K:()=>I})},7444:(Ge,Ie,k)=>{"use strict";k.d(Ie,{s:()=>j});var I=k(5015),oe=k(4449),ne=k(377),ie=k(6554),pe=k(9489),q=k(4072),L=k(1555);const j=$=>{if($&&"function"==typeof $[ie.L])return($=>U=>{const W=$[ie.L]();if("function"!=typeof W.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return W.subscribe(U)})($);if((0,pe.z)($))return(0,I.V)($);if((0,q.t)($))return($=>U=>($.then(W=>{U.closed||(U.next(W),U.complete())},W=>U.error(W)).then(null,oe.z),U))($);if($&&"function"==typeof $[ne.hZ])return($=>U=>{const W=$[ne.hZ]();for(;;){let ce;try{ce=W.next()}catch(te){return U.error(te),U}if(ce.done){U.complete();break}if(U.next(ce.value),U.closed)break}return"function"==typeof W.return&&U.add(()=>{W.return&&W.return()}),U})($);{const W=`You provided ${(0,L.K)($)?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(W)}}},5015:(Ge,Ie,k)=>{"use strict";k.d(Ie,{V:()=>I});const I=oe=>B=>{for(let ne=0,me=oe.length;ne<me&&!B.closed;ne++)B.next(oe[ne]);B.complete()}},1143:(Ge,Ie,k)=>{"use strict";var I=k(3018);let oe=null;function B(){return oe}const _e=new I.OlP("DocumentToken");let pe=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,I.Yz7)({factory:q,token:i,providedIn:"platform"}),i})();function q(){return(0,I.LFG)(j)}const L=new I.OlP("Location Initialized");let j=(()=>{class i extends pe{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(r){const a=B().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",r,!1),()=>a.removeEventListener("popstate",r)}onHashChange(r){const a=B().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",r,!1),()=>a.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,a,l){$()?this._history.pushState(r,a,l):this.location.hash=l}replaceState(r,a,l){$()?this._history.replaceState(r,a,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(_e))},i.\u0275prov=(0,I.Yz7)({factory:U,token:i,providedIn:"platform"}),i})();function $(){return!!window.history.pushState}function U(){return new j((0,I.LFG)(_e))}function W(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function ce(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function te(i){return i&&"?"!==i[0]?"?"+i:i}let ee=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,I.Yz7)({factory:Oe,token:i,providedIn:"root"}),i})();function Oe(i){const n=(0,I.LFG)(_e).location;return new xe((0,I.LFG)(pe),n&&n.origin||"")}const Se=new I.OlP("appBaseHref");let xe=(()=>{class i extends ee{constructor(r,a){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==a&&(a=this._platformLocation.getBaseHrefFromDOM()),null==a)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=a}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return W(this._baseHref,r)}path(r=!1){const a=this._platformLocation.pathname+te(this._platformLocation.search),l=this._platformLocation.hash;return l&&r?`${a}${l}`:a}pushState(r,a,l,h){const g=this.prepareExternalUrl(l+te(h));this._platformLocation.pushState(r,a,g)}replaceState(r,a,l,h){const g=this.prepareExternalUrl(l+te(h));this._platformLocation.replaceState(r,a,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformLocation).historyGo)||void 0===l||l.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(pe),I.LFG(Se,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})(),Pe=(()=>{class i extends ee{constructor(r,a){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(r){const a=W(this._baseHref,r);return a.length>0?"#"+a:a}pushState(r,a,l,h){let g=this.prepareExternalUrl(l+te(h));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(r,a,g)}replaceState(r,a,l,h){let g=this.prepareExternalUrl(l+te(h));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(r,a,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformLocation).historyGo)||void 0===l||l.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(pe),I.LFG(Se,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})(),Fe=(()=>{class i{constructor(r,a){this._subject=new I.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const l=this._platformStrategy.getBaseHref();this._platformLocation=a,this._baseHref=ce(zt(l)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,a=""){return this.path()==this.normalize(r+te(a))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,zt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,a="",l=null){this._platformStrategy.pushState(l,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+te(a)),l)}replaceState(r,a="",l=null){this._platformStrategy.replaceState(l,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+te(a)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformStrategy).historyGo)||void 0===l||l.call(a,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}))}_notifyUrlChangeListeners(r="",a){this._urlChangeListeners.forEach(l=>l(r,a))}subscribe(r,a,l){return this._subject.subscribe({next:r,error:a,complete:l})}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(ee),I.LFG(pe))},i.normalizeQueryParams=te,i.joinWithSlash=W,i.stripTrailingSlash=ce,i.\u0275prov=(0,I.Yz7)({factory:ke,token:i,providedIn:"root"}),i})();function ke(){return new Fe((0,I.LFG)(ee),(0,I.LFG)(pe))}function zt(i){return i.replace(/\/index.html$/,"")}var se=(()=>((se=se||{})[se.Zero=0]="Zero",se[se.One=1]="One",se[se.Two=2]="Two",se[se.Few=3]="Few",se[se.Many=4]="Many",se[se.Other=5]="Other",se))();const Er=I.kL8;class cr{}let lo=(()=>{class i extends cr{constructor(r){super(),this.locale=r}getPluralCategory(r,a){switch(Er(a||this.locale)(r)){case se.Zero:return"zero";case se.One:return"one";case se.Two:return"two";case se.Few:return"few";case se.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(I.soG))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})(),N0=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({providers:[{provide:cr,useClass:lo}]}),i})();function lu(i){return"server"===i}let du=(()=>{class i{}return i.\u0275prov=(0,I.Yz7)({token:i,providedIn:"root",factory:()=>new qc((0,I.LFG)(_e),window)}),i})();class qc{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const a=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=a.currentNode;for(;l;){const h=l.shadowRoot;if(h){const g=h.getElementById(n)||h.querySelector(`[name="${n}"]`);if(g)return g}l=a.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),a=r.left+this.window.pageXOffset,l=r.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(a-h[0],l-h[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=hu(this.window.history)||hu(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function hu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class go extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new go,oe||(oe=i)}onAndCancel(n,r,a){return n.addEventListener(r,a,!1),()=>{n.removeEventListener(r,a,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(Cs=Cs||document.querySelector("base"),Cs?Cs.getAttribute("href"):null);return null==r?null:function(i){Yc=Yc||document.createElement("a"),Yc.setAttribute("href",i);const n=Yc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const a=r.indexOf("="),[l,h]=-1==a?[r,""]:[r.slice(0,a),r.slice(a+1)];if(l.trim()===n)return decodeURIComponent(h)}return null}(document.cookie,n)}}let Yc,Cs=null;const yp=new I.OlP("TRANSITION_ID"),Jc=[{provide:I.ip1,useFactory:function(i,n,r){return()=>{r.get(I.CZH).donePromise.then(()=>{const a=B(),l=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let h=0;h<l.length;h++)a.remove(l[h])})}},deps:[yp,_e,I.zs3],multi:!0}];class Jt{static init(){(0,I.VLi)(new Jt)}addToWindow(n){I.dqk.getAngularTestability=(a,l=!0)=>{const h=n.findTestabilityInTree(a,l);if(null==h)throw new Error("Could not find testability for element.");return h},I.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(a=>{const l=I.dqk.getAllAngularTestabilities();let h=l.length,g=!1;const w=function(D){g=g||D,h--,0==h&&a(g)};l.forEach(function(D){D.whenStable(w)})})}findTestabilityInTree(n,r,a){if(null==r)return null;const l=n.getTestability(r);return null!=l?l:a?B().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let _p=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();const mo=new I.OlP("EventManagerPlugins");let vu=(()=>{class i{constructor(r,a){this._zone=a,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,a,l){return this._findPluginFor(a).addEventListener(r,a,l)}addGlobalEventListener(r,a,l){return this._findPluginFor(a).addGlobalEventListener(r,a,l)}getZone(){return this._zone}_findPluginFor(r){const a=this._eventNameToPlugin.get(r);if(a)return a;const l=this._plugins;for(let h=0;h<l.length;h++){const g=l[h];if(g.supports(r))return this._eventNameToPlugin.set(r,g),g}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(mo),I.LFG(I.R0b))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();class Eu{constructor(n){this._doc=n}addGlobalEventListener(n,r,a){const l=B().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,a)}}let Jd=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const a=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),a.add(l))}),this.onStylesAdded(a)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})(),yo=(()=>{class i extends Jd{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,a,l){r.forEach(h=>{const g=this._doc.createElement("style");g.textContent=h,l.push(a.appendChild(g))})}addHost(r){const a=[];this._addStylesToHost(this._stylesSet,r,a),this._hostNodes.set(r,a)}removeHost(r){const a=this._hostNodes.get(r);a&&a.forEach(Ep),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((a,l)=>{this._addStylesToHost(r,l,a)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Ep))}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(_e))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();function Ep(i){B().remove(i)}const be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function Ss(i,n,r){for(let a=0;a<n.length;a++){let l=n[a];Array.isArray(l)?Ss(i,l,r):(l=l.replace(Dt,i),r.push(l))}return r}function wy(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let ia=(()=>{class i{constructor(r,a,l){this.eventManager=r,this.sharedStylesHost=a,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new As(r)}createRenderer(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case I.ifc.Emulated:{let l=this.rendererByCompId.get(a.id);return l||(l=new xs(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,l)),l.applyToHost(r),l}case 1:case I.ifc.ShadowDom:return new Ki(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){const l=Ss(a.id,a.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(vu),I.LFG(yo),I.LFG(I.AFp))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();class As{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(be[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,a){n&&n.insertBefore(r,a)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error(`The selector "${n}" did not match any elements`);return r||(a.textContent=""),a}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,a,l){if(l){r=l+":"+r;const h=be[l];h?n.setAttributeNS(h,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}removeAttribute(n,r,a){if(a){const l=be[a];l?n.removeAttributeNS(l,r):n.removeAttribute(`${a}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,a,l){l&(I.JOm.DashCase|I.JOm.Important)?n.style.setProperty(r,a,l&I.JOm.Important?"important":""):n.style[r]=a}removeStyle(n,r,a){a&I.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,a){n[r]=a}setValue(n,r){n.nodeValue=r}listen(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,wy(a)):this.eventManager.addEventListener(n,r,wy(a))}}class xs extends As{constructor(n,r,a,l){super(n),this.component=a;const h=Ss(l+"-"+a.id,a.styles,[]);r.addStyles(h),this.contentAttr="_ngcontent-%COMP%".replace(Dt,l+"-"+a.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Dt,i)}(l+"-"+a.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const a=super.createElement(n,r);return super.setAttribute(a,this.contentAttr,""),a}}class Ki extends As{constructor(n,r,a,l){super(n),this.sharedStylesHost=r,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Ss(l.id,l.styles,[]);for(let g=0;g<h.length;g++){const w=document.createElement("style");w.textContent=h[g],this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,a){return super.insertBefore(this.nodeOrShadowRoot(n),r,a)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let th=(()=>{class i extends Eu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,a,l){return r.addEventListener(a,l,!1),()=>this.removeEventListener(r,a,l)}removeEventListener(r,a,l){return r.removeEventListener(a,l)}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(_e))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();const bu=["alt","control","meta","shift"],Tp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ir={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let vo=(()=>{class i extends Eu{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,a,l){const h=i.parseEventName(a),g=i.eventCallback(h.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(r,h.domEventName,g))}static parseEventName(r){const a=r.toLowerCase().split("."),l=a.shift();if(0===a.length||"keydown"!==l&&"keyup"!==l)return null;const h=i._normalizeKey(a.pop());let g="";if(bu.forEach(D=>{const x=a.indexOf(D);x>-1&&(a.splice(x,1),g+=D+".")}),g+=h,0!=a.length||0===h.length)return null;const w={};return w.domEventName=l,w.fullKey=g,w}static getEventFullKey(r){let a="",l=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&Sp.hasOwnProperty(n)&&(n=Sp[n]))}return Tp[n]||n}(r);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),bu.forEach(h=>{h!=l&&Ir[h](r)&&(a+=h+".")}),a+=l,a}static eventCallback(r,a,l){return h=>{i.getEventFullKey(h)===r&&l.runGuarded(()=>a(h))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(_e))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();const Sy=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function(){go.makeCurrent(),Jt.init()},multi:!0},{provide:_e,useFactory:function(){return(0,I.RDi)(document),document},deps:[]}]),Rs=[[],{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function(){return new I.qLn},deps:[]},{provide:mo,useClass:th,multi:!0,deps:[_e,I.R0b,I.Lbi]},{provide:mo,useClass:vo,multi:!0,deps:[_e]},[],{provide:ia,useClass:ia,deps:[vu,yo,I.AFp]},{provide:I.FYo,useExisting:ia},{provide:Jd,useExisting:yo},{provide:yo,useClass:yo,deps:[_e]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b]},{provide:vu,useClass:vu,deps:[mo,I.R0b]},{provide:class{},useClass:_p,deps:[]},[]];let Du=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:I.AFp,useValue:r.appId},{provide:yp,useExisting:I.AFp},Jc]}}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(i,12))},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({providers:Rs,imports:[N0,I.hGG]}),i})();"undefined"!=typeof window&&window;const ph_firebaseConfig={apiKey:"AIzaSyAtEnxDHONzJcoZ5cIy5t5gTFGRqsA1Ccc",authDomain:"sala-de-juegos-db.firebaseapp.com",projectId:"sala-de-juegos-db",storageBucket:"sala-de-juegos-db.appspot.com",messagingSenderId:"104589083411",appId:"1:104589083411:web:dcd270515f7a0db71750e6",measurementId:"G-C1N2F34WP9"};var yn=k(4402),tt=k(5917),br=k(9765),ol=k(7971);class dr extends br.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ol.N;return this._value}next(n){super.next(this._value=n)}}var aa=k(4869),al=k(9796),_i=k(7393);class xy extends _i.L{notifyNext(n,r,a,l,h){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class ua extends _i.L{constructor(n,r,a){super(),this.parent=n,this.outerValue=r,this.outerIndex=a,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Np=k(7444),vi=k(7574);function Ry(i,n,r,a,l=new ua(i,r,a)){if(!l.closed)return n instanceof vi.y?n.subscribe(l):(0,Np.s)(n)(l)}var gh=k(6693);const xu={};class Op{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new Mp(n,this.resultSelector))}}class Mp extends xy{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(xu),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let a=0;a<r;a++)this.add(Ry(this,n[a],void 0,a))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,a){const l=this.values,g=this.toRespond?l[a]===xu?--this.toRespond:this.toRespond:0;l[a]=r,0===g&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(a){return void this.destination.error(a)}this.destination.next(r)}}const ni=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();var ul=k(3282);function Ru(...i){return(0,ul.J)(1)((0,tt.of)(...i))}var hr=k(9193);function Eo(i){return new vi.y(n=>{let r;try{r=i()}catch(l){return void n.error(l)}return(r?(0,yn.D)(r):(0,hr.c)()).subscribe(n)})}var la=k(2441),mt=k(8002),Os=k(5345);function _n(i,n){return"function"==typeof n?r=>r.pipe(_n((a,l)=>(0,yn.D)(i(a,l)).pipe((0,mt.U)((h,g)=>n(a,h,l,g))))):r=>r.lift(new Oy(i))}class Oy{constructor(n){this.project=n}call(n,r){return r.subscribe(new F0(n,this.project))}}class F0 extends Os.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const a=this.index++;try{r=this.project(n,a)}catch(l){return void this.destination.error(l)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const a=new Os.IY(this),l=this.destination;l.add(a),this.innerSubscription=(0,Os.ft)(n,a),this.innerSubscription!==a&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const My=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function Nu(i){return n=>0===i?(0,hr.c)():n.lift(new vn(i))}class vn{constructor(n){if(this.total=n,this.total<0)throw new My}call(n,r){return r.subscribe(new yh(n,this.total))}}class yh extends _i.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,a=++this.count;a<=r&&(this.destination.next(n),a===r&&(this.destination.complete(),this.unsubscribe()))}}function Ou(...i){const n=i[i.length-1];return(0,aa.K)(n)?(i.pop(),r=>Ru(i,r,n)):r=>Ru(i,r)}function da(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(l){return l.lift(new U0(i,n,r))}}class U0{constructor(n,r,a=!1){this.accumulator=n,this.seed=r,this.hasSeed=a}call(n,r){return r.subscribe(new Pp(n,this.accumulator,this.seed,this.hasSeed))}}class Pp extends _i.L{constructor(n,r,a,l){super(n),this.accumulator=r,this._seed=a,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let a;try{a=this.accumulator(this.seed,n,r)}catch(l){this.destination.error(l)}this.seed=a,this.destination.next(a)}}function Ei(i,n){return function(a){return a.lift(new kp(i,n))}}class kp{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new j0(n,this.predicate,this.thisArg))}}class j0 extends _i.L{constructor(n,r,a){super(n),this.predicate=r,this.thisArg=a,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(a){return void this.destination.error(a)}r&&this.destination.next(n)}}function Ms(i){return function(r){const a=new cl(i),l=r.lift(a);return a.caught=l}}class cl{constructor(n){this.selector=n}call(n,r){return r.subscribe(new ha(n,this.selector,this.caught))}}class ha extends Os.Ds{constructor(n,r,a){super(n),this.selector=r,this.caught=a}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(h){return void super.error(h)}this._unsubscribeAndRecycle();const a=new Os.IY(this);this.add(a);const l=(0,Os.ft)(r,a);l!==a&&this.add(l)}}}var bn=k(9773);function ll(i,n){return(0,bn.zg)(i,n,1)}function Cn(i){return function(r){return 0===i?(0,hr.c)():r.lift(new dl(i))}}class dl{constructor(n){if(this.total=n,this.total<0)throw new My}call(n,r){return r.subscribe(new fa(n,this.total))}}class fa extends _i.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,a=this.total,l=this.count++;r.length<a?r.push(n):r[l%a]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const a=this.count>=this.total?this.total:this.count,l=this.ring;for(let h=0;h<a;h++){const g=r++%a;n.next(l[g])}}n.complete()}}function Lp(i=ii){return n=>n.lift(new Py(i))}class Py{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new ri(n,this.errorFactory))}}class ri extends _i.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function ii(){return new ni}function Mu(i=null){return n=>n.lift(new Qi(i))}class Qi{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new Ps(n,this.defaultValue))}}class Ps extends _i.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Pu=k(4487);function wo(i,n){const r=arguments.length>=2;return a=>a.pipe(i?Ei((l,h)=>i(l,h,a)):Pu.y,Nu(1),r?Mu(n):Lp(()=>new ni))}var Cr=k(3342),B0=k(1307),vh=k(5319);class ku{constructor(n){this.callback=n}call(n,r){return r.subscribe(new ks(n,this.callback))}}class ks extends _i.L{constructor(n,r){super(n),this.add(new vh.w(r))}}class Ls{constructor(n,r){this.id=n,this.url=r}}class pa extends Ls{constructor(n,r,a="imperative",l=null){super(n,r),this.navigationTrigger=a,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ga extends Ls{constructor(n,r,a){super(n,r),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fp extends Ls{constructor(n,r,a){super(n,r),this.reason=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ky extends Ls{constructor(n,r,a){super(n,r),this.error=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Eh extends Ls{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ly extends Ls{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lu extends Ls{constructor(n,r,a,l,h){super(n,r),this.urlAfterRedirects=a,this.state=l,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fu extends Ls{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hl extends Ls{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fs{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wh{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vs{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fl{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ih{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bh{constructor(n,r,a){this.routerEvent=n,this.position=r,this.anchor=a}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const pt="primary";class $0{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Ji(i){return new $0(i)}const Io="ngNavigationCancelingError";function Xi(i){const n=Error("NavigationCancelingError: "+i);return n[Io]=!0,n}function Dn(i,n,r){const a=r.path.split("/");if(a.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||a.length<i.length))return null;const l={};for(let h=0;h<a.length;h++){const g=a[h],w=i[h];if(g.startsWith(":"))l[g.substring(1)]=w;else if(g!==w.path)return null}return{consumed:i.slice(0,a.length),posParams:l}}function es(i,n){const r=i?Object.keys(i):void 0,a=n?Object.keys(n):void 0;if(!r||!a||r.length!=a.length)return!1;let l;for(let h=0;h<r.length;h++)if(l=r[h],!Us(i[l],n[l]))return!1;return!0}function Us(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),a=[...n].sort();return r.every((l,h)=>a[h]===l)}return i===n}function ma(i){return Array.prototype.concat.apply([],i)}function gl(i){return i.length>0?i[i.length-1]:null}function jn(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function Oi(i){return(0,I.CqO)(i)?i:(0,I.QGY)(i)?(0,yn.D)(Promise.resolve(i)):(0,tt.of)(i)}const si={exact:function Ch(i,n,r){if(!_a(i.segments,n.segments)||!ml(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const a in n.children)if(!i.children[a]||!Ch(i.children[a],n.children[a],r))return!1;return!0},subset:Uu},Vu={exact:function(i,n){return es(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>Us(i[r],n[r]))},ignored:()=>!0};function ts(i,n,r){return si[r.paths](i.root,n.root,r.matrixParams)&&Vu[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function Uu(i,n,r){return Th(i,n,n.segments,r)}function Th(i,n,r,a){if(i.segments.length>r.length){const l=i.segments.slice(0,r.length);return!(!_a(l,r)||n.hasChildren()||!ml(l,r,a))}if(i.segments.length===r.length){if(!_a(i.segments,r)||!ml(i.segments,r,a))return!1;for(const l in n.children)if(!i.children[l]||!Uu(i.children[l],n.children[l],a))return!1;return!0}{const l=r.slice(0,i.segments.length),h=r.slice(i.segments.length);return!!(_a(i.segments,l)&&ml(i.segments,l,a)&&i.children[pt])&&Th(i.children[pt],n,h,a)}}function ml(i,n,r){return n.every((a,l)=>Vu[r](i[l].parameters,a.parameters))}class ns{constructor(n,r,a){this.root=n,this.queryParams=r,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ji(this.queryParams)),this._queryParamMap}toString(){return Hy.serialize(this)}}class yt{constructor(n,r){this.segments=n,this.children=r,this.parent=null,jn(r,(a,l)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _l(this)}}class rs{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Ji(this.parameters)),this._parameterMap}toString(){return Co(this)}}function _a(i,n){return i.length===n.length&&i.every((r,a)=>r.path===n[a].path)}class yl{}class $y{parse(n){const r=new zy(n);return new ns(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){var i;return`${`/${ju(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const a=i[r];return Array.isArray(a)?a.map(l=>`${va(r)}=${va(l)}`).join("&"):`${va(r)}=${va(a)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${i=n.fragment,encodeURI(i)}`:""}`}}const Hy=new $y;function _l(i){return i.segments.map(n=>Co(n)).join("/")}function ju(i,n){if(!i.hasChildren())return _l(i);if(n){const r=i.children[pt]?ju(i.children[pt],!1):"",a=[];return jn(i.children,(l,h)=>{h!==pt&&a.push(`${h}:${ju(l,!1)}`)}),a.length>0?`${r}(${a.join("//")})`:r}{const r=function(i,n){let r=[];return jn(i.children,(a,l)=>{l===pt&&(r=r.concat(n(a,l)))}),jn(i.children,(a,l)=>{l!==pt&&(r=r.concat(n(a,l)))}),r}(i,(a,l)=>l===pt?[ju(i.children[pt],!1)]:[`${l}:${ju(a,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[pt]?`${_l(i)}/${r[0]}`:`${_l(i)}/(${r.join("//")})`}}function bo(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function va(i){return bo(i).replace(/%3B/gi,";")}function Sh(i){return bo(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(i){return decodeURIComponent(i)}function Gy(i){return Bu(i.replace(/\+/g,"%20"))}function Co(i){return`${Sh(i.path)}${function(i){return Object.keys(i).map(n=>`;${Sh(n)}=${Sh(i[n])}`).join("")}(i.parameters)}`}const jp=/^[^\/()?;=#]+/;function $u(i){const n=i.match(jp);return n?n[0]:""}const Do=/^[^=?&#]+/,H0=/^[^?&#]+/;class zy{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(a[pt]=new yt(n,r)),a}parseSegment(){const n=$u(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new rs(Bu(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=$u(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const l=$u(this.remaining);l&&(a=l,this.capture(a))}n[Bu(r)]=Bu(a)}parseQueryParam(n){const r=function(i){const n=i.match(Do);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const g=function(i){const n=i.match(H0);return n?n[0]:""}(this.remaining);g&&(a=g,this.capture(a))}const l=Gy(r),h=Gy(a);if(n.hasOwnProperty(l)){let g=n[l];Array.isArray(g)||(g=[g],n[l]=g),g.push(h)}else n[l]=h}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=$u(this.remaining),l=this.remaining[a.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let h;a.indexOf(":")>-1?(h=a.substr(0,a.indexOf(":")),this.capture(h),this.capture(":")):n&&(h=pt);const g=this.parseChildren();r[h]=1===Object.keys(g).length?g[pt]:new yt([],g),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class Bp{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=Br(n,this._root);return r?r.children.map(a=>a.value):[]}firstChild(n){const r=Br(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=Bs(n,this._root);return r.length<2?[]:r[r.length-2].children.map(l=>l.value).filter(l=>l!==n)}pathFromRoot(n){return Bs(n,this._root).map(r=>r.value)}}function Br(i,n){if(i===n.value)return n;for(const r of n.children){const a=Br(i,r);if(a)return a}return null}function Bs(i,n){if(i===n.value)return[n];for(const r of n.children){const a=Bs(i,r);if(a.length)return a.unshift(n),a}return[]}class oi{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function Hu(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class $p extends Bp{constructor(n,r){super(n),this.snapshot=r,xh(this,n)}toString(){return this.snapshot.toString()}}function vl(i,n){const r=function(i,n){const g=new El([],{},{},"",{},pt,n,null,i.root,-1,{});return new Hp("",new oi(g,[]))}(i,n),a=new dr([new rs("",{})]),l=new dr({}),h=new dr({}),g=new dr({}),w=new dr(""),D=new Ea(a,l,g,w,h,pt,n,r.root);return D.snapshot=r.root,new $p(new oi(D,[]),r)}class Ea{constructor(n,r,a,l,h,g,w,D){this.url=n,this.params=r,this.queryParams=a,this.fragment=l,this.data=h,this.outlet=g,this.component=w,this._futureSnapshot=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(n=>Ji(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(n=>Ji(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gu(i,n="emptyOnly"){const r=i.pathFromRoot;let a=0;if("always"!==n)for(a=r.length-1;a>=1;){const l=r[a],h=r[a-1];if(l.routeConfig&&""===l.routeConfig.path)a--;else{if(h.component)break;a--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(a))}class El{constructor(n,r,a,l,h,g,w,D,x,N,P){this.url=n,this.params=r,this.queryParams=a,this.fragment=l,this.data=h,this.outlet=g,this.component=w,this.routeConfig=D,this._urlSegment=x,this._lastPathIndex=N,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hp extends Bp{constructor(n,r){super(r),this.url=n,xh(this,r)}toString(){return Zy(this._root)}}function xh(i,n){n.value._routerState=i,n.children.forEach(r=>xh(i,r))}function Zy(i){const n=i.children.length>0?` { ${i.children.map(Zy).join(", ")} } `:"";return`${i.value}${n}`}function wl(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,es(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),es(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!es(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),es(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function is(i,n){return es(i.params,n.params)&&function(i,n){return _a(i,n)&&i.every((r,a)=>es(r.parameters,n[a].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||is(i.parent,n.parent))}function $r(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const a=r.value;a._futureSnapshot=n.value;const l=function(i,n,r){return n.children.map(a=>{for(const l of r.children)if(i.shouldReuseRoute(a.value,l.value.snapshot))return $r(i,a,l);return $r(i,a)})}(i,n,r);return new oi(a,l)}{if(i.shouldAttach(n.value)){const h=i.retrieve(n.value);if(null!==h){const g=h.route;return $s(n,g),g}}const a=function(i){return new Ea(new dr(i.url),new dr(i.params),new dr(i.queryParams),new dr(i.fragment),new dr(i.data),i.outlet,i.component,i)}(n.value),l=n.children.map(h=>$r(i,h));return new oi(a,l)}}function $s(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)$s(i.children[r],n.children[r])}function wa(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function bl(i){return"object"==typeof i&&null!=i&&i.outlets}function qp(i,n,r,a,l){let h={};return a&&jn(a,(g,w)=>{h[w]=Array.isArray(g)?g.map(D=>`${D}`):`${g}`}),new ns(r.root===i?n:Cl(r.root,i,n),h,l)}function Cl(i,n,r){const a={};return jn(i.children,(l,h)=>{a[h]=l===n?r:Cl(l,n,r)}),new yt(i.segments,a)}class Wu{constructor(n,r,a){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=a,n&&a.length>0&&wa(a[0]))throw new Error("Root segment cannot have matrix parameters");const l=a.find(bl);if(l&&l!==gl(a))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kp{constructor(n,r,a){this.segmentGroup=n,this.processChildren=r,this.index=a}}function Yp(i,n,r){if(i||(i=new yt([],{})),0===i.segments.length&&i.hasChildren())return zu(i,n,r);const a=function(i,n,r){let a=0,l=n;const h={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(a>=r.length)return h;const g=i.segments[l],w=r[a];if(bl(w))break;const D=`${w}`,x=a<r.length-1?r[a+1]:null;if(l>0&&void 0===D)break;if(D&&x&&"object"==typeof x&&void 0===x.outlets){if(!qu(D,x,g))return h;a+=2}else{if(!qu(D,{},g))return h;a++}l++}return{match:!0,pathIndex:l,commandIndex:a}}(i,n,r),l=r.slice(a.commandIndex);if(a.match&&a.pathIndex<i.segments.length){const h=new yt(i.segments.slice(0,a.pathIndex),{});return h.children[pt]=new yt(i.segments.slice(a.pathIndex),i.children),zu(h,0,l)}return a.match&&0===l.length?new yt(i.segments,{}):a.match&&!i.hasChildren()?Tl(i,n,r):a.match?zu(i,0,l):Tl(i,n,r)}function zu(i,n,r){if(0===r.length)return new yt(i.segments,{});{const a=function(i){return bl(i[0])?i[0].outlets:{[pt]:i}}(r),l={};return jn(a,(h,g)=>{"string"==typeof h&&(h=[h]),null!==h&&(l[g]=Yp(i.children[g],n,h))}),jn(i.children,(h,g)=>{void 0===a[g]&&(l[g]=h)}),new yt(i.segments,l)}}function Tl(i,n,r){const a=i.segments.slice(0,n);let l=0;for(;l<r.length;){const h=r[l];if(bl(h)){const D=Sl(h.outlets);return new yt(a,D)}if(0===l&&wa(r[0])){a.push(new rs(i.segments[n].path,Nh(r[0]))),l++;continue}const g=bl(h)?h.outlets[pt]:`${h}`,w=l<r.length-1?r[l+1]:null;g&&w&&wa(w)?(a.push(new rs(g,Nh(w))),l+=2):(a.push(new rs(g,{})),l++)}return new yt(a,{})}function Sl(i){const n={};return jn(i,(r,a)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[a]=Tl(new yt([],{}),0,r))}),n}function Nh(i){const n={};return jn(i,(r,a)=>n[a]=`${r}`),n}function qu(i,n,r){return i==r.path&&es(n,r.parameters)}class tn{constructor(n,r,a,l){this.routeReuseStrategy=n,this.futureState=r,this.currState=a,this.forwardEvent=l}activate(n){const r=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,a,n),wl(this.futureState.root),this.activateChildRoutes(r,a,n)}deactivateChildRoutes(n,r,a){const l=Hu(r);n.children.forEach(h=>{const g=h.value.outlet;this.deactivateRoutes(h,l[g],a),delete l[g]}),jn(l,(h,g)=>{this.deactivateRouteAndItsChildren(h,a)})}deactivateRoutes(n,r,a){const l=n.value,h=r?r.value:null;if(l===h)if(l.component){const g=a.getContext(l.outlet);g&&this.deactivateChildRoutes(n,r,g.children)}else this.deactivateChildRoutes(n,r,a);else h&&this.deactivateRouteAndItsChildren(r,a)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const a=r.getContext(n.value.outlet);if(a&&a.outlet){const l=a.outlet.detach(),h=a.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:l,route:n,contexts:h})}}deactivateRouteAndOutlet(n,r){const a=r.getContext(n.value.outlet),l=a&&n.value.component?a.children:r,h=Hu(n);for(const g of Object.keys(h))this.deactivateRouteAndItsChildren(h[g],l);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(n,r,a){const l=Hu(r);n.children.forEach(h=>{this.activateRoutes(h,l[h.value.outlet],a),this.forwardEvent(new Ih(h.value.snapshot))}),n.children.length&&this.forwardEvent(new Vs(n.value.snapshot))}activateRoutes(n,r,a){const l=n.value,h=r?r.value:null;if(wl(l),l===h)if(l.component){const g=a.getOrCreateContext(l.outlet);this.activateChildRoutes(n,r,g.children)}else this.activateChildRoutes(n,r,a);else if(l.component){const g=a.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const w=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),g.children.onOutletReAttached(w.contexts),g.attachRef=w.componentRef,g.route=w.route.value,g.outlet&&g.outlet.attach(w.componentRef,w.route.value),Mh(w.route)}else{const w=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(l.snapshot),D=w?w.module.componentFactoryResolver:null;g.attachRef=null,g.route=l,g.resolver=D,g.outlet&&g.outlet.activateWith(l,D),this.activateChildRoutes(n,null,g.children)}}else this.activateChildRoutes(n,null,a)}}function Mh(i){wl(i.value),i.children.forEach(Mh)}class So{constructor(n,r){this.routes=n,this.module=r}}function Tn(i){return"function"==typeof i}function Hs(i){return i instanceof ns}const Zu=Symbol("INITIAL_VALUE");function ss(){return _n(i=>function(...i){let n,r;return(0,aa.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,al.k)(i[0])&&(i=i[0]),(0,gh.n)(i,r).lift(new Op(n))}(i.map(n=>n.pipe(Nu(1),Ou(Zu)))).pipe(da((n,r)=>{let a=!1;return r.reduce((l,h,g)=>l!==Zu?l:(h===Zu&&(a=!0),a||!1!==h&&g!==r.length-1&&!Hs(h)?l:h),n)},Zu),Ei(n=>n!==Zu),(0,mt.U)(n=>Hs(n)?n:!0===n),Nu(1)))}let un=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,a){1&r&&I._UZ(0,"router-outlet")},directives:function(){return[cg]},encapsulation:2}),i})();function Yu(i,n=""){for(let r=0;r<i.length;r++){const a=i[r];Qp(a,Jp(n,a))}}function Qp(i,n){i.children&&Yu(i.children,n)}function Jp(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function Bn(i){const n=i.children&&i.children.map(Bn),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==pt&&(r.component=un),r}function zn(i){return i.outlet||pt}function qn(i,n){const r=i.filter(a=>zn(a)===n);return r.push(...i.filter(a=>zn(a)!==n)),r}const Al={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ia(i,n,r){var a;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},Al):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(n.matcher||Dn)(r,i,n);if(!h)return Object.assign({},Al);const g={};jn(h.posParams,(D,x)=>{g[x]=D.path});const w=h.consumed.length>0?Object.assign(Object.assign({},g),h.consumed[h.consumed.length-1].parameters):g;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:w,positionalParamSegments:null!==(a=h.posParams)&&void 0!==a?a:{}}}function Ao(i,n,r,a,l="corrected"){if(r.length>0&&function(i,n,r){return r.some(a=>Ju(i,n,a)&&zn(a)!==pt)}(i,r,a)){const g=new yt(n,function(i,n,r,a){const l={};l[pt]=a,a._sourceSegment=i,a._segmentIndexShift=n.length;for(const h of r)if(""===h.path&&zn(h)!==pt){const g=new yt([],{});g._sourceSegment=i,g._segmentIndexShift=n.length,l[zn(h)]=g}return l}(i,n,a,new yt(r,i.children)));return g._sourceSegment=i,g._segmentIndexShift=n.length,{segmentGroup:g,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(a=>Ju(i,n,a))}(i,r,a)){const g=new yt(i.segments,function(i,n,r,a,l,h){const g={};for(const w of a)if(Ju(i,r,w)&&!l[zn(w)]){const D=new yt([],{});D._sourceSegment=i,D._segmentIndexShift="legacy"===h?i.segments.length:n.length,g[zn(w)]=D}return Object.assign(Object.assign({},l),g)}(i,n,r,a,i.children,l));return g._sourceSegment=i,g._segmentIndexShift=n.length,{segmentGroup:g,slicedSegments:r}}const h=new yt(i.segments,i.children);return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}function Ju(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function xl(i,n,r,a){return!!(zn(i)===a||a!==pt&&Ju(n,r,i))&&("**"===i.path||Ia(n,i,r).matched)}function Xp(i,n,r){return 0===n.length&&!i.children[r]}class ba{constructor(n){this.segmentGroup=n||null}}class Rl{constructor(n){this.urlTree=n}}function Xu(i){return new vi.y(n=>n.error(new ba(i)))}function E(i){return new vi.y(n=>n.error(new Rl(i)))}function p(i){return new vi.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class A{constructor(n,r,a,l,h){this.configLoader=r,this.urlSerializer=a,this.urlTree=l,this.config=h,this.allowRedirects=!0,this.ngModule=n.get(I.h0i)}apply(){const n=Ao(this.urlTree.root,[],[],this.config).segmentGroup,r=new yt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,pt).pipe((0,mt.U)(h=>this.createUrlTree(z(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ms(h=>{if(h instanceof Rl)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof ba?this.noMatchError(h):h}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,pt).pipe((0,mt.U)(l=>this.createUrlTree(z(l),n.queryParams,n.fragment))).pipe(Ms(l=>{throw l instanceof ba?this.noMatchError(l):l}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,a){const l=n.segments.length>0?new yt([],{[pt]:n}):n;return new ns(l,r,a)}expandSegmentGroup(n,r,a,l){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(n,r,a).pipe((0,mt.U)(h=>new yt([],h))):this.expandSegment(n,a,r,a.segments,l,!0)}expandChildren(n,r,a){const l=[];for(const h of Object.keys(a.children))"primary"===h?l.unshift(h):l.push(h);return(0,yn.D)(l).pipe(ll(h=>{const g=a.children[h],w=qn(r,h);return this.expandSegmentGroup(n,w,g,h).pipe((0,mt.U)(D=>({segment:D,outlet:h})))}),da((h,g)=>(h[g.outlet]=g.segment,h),{}),function(i,n){const r=arguments.length>=2;return a=>a.pipe(i?Ei((l,h)=>i(l,h,a)):Pu.y,Cn(1),r?Mu(n):Lp(()=>new ni))}())}expandSegment(n,r,a,l,h,g){return(0,yn.D)(a).pipe(ll(w=>this.expandSegmentAgainstRoute(n,r,a,w,l,h,g).pipe(Ms(x=>{if(x instanceof ba)return(0,tt.of)(null);throw x}))),wo(w=>!!w),Ms((w,D)=>{if(w instanceof ni||"EmptyError"===w.name){if(Xp(r,l,h))return(0,tt.of)(new yt([],{}));throw new ba(r)}throw w}))}expandSegmentAgainstRoute(n,r,a,l,h,g,w){return xl(l,r,h,g)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(n,r,l,h,g):w&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,a,l,h,g):Xu(r):Xu(r)}expandSegmentAgainstRouteUsingRedirect(n,r,a,l,h,g){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,a,l,g):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,l,h,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,a,l){const h=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?E(h):this.lineralizeSegments(a,h).pipe((0,bn.zg)(g=>{const w=new yt(g,{});return this.expandSegment(n,w,r,g,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,l,h,g){const{matched:w,consumedSegments:D,lastChild:x,positionalParamSegments:N}=Ia(r,l,h);if(!w)return Xu(r);const P=this.applyRedirectCommands(D,l.redirectTo,N);return l.redirectTo.startsWith("/")?E(P):this.lineralizeSegments(l,P).pipe((0,bn.zg)(K=>this.expandSegment(n,r,a,K.concat(h.slice(x)),g,!1)))}matchSegmentAgainstRoute(n,r,a,l,h){if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,tt.of)(a._loadedConfig):this.configLoader.load(n.injector,a)).pipe((0,mt.U)(K=>(a._loadedConfig=K,new yt(l,{})))):(0,tt.of)(new yt(l,{}));const{matched:g,consumedSegments:w,lastChild:D}=Ia(r,a,l);if(!g)return Xu(r);const x=l.slice(D);return this.getChildConfig(n,a,l).pipe((0,bn.zg)(P=>{const K=P.module,Z=P.routes,{segmentGroup:we,slicedSegments:Ve}=Ao(r,w,x,Z),Be=new yt(we.segments,we.children);if(0===Ve.length&&Be.hasChildren())return this.expandChildren(K,Z,Be).pipe((0,mt.U)(Ft=>new yt(w,Ft)));if(0===Z.length&&0===Ve.length)return(0,tt.of)(new yt(w,{}));const _t=zn(a)===h;return this.expandSegment(K,Be,Z,Ve,_t?pt:h,!0).pipe((0,mt.U)(wt=>new yt(w.concat(wt.segments),wt.children)))}))}getChildConfig(n,r,a){return r.children?(0,tt.of)(new So(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,tt.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,a).pipe((0,bn.zg)(l=>{return l?this.configLoader.load(n.injector,r).pipe((0,mt.U)(h=>(r._loadedConfig=h,h))):(i=r,new vi.y(n=>n.error(Xi(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,tt.of)(new So([],n))}runCanLoadGuards(n,r,a){const l=r.canLoad;if(!l||0===l.length)return(0,tt.of)(!0);const h=l.map(g=>{const w=n.get(g);let D;if((i=w)&&Tn(i.canLoad))D=w.canLoad(r,a);else{if(!Tn(w))throw new Error("Invalid CanLoad guard");D=w(r,a)}var i;return Oi(D)});return(0,tt.of)(h).pipe(ss(),(0,Cr.b)(g=>{if(!Hs(g))return;const w=Xi(`Redirecting to "${this.urlSerializer.serialize(g)}"`);throw w.url=g,w}),(0,mt.U)(g=>!0===g))}lineralizeSegments(n,r){let a=[],l=r.root;for(;;){if(a=a.concat(l.segments),0===l.numberOfChildren)return(0,tt.of)(a);if(l.numberOfChildren>1||!l.children[pt])return p(n.redirectTo);l=l.children[pt]}}applyRedirectCommands(n,r,a){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,a)}applyRedirectCreatreUrlTree(n,r,a,l){const h=this.createSegmentGroup(n,r.root,a,l);return new ns(h,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const a={};return jn(n,(l,h)=>{if("string"==typeof l&&l.startsWith(":")){const w=l.substring(1);a[h]=r[w]}else a[h]=l}),a}createSegmentGroup(n,r,a,l){const h=this.createSegments(n,r.segments,a,l);let g={};return jn(r.children,(w,D)=>{g[D]=this.createSegmentGroup(n,w,a,l)}),new yt(h,g)}createSegments(n,r,a,l){return r.map(h=>h.path.startsWith(":")?this.findPosParam(n,h,l):this.findOrReturn(h,a))}findPosParam(n,r,a){const l=a[r.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return l}findOrReturn(n,r){let a=0;for(const l of r){if(l.path===n.path)return r.splice(a),l;a++}return n}}function z(i){const n={};for(const a of Object.keys(i.children)){const h=z(i.children[a]);(h.segments.length>0||h.hasChildren())&&(n[a]=h)}return function(i){if(1===i.numberOfChildren&&i.children[pt]){const n=i.children[pt];return new yt(i.segments.concat(n.segments),n.children)}return i}(new yt(i.segments,n))}class Le{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class $e{constructor(n,r){this.component=n,this.route=r}}function rt(i,n,r){const a=i._root;return os(a,n?n._root:null,r,[a.value])}function Kt(i,n,r){const a=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(a?a.module.injector:r).get(i)}function os(i,n,r,a,l={canDeactivateChecks:[],canActivateChecks:[]}){const h=Hu(n);return i.children.forEach(g=>{(function(i,n,r,a,l={canDeactivateChecks:[],canActivateChecks:[]}){const h=i.value,g=n?n.value:null,w=r?r.getContext(i.value.outlet):null;if(g&&h.routeConfig===g.routeConfig){const D=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!_a(i.url,n.url);case"pathParamsOrQueryParamsChange":return!_a(i.url,n.url)||!es(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(i,n)||!es(i.queryParams,n.queryParams);case"paramsChange":default:return!is(i,n)}}(g,h,h.routeConfig.runGuardsAndResolvers);D?l.canActivateChecks.push(new Le(a)):(h.data=g.data,h._resolvedData=g._resolvedData),os(i,n,h.component?w?w.children:null:r,a,l),D&&w&&w.outlet&&w.outlet.isActivated&&l.canDeactivateChecks.push(new $e(w.outlet.component,g))}else g&&xo(n,w,l),l.canActivateChecks.push(new Le(a)),os(i,null,h.component?w?w.children:null:r,a,l)})(g,h[g.value.outlet],r,a.concat([g.value]),l),delete h[g.value.outlet]}),jn(h,(g,w)=>xo(g,r.getContext(w),l)),l}function xo(i,n,r){const a=Hu(i),l=i.value;jn(a,(h,g)=>{xo(h,l.component?n?n.children.getContext(g):null:n,r)}),r.canDeactivateChecks.push(new $e(l.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,l))}class z0{}function t_(i){return new vi.y(n=>n.error(i))}class Gs{constructor(n,r,a,l,h,g){this.rootComponentType=n,this.config=r,this.urlTree=a,this.url=l,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=g}recognize(){const n=Ao(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,pt);if(null===r)return null;const a=new El([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},pt,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new oi(a,r),h=new Hp(this.url,l);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(n){const r=n.value,a=Gu(r,this.paramsInheritanceStrategy);r.params=Object.freeze(a.params),r.data=Object.freeze(a.data),n.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(n,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,a)}processChildren(n,r){const a=[];for(const h of Object.keys(r.children)){const g=r.children[h],w=qn(n,h),D=this.processSegmentGroup(w,g,h);if(null===D)return null;a.push(...D)}const l=i_(a);return l.sort((n,r)=>n.value.outlet===pt?-1:r.value.outlet===pt?1:n.value.outlet.localeCompare(r.value.outlet)),l}processSegment(n,r,a,l){for(const h of n){const g=this.processSegmentAgainstRoute(h,r,a,l);if(null!==g)return g}return Xp(r,a,l)?[]:null}processSegmentAgainstRoute(n,r,a,l){if(n.redirectTo||!xl(n,r,a,l))return null;let h,g=[],w=[];if("**"===n.path){const Z=a.length>0?gl(a).parameters:{};h=new El(a,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sg(n),zn(n),n.component,n,s_(r),o_(r)+a.length,og(n))}else{const Z=Ia(r,n,a);if(!Z.matched)return null;g=Z.consumedSegments,w=a.slice(Z.lastChild),h=new El(g,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sg(n),zn(n),n.component,n,s_(r),o_(r)+g.length,og(n))}const D=(i=n).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:x,slicedSegments:N}=Ao(r,g,w,D.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);var i;if(0===N.length&&x.hasChildren()){const Z=this.processChildren(D,x);return null===Z?null:[new oi(h,Z)]}if(0===D.length&&0===N.length)return[new oi(h,[])];const P=zn(n)===l,K=this.processSegment(D,x,N,P?pt:l);return null===K?null:[new oi(h,K)]}}function FC(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function i_(i){const n=[],r=new Set;for(const a of i){if(!FC(a)){n.push(a);continue}const l=n.find(h=>a.value.routeConfig===h.value.routeConfig);void 0!==l?(l.children.push(...a.children),r.add(l)):n.push(a)}for(const a of r){const l=i_(a.children);n.push(new oi(a.value,l))}return n.filter(a=>!r.has(a))}function s_(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function o_(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function sg(i){return i.data||{}}function og(i){return i.resolve||{}}function u_(i){return _n(n=>{const r=i(n);return r?(0,yn.D)(r).pipe((0,mt.U)(()=>n)):(0,tt.of)(n)})}class UC extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const l_=new I.OlP("ROUTES");class Z0{constructor(n,r,a,l){this.loader=n,this.compiler=r,this.onLoadStartListener=a,this.onLoadEndListener=l}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const l=this.loadModuleFactory(r.loadChildren).pipe((0,mt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);const g=h.create(n);return new So(ma(g.injector.get(l_,void 0,I.XFs.Self|I.XFs.Optional)).map(Bn),g)}),Ms(h=>{throw r._loader$=void 0,h}));return r._loader$=new la.c(l,()=>new br.xQ).pipe((0,B0.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,yn.D)(this.loader.load(n)):Oi(n()).pipe((0,bn.zg)(r=>r instanceof I.YKP?(0,tt.of)(r):(0,yn.D)(this.compiler.compileModuleAsync(r))))}}class jC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ml,this.attachRef=null}}class Ml{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new jC,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class d_{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function Q0(i){throw i}function h_(i,n,r){return n.parse("/")}function J0(i,n){return(0,tt.of)(null)}const BC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hr=(()=>{class i{constructor(r,a,l,h,g,w,D,x){this.rootComponentType=r,this.urlSerializer=a,this.rootContexts=l,this.location=h,this.config=x,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new br.xQ,this.errorHandler=Q0,this.malformedUriErrorHandler=h_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:J0,afterPreactivation:J0},this.urlHandlingStrategy=new d_,this.routeReuseStrategy=new UC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=g.get(I.h0i),this.console=g.get(I.c2e);const K=g.get(I.R0b);this.isNgZoneEnabled=K instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(x),this.currentUrlTree=new ns(new yt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Z0(w,D,Z=>this.triggerEvent(new Fy(Z)),Z=>this.triggerEvent(new Fs(Z))),this.routerState=vl(this.currentUrlTree,this.rootComponentType),this.transitions=new dr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const a=this.events;return r.pipe(Ei(l=>0!==l.id),(0,mt.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),_n(l=>{let h=!1,g=!1;return(0,tt.of)(l).pipe((0,Cr.b)(w=>{this.currentNavigation={id:w.id,initialUrl:w.currentRawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_n(w=>{const D=!this.navigated||w.extractedUrl.toString()!==this.browserUrlTree.toString(),x=("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl);if(Uh(w.source)&&(this.browserUrlTree=w.rawUrl),x)return(0,tt.of)(w).pipe(_n(N=>{const P=this.transitions.getValue();return a.next(new pa(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),P!==this.transitions.getValue()?hr.E:Promise.resolve(N)}),function(i,n,r,a){return _n(l=>function(i,n,r,a,l){return new A(i,n,r,a,l).apply()}(i,n,r,l.extractedUrl,a).pipe((0,mt.U)(h=>Object.assign(Object.assign({},l),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Cr.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function(i,n,r,a,l){return(0,bn.zg)(h=>function(i,n,r,a,l="emptyOnly",h="legacy"){try{const g=new Gs(i,n,r,a,l,h).recognize();return null===g?t_(new z0):(0,tt.of)(g)}catch(g){return t_(g)}}(i,n,h.urlAfterRedirects,r(h.urlAfterRedirects),a,l).pipe((0,mt.U)(g=>Object.assign(Object.assign({},h),{targetSnapshot:g}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Cr.b)(N=>{"eager"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(N.urlAfterRedirects,N),this.browserUrlTree=N.urlAfterRedirects);const P=new Eh(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);a.next(P)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:K,source:Z,restoredState:we,extras:Ve}=w,Be=new pa(P,this.serializeUrl(K),Z,we);a.next(Be);const _t=vl(K,this.rootComponentType).snapshot;return(0,tt.of)(Object.assign(Object.assign({},w),{targetSnapshot:_t,urlAfterRedirects:K,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=w.rawUrl,this.browserUrlTree=w.urlAfterRedirects,w.resolve(null),hr.E}),u_(w=>{const{targetSnapshot:D,id:x,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:K,replaceUrl:Z}}=w;return this.hooks.beforePreactivation(D,{navigationId:x,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!K,replaceUrl:!!Z})}),(0,Cr.b)(w=>{const D=new Ly(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),(0,mt.U)(w=>Object.assign(Object.assign({},w),{guards:rt(w.targetSnapshot,w.currentSnapshot,this.rootContexts)})),function(i,n){return(0,bn.zg)(r=>{const{targetSnapshot:a,currentSnapshot:l,guards:{canActivateChecks:h,canDeactivateChecks:g}}=r;return 0===g.length&&0===h.length?(0,tt.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,a){return(0,yn.D)(i).pipe((0,bn.zg)(l=>function(i,n,r,a,l){const h=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!h||0===h.length)return(0,tt.of)(!0);const g=h.map(w=>{const D=Kt(w,n,l);let x;if(function(i){return i&&Tn(i.canDeactivate)}(D))x=Oi(D.canDeactivate(i,n,r,a));else{if(!Tn(D))throw new Error("Invalid CanDeactivate guard");x=Oi(D(i,n,r,a))}return x.pipe(wo())});return(0,tt.of)(g).pipe(ss())}(l.component,l.route,r,n,a)),wo(l=>!0!==l,!0))}(g,a,l,i).pipe((0,bn.zg)(w=>w&&function(i){return"boolean"==typeof i}(w)?function(i,n,r,a){return(0,yn.D)(n).pipe(ll(l=>Ru(function(i,n){return null!==i&&n&&n(new wh(i)),(0,tt.of)(!0)}(l.route.parent,a),function(i,n){return null!==i&&n&&n(new fl(i)),(0,tt.of)(!0)}(l.route,a),function(i,n,r){const a=n[n.length-1],h=n.slice(0,n.length-1).reverse().map(g=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(g)).filter(g=>null!==g).map(g=>Eo(()=>{const w=g.guards.map(D=>{const x=Kt(D,g.node,r);let N;if(function(i){return i&&Tn(i.canActivateChild)}(x))N=Oi(x.canActivateChild(a,i));else{if(!Tn(x))throw new Error("Invalid CanActivateChild guard");N=Oi(x(a,i))}return N.pipe(wo())});return(0,tt.of)(w).pipe(ss())}));return(0,tt.of)(h).pipe(ss())}(i,l.path,r),function(i,n,r){const a=n.routeConfig?n.routeConfig.canActivate:null;if(!a||0===a.length)return(0,tt.of)(!0);const l=a.map(h=>Eo(()=>{const g=Kt(h,n,r);let w;if(function(i){return i&&Tn(i.canActivate)}(g))w=Oi(g.canActivate(n,i));else{if(!Tn(g))throw new Error("Invalid CanActivate guard");w=Oi(g(n,i))}return w.pipe(wo())}));return(0,tt.of)(l).pipe(ss())}(i,l.route,r))),wo(l=>!0!==l,!0))}(a,h,i,n):(0,tt.of)(w)),(0,mt.U)(w=>Object.assign(Object.assign({},r),{guardsResult:w})))})}(this.ngModule.injector,w=>this.triggerEvent(w)),(0,Cr.b)(w=>{if(Hs(w.guardsResult)){const x=Xi(`Redirecting to "${this.serializeUrl(w.guardsResult)}"`);throw x.url=w.guardsResult,x}const D=new Lu(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.triggerEvent(D)}),Ei(w=>!!w.guardsResult||(this.restoreHistory(w),this.cancelNavigationTransition(w,""),!1)),u_(w=>{if(w.guards.canActivateChecks.length)return(0,tt.of)(w).pipe((0,Cr.b)(D=>{const x=new Fu(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(x)}),_n(D=>{let x=!1;return(0,tt.of)(D).pipe(function(i,n){return(0,bn.zg)(r=>{const{targetSnapshot:a,guards:{canActivateChecks:l}}=r;if(!l.length)return(0,tt.of)(r);let h=0;return(0,yn.D)(l).pipe(ll(g=>function(i,n,r,a){return function(i,n,r,a){const l=Object.keys(i);if(0===l.length)return(0,tt.of)({});const h={};return(0,yn.D)(l).pipe((0,bn.zg)(g=>function(i,n,r,a){const l=Kt(i,n,a);return Oi(l.resolve?l.resolve(n,r):l(n,r))}(i[g],n,r,a).pipe((0,Cr.b)(w=>{h[g]=w}))),Cn(1),(0,bn.zg)(()=>Object.keys(h).length===l.length?(0,tt.of)(h):hr.E))}(i._resolve,i,n,a).pipe((0,mt.U)(h=>(i._resolvedData=h,i.data=Object.assign(Object.assign({},i.data),Gu(i,r).resolve),null)))}(g.route,a,i,n)),(0,Cr.b)(()=>h++),Cn(1),(0,bn.zg)(g=>h===l.length?(0,tt.of)(r):hr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Cr.b)({next:()=>x=!0,complete:()=>{x||(this.restoreHistory(D),this.cancelNavigationTransition(D,"At least one route resolver didn't emit any value."))}}))}),(0,Cr.b)(D=>{const x=new hl(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(x)}))}),u_(w=>{const{targetSnapshot:D,id:x,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:K,replaceUrl:Z}}=w;return this.hooks.afterPreactivation(D,{navigationId:x,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!K,replaceUrl:!!Z})}),(0,mt.U)(w=>{const D=function(i,n,r){const a=$r(i,n._root,r?r._root:void 0);return new $p(a,n)}(this.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return Object.assign(Object.assign({},w),{targetRouterState:D})}),(0,Cr.b)(w=>{this.currentUrlTree=w.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl),this.routerState=w.targetRouterState,"deferred"===this.urlUpdateStrategy&&(w.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,w),this.browserUrlTree=w.urlAfterRedirects)}),((i,n,r)=>(0,mt.U)(a=>(new tn(n,a.targetRouterState,a.currentRouterState,r).activate(i),a)))(this.rootContexts,this.routeReuseStrategy,w=>this.triggerEvent(w)),(0,Cr.b)({next(){h=!0},complete(){h=!0}}),function(i){return n=>n.lift(new ku(i))}(()=>{if(!h&&!g){const w=`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(l),this.cancelNavigationTransition(l,w)):this.cancelNavigationTransition(l,w)}this.currentNavigation=null}),Ms(w=>{if(g=!0,function(i){return i&&i[Io]}(w)){const D=Hs(w.url);D||(this.navigated=!0,this.restoreHistory(l,!0));const x=new Fp(l.id,this.serializeUrl(l.extractedUrl),w.message);a.next(x),D?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(w.url,this.rawUrlTree),P={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Uh(l.source)};this.scheduleNavigation(N,"imperative",null,P,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const D=new ky(l.id,this.serializeUrl(l.extractedUrl),w);a.next(D);try{l.resolve(this.errorHandler(w))}catch(x){l.reject(x)}}return hr.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const a=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,a)&&setTimeout(()=>{const{source:l,state:h,urlTree:g}=a,w={replaceUrl:!0};if(h){const D=Object.assign({},h);delete D.navigationId,delete D.\u0275routerPageId,0!==Object.keys(D).length&&(w.state=D)}this.scheduleNavigation(g,l,h,w)},0),this.lastLocationChangeInfo=a}))}extractLocationChangeInfoFromEvent(r){var a;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(a=r.state)||void 0===a?void 0:a.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,a){if(!r)return!0;const l=a.urlTree.toString()===r.urlTree.toString();return a.transitionId!==r.transitionId||!l||!("hashchange"===a.source&&"popstate"===r.source||"popstate"===a.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){Yu(r),this.config=r.map(Bn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,a={}){const{relativeTo:l,queryParams:h,fragment:g,queryParamsHandling:w,preserveFragment:D}=a,x=l||this.routerState.root,N=D?this.currentUrlTree.fragment:g;let P=null;switch(w){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=h||null}return null!==P&&(P=this.removeEmptyProps(P)),function(i,n,r,a,l){if(0===r.length)return qp(n.root,n.root,n,a,l);const h=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Wu(!0,0,i);let n=0,r=!1;const a=i.reduce((l,h,g)=>{if("object"==typeof h&&null!=h){if(h.outlets){const w={};return jn(h.outlets,(D,x)=>{w[x]="string"==typeof D?D.split("/"):D}),[...l,{outlets:w}]}if(h.segmentPath)return[...l,h.segmentPath]}return"string"!=typeof h?[...l,h]:0===g?(h.split("/").forEach((w,D)=>{0==D&&"."===w||(0==D&&""===w?r=!0:".."===w?n++:""!=w&&l.push(w))}),l):[...l,h]},[]);return new Wu(r,n,a)}(r);if(h.toRoot())return qp(n.root,new yt([],{}),n,a,l);const g=function(i,n,r){if(i.isAbsolute)return new Kp(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const h=r.snapshot._urlSegment;return new Kp(h,h===n.root,0)}const a=wa(i.commands[0])?0:1;return function(i,n,r){let a=i,l=n,h=r;for(;h>l;){if(h-=l,a=a.parent,!a)throw new Error("Invalid number of '../'");l=a.segments.length}return new Kp(a,!1,l-h)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+a,i.numberOfDoubleDots)}(h,n,i),w=g.processChildren?zu(g.segmentGroup,g.index,h.commands):Yp(g.segmentGroup,g.index,h.commands);return qp(g.segmentGroup,w,n,a,l)}(x,this.currentUrlTree,r,P,null!=N?N:null)}navigateByUrl(r,a={skipLocationChange:!1}){const l=Hs(r)?r:this.parseUrl(r),h=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,a)}navigate(r,a={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,a),a)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let a;try{a=this.urlSerializer.parse(r)}catch(l){a=this.malformedUriErrorHandler(l,this.urlSerializer,r)}return a}isActive(r,a){let l;if(l=!0===a?Object.assign({},BC):!1===a?Object.assign({},X0):a,Hs(r))return ts(this.currentUrlTree,r,l);const h=this.parseUrl(r);return ts(this.currentUrlTree,h,l)}removeEmptyProps(r){return Object.keys(r).reduce((a,l)=>{const h=r[l];return null!=h&&(a[l]=h),a},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new ga(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,a,l,h,g){var w,D;if(this.disposed)return Promise.resolve(!1);const x=this.getTransition(),N=Uh(a)&&x&&!Uh(x.source),Z=(this.lastSuccessfulId===x.id||this.currentNavigation?x.rawUrl:x.urlAfterRedirects).toString()===r.toString();if(N&&Z)return Promise.resolve(!0);let we,Ve,Be;g?(we=g.resolve,Ve=g.reject,Be=g.promise):Be=new Promise((wt,Ft)=>{we=wt,Ve=Ft});const _t=++this.navigationId;let xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),xt=l&&l.\u0275routerPageId?l.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(w=this.browserPageId)&&void 0!==w?w:0:(null!==(D=this.browserPageId)&&void 0!==D?D:0)+1):xt=0,this.setTransition({id:_t,targetPageId:xt,source:a,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:h,resolve:we,reject:Ve,promise:Be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Be.catch(wt=>Promise.reject(wt))}setBrowserUrl(r,a){const l=this.urlSerializer.serialize(r),h=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(l)||a.extras.replaceUrl?this.location.replaceState(l,"",h):this.location.go(l,"",h)}restoreHistory(r,a=!1){var l,h;if("computed"===this.canceledNavigationResolution){const g=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===g?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===g&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(g)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,a){const l=new Fp(r.id,this.serializeUrl(r.extractedUrl),a);this.triggerEvent(l),r.resolve(!1)}generateNgRouterState(r,a){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:a}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(I.DyG),I.LFG(yl),I.LFG(Ml),I.LFG(Fe),I.LFG(I.zs3),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(void 0))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();function Uh(i){return"imperative"!==i}let ug=(()=>{class i{constructor(r,a,l){this.router=r,this.route=a,this.locationStrategy=l,this.commands=[],this.onChanges=new br.xQ,this.subscription=r.events.subscribe(h=>{h instanceof ga&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,a,l,h,g){if(0!==r||a||l||h||g||"string"==typeof this.target&&"_self"!=this.target)return!0;const w={skipLocationChange:No(this.skipLocationChange),replaceUrl:No(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,w),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:No(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(I.Y36(Hr),I.Y36(Ea),I.Y36(ee))},i.\u0275dir=I.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,a){1&r&&I.NdJ("click",function(h){return a.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&r&&(I.Ikx("href",a.href,I.LSH),I.uIk("target",a.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[I.TTD]}),i})();function No(i){return""===i||!!i}let cg=(()=>{class i{constructor(r,a,l,h,g){this.parentContexts=r,this.location=a,this.resolver=l,this.changeDetector=g,this.activated=null,this._activatedRoute=null,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.name=h||pt,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,a){this.activated=r,this._activatedRoute=a,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const g=(a=a||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),w=this.parentContexts.getOrCreateContext(this.name).children,D=new tw(r,w,this.location.injector);this.activated=this.location.createComponent(g,this.location.length,D),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(I.Y36(Ml),I.Y36(I.s_b),I.Y36(I._Vd),I.$8M("name"),I.Y36(I.sBO))},i.\u0275dir=I.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class tw{constructor(n,r,a){this.route=n,this.childContexts=r,this.parent=a}get(n,r){return n===Ea?this.route:n===Ml?this.childContexts:this.parent.get(n,r)}}class lg{}class jh{preload(n,r){return(0,tt.of)(null)}}let Bh=(()=>{class i{constructor(r,a,l,h,g){this.router=r,this.injector=h,this.preloadingStrategy=g,this.loader=new Z0(a,l,x=>r.triggerEvent(new Fy(x)),x=>r.triggerEvent(new Fs(x)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ei(r=>r instanceof ga),ll(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(I.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,a){const l=[];for(const h of a)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const g=h._loadedConfig;l.push(this.processRoutes(g.module,g.routes))}else h.loadChildren&&!h.canLoad?l.push(this.preloadConfig(r,h)):h.children&&l.push(this.processRoutes(r,h.children));return(0,yn.D)(l).pipe((0,ul.J)(),(0,mt.U)(h=>{}))}preloadConfig(r,a){return this.preloadingStrategy.preload(a,()=>(a._loadedConfig?(0,tt.of)(a._loadedConfig):this.loader.load(r.injector,a)).pipe((0,bn.zg)(h=>(a._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(Hr),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(I.zs3),I.LFG(lg))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})(),dg=(()=>{class i{constructor(r,a,l={}){this.router=r,this.viewportScroller=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof pa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ga&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof bh&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,a){this.router.triggerEvent(new bh(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(Hr),I.LFG(du),I.LFG(void 0))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();const Ca=new I.OlP("ROUTER_CONFIGURATION"),hg=new I.OlP("ROUTER_FORROOT_GUARD"),HC=[Fe,{provide:yl,useClass:$y},{provide:Hr,useFactory:function(i,n,r,a,l,h,g,w={},D,x){const N=new Hr(null,i,n,r,a,l,h,ma(g));return D&&(N.urlHandlingStrategy=D),x&&(N.routeReuseStrategy=x),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(w,N),w.enableTracing&&N.events.subscribe(P=>{var K,Z;null===(K=console.group)||void 0===K||K.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(Z=console.groupEnd)||void 0===Z||Z.call(console)}),N},deps:[yl,Ml,Fe,I.zs3,I.v3s,I.Sil,l_,Ca,[class{},new I.FiY],[class{},new I.FiY]]},Ml,{provide:Ea,useFactory:function(i){return i.routerState.root},deps:[Hr]},{provide:I.v3s,useClass:I.EAV},Bh,jh,class{preload(n,r){return r().pipe(Ms(()=>(0,tt.of)(null)))}},{provide:Ca,useValue:{enableTracing:!1}}];function iw(){return new I.PXZ("Router",Hr)}let sw=(()=>{class i{constructor(r,a){}static forRoot(r,a){return{ngModule:i,providers:[HC,p_(r),{provide:hg,useFactory:f_,deps:[[Hr,new I.FiY,new I.tp0]]},{provide:Ca,useValue:a||{}},{provide:ee,useFactory:ow,deps:[pe,[new I.tBr(Se),new I.FiY],Ca]},{provide:dg,useFactory:GC,deps:[Hr,du,Ca]},{provide:lg,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:jh},{provide:I.PXZ,multi:!0,useFactory:iw},[fg,{provide:I.ip1,multi:!0,useFactory:zC,deps:[fg]},{provide:ki,useFactory:qC,deps:[fg]},{provide:I.tb,multi:!0,useExisting:ki}]]}}static forChild(r){return{ngModule:i,providers:[p_(r)]}}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(hg,8),I.LFG(Hr,8))},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({}),i})();function GC(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new dg(i,n,r)}function ow(i,n,r={}){return r.useHash?new Pe(i,n):new xe(i,n)}function f_(i){return"guarded"}function p_(i){return[{provide:I.deG,multi:!0,useValue:i},{provide:l_,multi:!0,useValue:i}]}let fg=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new br.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let a=null;const l=new Promise(w=>a=w),h=this.injector.get(Hr),g=this.injector.get(Ca);return"disabled"===g.initialNavigation?(h.setUpLocationChangeListener(),a(!0)):"enabled"===g.initialNavigation||"enabledBlocking"===g.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?(0,tt.of)(null):(this.initNavigation=!0,a(!0),this.resultOfPreactivationDone),h.initialNavigation()):a(!0),l})}bootstrapListener(r){const a=this.injector.get(Ca),l=this.injector.get(Bh),h=this.injector.get(dg),g=this.injector.get(Hr),w=this.injector.get(I.z2F);r===w.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&g.initialNavigation(),l.setUpPreloading(),h.init(),g.resetRootComponentType(w.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(I.zs3))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac}),i})();function zC(i){return i.appInitializer.bind(i)}function qC(i){return i.bootstrapListener.bind(i)}const ki=new I.OlP("Router Initializer"),YC=[{path:"home",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["app-home"]],decls:2,vars:0,template:function(r,a){1&r&&(I.TgZ(0,"p"),I._uU(1,"home works!"),I.qZA())},styles:[""]}),i})()},{path:"login",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["app-login"]],decls:18,vars:0,consts:[[1,"form-signin"],["src","../assets/brand/bootstrap-solid.svg","alt","","width","72","height","72",1,"mb-4"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","placeholder","Email address","required","","autofocus","",1,"form-control"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","placeholder","Password","required","",1,"form-control"],[1,"checkbox","mb-3"],["type","checkbox","value","remember-me"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block"],[1,"mt-5","mb-3","text-muted"]],template:function(r,a){1&r&&(I.TgZ(0,"form",0),I._UZ(1,"img",1),I.TgZ(2,"h1",2),I._uU(3,"Please sign in"),I.qZA(),I.TgZ(4,"label",3),I._uU(5,"Email address"),I.qZA(),I._UZ(6,"input",4),I.TgZ(7,"label",5),I._uU(8,"Password"),I.qZA(),I._UZ(9,"input",6),I.TgZ(10,"div",7),I.TgZ(11,"label"),I._UZ(12,"input",8),I._uU(13," Remember me "),I.qZA(),I.qZA(),I.TgZ(14,"button",9),I._uU(15,"Sign in"),I.qZA(),I.TgZ(16,"p",10),I._uU(17,"\xa9 2017-2021"),I.qZA(),I.qZA())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px;font-size:16px}.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),i})()},{path:"quiensoy",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["app-quien-soy"]],decls:2,vars:0,template:function(r,a){1&r&&(I.TgZ(0,"p"),I._uU(1,"quien-soy works!"),I.qZA())},styles:[""]}),i})()},{path:"",redirectTo:"home",pathMatch:"full"}];let uw=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({imports:[[sw.forRoot(YC)],sw]}),i})(),QC=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["app-menu-principal"]],decls:8,vars:0,consts:[[1,"site-header","navbar-expand-md","navbar-dark","bg-dark","mb-4"],[1,"container","d-flex","flex-column","flex-md-row","justify-content-between"],["routerLink","quiensoy",1,"nav-item","nav-link","py-2","d-none","d-md-inline-block"],["routerLink","home",1,"nav-item","nav-link","py-2","d-none","d-md-inline-block"],["routerLink","login",1,"nav-item","nav-link","py-2","d-none","d-md-inline-block"]],template:function(r,a){1&r&&(I.TgZ(0,"nav",0),I.TgZ(1,"div",1),I.TgZ(2,"a",2),I._uU(3,"Quien Soy"),I.qZA(),I.TgZ(4,"a",3),I._uU(5,"Home"),I.qZA(),I.TgZ(6,"a",4),I._uU(7,"Login"),I.qZA(),I.qZA(),I.qZA())},directives:[ug],styles:["body[_ngcontent-%COMP%]{min-height:75rem}"]}),i})(),JC=(()=>{class i{constructor(){this.title="sala-de-juegos"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=I.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(r,a){1&r&&(I._UZ(0,"app-menu-principal"),I._UZ(1,"router-outlet"))},directives:[QC,cg],styles:[""]}),i})();var Oo=k(8939),ft=k(3637),pr=k(9126);function pg(){return i=>i.lift(new gg)}class gg{call(n,r){return r.subscribe(new as(n))}}class as extends _i.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}class XC{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new g_(n,this.compare,this.keySelector))}}class g_ extends _i.L{constructor(n,r,a){super(n),this.keySelector=a,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:l}=this;r=l?l(n):n}catch(l){return this.destination.error(l)}let a=!1;if(this.hasKey)try{const{compare:l}=this;a=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;a||(this.key=r,this.destination.next(n))}}k(6780);var m_=k(4486),Ee=k(8239),Hh=k(5452),eD=k(6034),Ta=k(300),Ut=k(4685),us=function(i,n){return(us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])})(i,n)};function Gh(i){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&i[n],a=0;if(r)return r.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}var He,y_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},__=__||{},lt=y_||self;function v_(){}function E_(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function yg(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var _g="closure_uid_"+(1e9*Math.random()>>>0),tD=0;function w_(i,n,r){return i.call.apply(i.bind,arguments)}function QS(i,n,r){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,a),i.apply(n,l)}}return function(){return i.apply(n,arguments)}}function Dr(i,n,r){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w_:QS).apply(null,arguments)}function I_(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Tr(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(a,l,h){for(var g=Array(arguments.length-2),w=2;w<arguments.length;w++)g[w-2]=arguments[w];return n.prototype[l].apply(a,g)}}function tc(){this.s=this.s,this.o=this.o}var XS={};tc.prototype.s=!1,tc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,_g)&&i[_g]||(i[_g]=++tD)}(this);delete XS[i]}},tc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nD=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(var r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},rD=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){for(var a=i.length,l="string"==typeof i?i.split(""):i,h=0;h<a;h++)h in l&&n.call(r,l[h],h,i)};function iD(i){return Array.prototype.concat.apply([],arguments)}function Ws(i){var n=i.length;if(0<n){for(var r=Array(n),a=0;a<n;a++)r[a]=i[a];return r}return[]}function Pl(i){return/^[\s\xa0]*$/.test(i)}var Ar,dw=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Sr(i,n){return-1!=i.indexOf(n)}function Wh(i,n){return i<n?-1:i>n?1:0}e:{var vg=lt.navigator;if(vg){var hw=vg.userAgent;if(hw){Ar=hw;break e}}Ar=""}function zs(i,n,r){for(var a in i)n.call(r,i[a],a,i)}function b_(i){var n={};for(var r in i)n[r]=i[r];return n}var fw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sD(i,n){for(var r,a,l=1;l<arguments.length;l++){for(r in a=arguments[l])i[r]=a[r];for(var h=0;h<fw.length;h++)r=fw[h],Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}}function zh(i){return zh[" "](i),i}zh[" "]=v_;var Sa,i,pw=Sr(Ar,"Opera"),kl=Sr(Ar,"Trident")||Sr(Ar,"MSIE"),gw=Sr(Ar,"Edge"),nc=gw||kl,rc=Sr(Ar,"Gecko")&&!(Sr(Ar.toLowerCase(),"webkit")&&!Sr(Ar,"Edge"))&&!(Sr(Ar,"Trident")||Sr(Ar,"MSIE"))&&!Sr(Ar,"Edge"),C_=Sr(Ar.toLowerCase(),"webkit")&&!Sr(Ar,"Edge");function ic(){var i=lt.document;return i?i.documentMode:void 0}e:{var Aa="",D_=(i=Ar,rc?/rv:([^\);]+)(\)|;)/.exec(i):gw?/Edge\/([\d\.]+)/.exec(i):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):C_?/WebKit\/(\S+)/.exec(i):pw?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(D_&&(Aa=D_?D_[1]:""),kl){var Eg=ic();if(null!=Eg&&Eg>parseFloat(Aa)){Sa=String(Eg);break e}}Sa=Aa}var mw={};function T_(){return n=mw,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){for(var i=0,n=dw(String(Sa)).split("."),r=dw("9").split("."),a=Math.max(n.length,r.length),l=0;0==i&&l<a;l++){var h=n[l]||"",g=r[l]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==h[0].length&&0==g[0].length)break;i=Wh(0==h[1].length?0:parseInt(h[1],10),0==g[1].length?0:parseInt(g[1],10))||Wh(0==h[2].length,0==g[2].length)||Wh(h[2],g[2]),h=h[3],g=g[3]}while(0==i)}return 0<=i}();var n}var wg=lt.document&&kl&&(ic()||parseInt(Sa,10))||void 0,aD=function(){if(!lt.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{lt.addEventListener("test",v_,n),lt.removeEventListener("test",v_,n)}catch(r){}return i}();function gr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Ig(i,n){if(gr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(rc){e:{try{zh(n.nodeName);var l=!0;break e}catch(h){}l=!1}l||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:yw[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ig.Z.h.call(this)}}gr.prototype.h=function(){this.defaultPrevented=!0},Tr(Ig,gr);var yw={2:"touch",3:"pen",4:"mouse"};Ig.prototype.h=function(){Ig.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ll="closure_listenable_"+(1e6*Math.random()|0),uD=0;function _w(i,n,r,a,l){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!a,this.ia=l,this.key=++uD,this.ca=this.fa=!1}function bg(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Cg(i){this.src=i,this.g={},this.h=0}function Gr(i,n){var r=n.type;if(r in i.g){var h,a=i.g[r],l=nD(a,n);(h=0<=l)&&Array.prototype.splice.call(a,l,1),h&&(bg(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function A_(i,n,r,a){for(var l=0;l<i.length;++l){var h=i[l];if(!h.ca&&h.listener==n&&h.capture==!!r&&h.ia==a)return l}return-1}Cg.prototype.add=function(i,n,r,a,l){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var g=A_(i,n,a,l);return-1<g?(n=i[g],r||(n.fa=!1)):((n=new _w(n,this.src,h,!!a,l)).fa=r,i.push(n)),n};var x_="closure_lm_"+(1e6*Math.random()|0),vw={};function cD(i,n,r,a,l){if(a&&a.once)return Ew(i,n,r,a,l);if(Array.isArray(n)){for(var h=0;h<n.length;h++)cD(i,n[h],r,a,l);return null}return r=O_(r),i&&i[Ll]?i.N(n,r,yg(a)?!!a.capture:!!a,l):R_(i,n,r,!1,a,l)}function R_(i,n,r,a,l,h){if(!n)throw Error("Invalid event type");var g=yg(l)?!!l.capture:!!l,w=N_(i);if(w||(i[x_]=w=new Cg(i)),(r=w.add(n,r,a,g,h)).proxy)return r;if(a=function(){var n=lD;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=a,a.src=i,a.listener=r,i.addEventListener)aD||(l=g),void 0===l&&(l=!1),i.addEventListener(n.toString(),a,l);else if(i.attachEvent)i.attachEvent(ww(n.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return r}function Ew(i,n,r,a,l){if(Array.isArray(n)){for(var h=0;h<n.length;h++)Ew(i,n[h],r,a,l);return null}return r=O_(r),i&&i[Ll]?i.O(n,r,yg(a)?!!a.capture:!!a,l):R_(i,n,r,!0,a,l)}function Dg(i,n,r,a,l){if(Array.isArray(n))for(var h=0;h<n.length;h++)Dg(i,n[h],r,a,l);else a=yg(a)?!!a.capture:!!a,r=O_(r),i&&i[Ll]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=A_(h=i.g[n],r,a,l))&&(bg(h[r]),Array.prototype.splice.call(h,r,1),0==h.length&&(delete i.g[n],i.h--))):i&&(i=N_(i))&&(n=i.g[n.toString()],i=-1,n&&(i=A_(n,r,a,l)),(r=-1<i?n[i]:null)&&Tg(r))}function Tg(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Ll])Gr(n.i,i);else{var r=i.type,a=i.proxy;n.removeEventListener?n.removeEventListener(r,a,i.capture):n.detachEvent?n.detachEvent(ww(r),a):n.addListener&&n.removeListener&&n.removeListener(a),(r=N_(n))?(Gr(r,i),0==r.h&&(r.src=null,n[x_]=null)):bg(i)}}}function ww(i){return i in vw?vw[i]:vw[i]="on"+i}function lD(i,n){if(i.ca)i=!0;else{n=new Ig(n,this);var r=i.listener,a=i.ia||i.src;i.fa&&Tg(i),i=r.call(a,n)}return i}function N_(i){return(i=i[x_])instanceof Cg?i:null}var Sg="__closure_events_fn_"+(1e9*Math.random()>>>0);function O_(i){return"function"==typeof i?i:(i[Sg]||(i[Sg]=function(n){return i.handleEvent(n)}),i[Sg])}function Kn(){tc.call(this),this.i=new Cg(this),this.P=this,this.I=null}function mr(i,n){var r,a=i.I;if(a)for(r=[];a;a=a.I)r.push(a);if(i=i.P,a=n.type||n,"string"==typeof n)n=new gr(n,i);else if(n instanceof gr)n.target=n.target||i;else{var l=n;sD(n=new gr(a,i),l)}if(l=!0,r)for(var h=r.length-1;0<=h;h--){var g=n.g=r[h];l=Ag(g,a,!0,n)&&l}if(l=Ag(g=n.g=i,a,!0,n)&&l,l=Ag(g,a,!1,n)&&l,r)for(h=0;h<r.length;h++)l=Ag(g=n.g=r[h],a,!1,n)&&l}function Ag(i,n,r,a){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var l=!0,h=0;h<n.length;++h){var g=n[h];if(g&&!g.ca&&g.capture==r){var w=g.listener,D=g.ia||g.src;g.fa&&Gr(i.i,g),l=!1!==w.call(D,a)&&l}}return l&&!a.defaultPrevented}Tr(Kn,tc),Kn.prototype[Ll]=!0,Kn.prototype.removeEventListener=function(i,n,r,a){Dg(this,i,n,r,a)},Kn.prototype.M=function(){if(Kn.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],a=0;a<r.length;a++)bg(r[a]);delete i.g[n],i.h--}}this.I=null},Kn.prototype.N=function(i,n,r,a){return this.i.add(String(i),n,!1,r,a)},Kn.prototype.O=function(i,n,r,a){return this.i.add(String(i),n,!0,r,a)};var xg=lt.JSON.stringify;function Iw(){var i=Dw,n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var bw,dD=function(){function i(){this.h=this.g=null}return i.prototype.add=function(n,r){var a=cs.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a},i}(),cs=new(function(){function i(n,r){this.i=n,this.j=r,this.h=0,this.g=null}return i.prototype.get=function(){var n;return 0<this.h?(this.h--,this.g=(n=this.g).next,n.next=null):n=this.i(),n},i}())(function(){return new M_},function(i){return i.reset()}),M_=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(n,r){this.h=n,this.g=r,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function hD(i){lt.setTimeout(function(){throw i},0)}function P_(i,n){bw||function(){var i=lt.Promise.resolve(void 0);bw=function(){i.then(fD)}}(),k_||(bw(),k_=!0),Dw.add(i,n)}var k_=!1,Dw=new dD;function fD(){for(var i;i=Iw();){try{i.h.call(i.g)}catch(r){hD(r)}var n=cs;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}k_=!1}function Fl(i,n){Kn.call(this),this.h=i||1,this.g=n||lt,this.j=Dr(this.kb,this),this.l=Date.now()}function L_(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function F_(i,n,r){if("function"==typeof i)r&&(i=Dr(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Dr(i.handleEvent,i)}return 2147483647<Number(n)?-1:lt.setTimeout(i,n||0)}function Kh(i){i.g=F_(function(){i.g=null,i.i&&(i.i=!1,Kh(i))},i.j);var n=i.h;i.h=null,i.m.apply(null,n)}Tr(Fl,Kn),(He=Fl.prototype).da=!1,He.S=null,He.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mr(this,"tick"),this.da&&(L_(this),this.start()))}},He.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.M=function(){Fl.Z.M.call(this),L_(this),delete this.g};var V_=function(i){function n(r,a){var l=i.call(this)||this;return l.m=r,l.j=a,l.h=null,l.i=!1,l.g=null,l}return function(i,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=i}us(i,n),i.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,i),n.prototype.l=function(r){this.h=arguments,this.g?this.i=!0:Kh(this)},n.prototype.M=function(){i.prototype.M.call(this),this.g&&(lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},n}(tc);function Zh(i){tc.call(this),this.h=i,this.g={}}Tr(Zh,tc);var Rg=[];function Ng(i,n,r,a){Array.isArray(r)||(r&&(Rg[0]=r.toString()),r=Rg);for(var l=0;l<r.length;l++){var h=cD(n,r[l],a||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function U_(i){zs(i.g,function(n,r){this.g.hasOwnProperty(r)&&Tg(n)},i),i.g={}}function Og(){this.g=!0}function Yh(i,n,r,a){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var a=r[i];if(!(2>a.length)){var l=a[1];if(Array.isArray(l)&&!(1>l.length)){var h=l[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var g=1;g<l.length;g++)l[g]=""}}}return xg(r)}catch(w){return n}}(i,r)+(a?" "+a:"")})}Zh.prototype.M=function(){Zh.Z.M.call(this),U_(this)},Zh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Og.prototype.Aa=function(){this.g=!1},Og.prototype.info=function(){};var xa={},B_=null;function Qh(){return B_=B_||new Kn}function $_(i){gr.call(this,xa.Ma,i)}function wi(i){var n=Qh();mr(n,new $_(n,i))}function Jh(i,n){gr.call(this,xa.STAT_EVENT,i),this.stat=n}function Wr(i){var n=Qh();mr(n,new Jh(n,i))}function Sw(i,n){gr.call(this,xa.Na,i),this.size=n}function Mg(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return lt.setTimeout(function(){i()},n)}xa.Ma="serverreachability",Tr($_,gr),xa.STAT_EVENT="statevent",Tr(Jh,gr),xa.Na="timingevent",Tr(Sw,gr);var Mo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},H_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sc(){}function Aw(){}sc.prototype.h=null;var kg,oc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Pg(){gr.call(this,"d")}function G_(){gr.call(this,"c")}function Lg(){}function ac(i,n,r,a){this.l=i,this.j=n,this.m=r,this.X=a||1,this.V=new Zh(this),this.P=mD,this.W=new Fl(i=nc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xw}function xw(){this.i=null,this.g="",this.h=!1}Tr(Pg,gr),Tr(G_,gr),Tr(Lg,sc),Lg.prototype.g=function(){return new XMLHttpRequest},Lg.prototype.i=function(){return{}},kg=new Lg;var mD=45e3,Fg={},Po={};function Vg(i,n,r){i.K=1,i.v=Hg(Lo(n)),i.s=r,i.U=!0,Rw(i,null)}function Rw(i,n){i.F=Date.now(),Xh(i),i.A=Lo(i.v);var r=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),kw(r.h,"t",a),i.C=0,r=i.l.H,i.h=new xw,i.g=Gw(i.l,r?n:null,!i.s),0<i.O&&(i.L=new V_(Dr(i.Ia,i,i.g),i.O)),Ng(i.V,i.g,"readystatechange",i.gb),n=i.H?b_(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),wi(1),function(i,n,r,a,l,h){i.info(function(){if(i.g)if(h)for(var g="",w=h.split("&"),D=0;D<w.length;D++){var x=w[D].split("=");if(1<x.length){var N=x[0];x=x[1];var P=N.split("_");g=2<=P.length&&"type"==P[1]?g+(N+"=")+x+"&":g+(N+"=redacted&")}}else g=null;else g=h;return"XMLHTTP REQ ("+a+") [attempt "+l+"]: "+n+"\n"+r+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Nw(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function uc(i,n,r){for(var l,a=!0;!i.I&&i.C<r.length;){if((l=yD(i,r))==Po){4==n&&(i.o=4,Wr(14),a=!1),Yh(i.j,i.m,null,"[Incomplete Response]");break}if(l==Fg){i.o=4,Wr(15),Yh(i.j,i.m,r,"[Invalid Chunk]"),a=!1;break}Yh(i.j,i.m,l,null),Bg(i,l)}Nw(i)&&l!=Po&&l!=Fg&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,Wr(16),a=!1),i.i=i.i&&a,a?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Yg(n),n.L=!0,Wr(11))):(Yh(i.j,i.m,r,"[Invalid Chunked Response]"),cc(i),jg(i))}function yD(i,n){var r=i.C,a=n.indexOf("\n",r);return-1==a?Po:(r=Number(n.substring(r,a)),isNaN(r)?Fg:(a+=1)+r>n.length?Po:(n=n.substr(a,r),i.C=a+r,n))}function Xh(i){i.Y=Date.now()+i.P,Ow(i,i.P)}function Ow(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Mg(Dr(i.eb,i),n)}function Ug(i){i.B&&(lt.clearTimeout(i.B),i.B=null)}function jg(i){0==i.l.G||i.I||ev(i.l,i)}function cc(i){Ug(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,L_(i.W),U_(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function Bg(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||Ii(r.i,i)))if(r.I=i.N,!i.J&&Ii(r.i,i)&&3==r.G){try{var a=r.Ca.g.parse(n)}catch(Be){a=null}if(Array.isArray(a)&&3==a.length){var l=a;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=Mg(Dr(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;hf(r),Vo(r)}Zg(r),Wr(18)}if(1>=ID(r.i)&&r.ka){try{r.ka()}catch(Be){}r.ka=void 0}}else Oa(r,11)}else if((i.J||r.g==i)&&hf(r),!Pl(n))for(l=r.Ca.g.parse(n),n=0;n<l.length;n++){var h=l[n];if(r.U=h[0],h=h[1],2==r.G)if("c"==h[0]){r.J=h[1],r.la=h[2];var g=h[3];null!=g&&(r.ma=g,r.h.info("VER="+r.ma));var w=h[4];null!=w&&(r.za=w,r.h.info("SVER="+r.za));var D=h[5];null!=D&&"number"==typeof D&&0<D&&(r.K=a=1.5*D,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;var x=i.g;if(x){var N=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(N){var P=a.i;!P.g&&(Sr(N,"spdy")||Sr(N,"quic")||Sr(N,"h2"))&&(P.j=P.l,P.g=new Set,P.h&&(Vw(P,P.h),P.h=null))}if(a.D){var K=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(a.sa=K,wn(a.F,a.D,K))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var Z=i;if((a=r).oa=rv(a,a.H?a.la:null,a.W),Z.J){bD(a.i,Z);var we=Z,Ve=a.K;Ve&&we.setTimeout(Ve),we.B&&(Ug(we),Xh(we)),a.g=Z}else gc(a);0<r.l.length&&Uo(r)}else"stop"!=h[0]&&"close"!=h[0]||Oa(r,7);else 3==r.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?Oa(r,7):df(r):"noop"!=h[0]&&r.j&&r.j.wa(h),r.A=0)}wi(4)}catch(Be){}}function ef(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(E_(i)||"string"==typeof i)rD(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(E_(i)||"string"==typeof i){r=[];for(var a=i.length,l=0;l<a;l++)r.push(l)}else for(l in r=[],a=0,i)r[a++]=l;l=(a=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(E_(i)){for(var n=[],r=i.length,a=0;a<r;a++)n.push(i[a]);return n}for(a in n=[],r=0,i)n[r++]=i[a];return n}(i)).length;for(var h=0;h<l;h++)n.call(void 0,a[h],r&&r[h],i)}}function tf(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof tf)for(r=i.T(),a=0;a<r.length;a++)this.set(r[a],i.get(r[a]));else for(a in i)this.set(a,i[a])}function ls(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var a=i.g[n];ko(i.h,a)&&(i.g[r++]=a),n++}i.g.length=r}if(i.i!=i.g.length){var l={};for(r=n=0;n<i.g.length;)ko(l,a=i.g[n])||(i.g[r++]=a,l[a]=1),n++;i.g.length=r}}function ko(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(He=ac.prototype).setTimeout=function(i){this.P=i},He.gb=function(i){i=i.target;var n=this.L;n&&3==tr(i)?n.l():this.Ia(i)},He.Ia=function(i){try{if(i==this.g)e:{var n=tr(this.g),r=this.g.Da(),a=this.g.ba();if(!(3>n)&&(3!=n||nc||this.g&&(this.h.h||this.g.ga()||Wl(this.g)))){this.I||4!=n||7==r||wi(8==r||0>=a?3:2),Ug(this);var l=this.g.ba();this.N=l;t:if(Nw(this)){var h=Wl(this.g);i="";var g=h.length,w=4==tr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cc(this),jg(this);var D="";break t}this.h.i=new lt.TextDecoder}for(r=0;r<g;r++)this.h.h=!0,i+=this.h.i.decode(h[r],{stream:w&&r==g-1});h.splice(0,g),this.h.g+=i,this.C=0,D=this.h.g}else D=this.g.ga();if(this.i=200==l,function(i,n,r,a,l,h,g){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+l+"]: "+n+"\n"+r+"\n"+h+" "+g})}(this.j,this.u,this.A,this.m,this.X,n,l),this.i){if(this.$&&!this.J){t:{if(this.g){var x,N=this.g;if((x=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pl(x)){var P=x;break t}}P=null}if(!(l=P)){this.i=!1,this.o=3,Wr(12),cc(this),jg(this);break e}Yh(this.j,this.m,l,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bg(this,l)}this.U?(uc(this,n,D),nc&&this.i&&3==n&&(Ng(this.V,this.W,"tick",this.fb),this.W.start())):(Yh(this.j,this.m,D,null),Bg(this,D)),4==n&&cc(this),this.i&&!this.I&&(4==n?ev(this.l,this):(this.i=!1,Xh(this)))}else 400==l&&0<D.indexOf("Unknown SID")?(this.o=3,Wr(12)):(this.o=0,Wr(13)),cc(this),jg(this)}}}catch(K){}},He.fb=function(){if(this.g){var i=tr(this.g),n=this.g.ga();this.C<n.length&&(Ug(this),uc(this,i,n),this.i&&4!=i&&Xh(this))}},He.cancel=function(){this.I=!0,cc(this)},He.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(wi(3),Wr(17)),cc(this),this.o=2,jg(this)):Ow(this,this.Y-i)},(He=tf.prototype).R=function(){ls(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},He.T=function(){return ls(this),this.g.concat()},He.get=function(i,n){return ko(this.h,i)?this.h[i]:n},He.set=function(i,n){ko(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},He.forEach=function(i,n){for(var r=this.T(),a=0;a<r.length;a++){var l=r[a],h=this.get(l);i.call(n,h,l,this)}};var $g=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lc(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof lc){this.g=void 0!==n?n:i.g,nf(this,i.j),this.s=i.s,rf(this,i.i),sf(this,i.m),this.l=i.l,n=i.h;var r=new Bl;r.i=n.i,n.g&&(r.g=new tf(n.g),r.h=n.h),W_(this,r),this.o=i.o}else i&&(r=String(i).match($g))?(this.g=!!n,nf(this,r[1]||"",!0),this.s=Ul(r[2]||""),rf(this,r[3]||"",!0),sf(this,r[4]),this.l=Ul(r[5]||"",!0),W_(this,r[6]||"",!0),this.o=Ul(r[7]||"")):(this.g=!!n,this.h=new Bl(null,this.g))}function Lo(i){return new lc(i)}function nf(i,n,r){i.j=r?Ul(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function rf(i,n,r){i.i=r?Ul(n,!0):n}function sf(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function W_(i,n,r){n instanceof Bl?(i.h=n,function(i,n){n&&!i.j&&(dc(i),i.i=null,i.g.forEach(function(r,a){var l=a.toLowerCase();a!=l&&(K_(this,a),kw(this,l,r))},i)),i.j=n}(i.h,i.g)):(r||(n=jl(n,ED)),i.h=new Bl(n,i.g))}function wn(i,n,r){i.h.set(n,r)}function Hg(i){return wn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ul(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function jl(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,Mw),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Mw(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}lc.prototype.toString=function(){var i=[],n=this.j;n&&i.push(jl(n,q_,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(jl(n,q_,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(jl(r,"/"==r.charAt(0)?vD:_D,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",jl(r,wD)),i.join("")};var q_=/[#\/\?@]/g,_D=/[#\?:]/g,vD=/[#\?]/g,ED=/[#\?@]/g,wD=/#/g;function Bl(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function dc(i){i.g||(i.g=new tf,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var a=i[r].indexOf("="),l=null;if(0<=a){var h=i[r].substring(0,a);l=i[r].substring(a+1)}else h=i[r];n(h,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function K_(i,n){dc(i),n=af(i,n),ko(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,ko((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&ls(i)))}function Pw(i,n){return dc(i),n=af(i,n),ko(i.g.h,n)}function kw(i,n,r){K_(i,n),0<r.length&&(i.i=null,i.g.set(af(i,n),Ws(r)),i.h+=r.length)}function af(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}(He=Bl.prototype).add=function(i,n){dc(this),this.i=null,i=af(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},He.forEach=function(i,n){dc(this),this.g.forEach(function(r,a){rD(r,function(l){i.call(n,l,a,this)},this)},this)},He.T=function(){dc(this);for(var i=this.g.R(),n=this.g.T(),r=[],a=0;a<n.length;a++)for(var l=i[a],h=0;h<l.length;h++)r.push(n[a]);return r},He.R=function(i){dc(this);var n=[];if("string"==typeof i)Pw(this,i)&&(n=iD(n,this.g.get(af(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=iD(n,i[r])}return n},He.set=function(i,n){return dc(this),this.i=null,Pw(this,i=af(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},He.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var a=n[r],l=encodeURIComponent(String(a));a=this.R(a);for(var h=0;h<a.length;h++){var g=l;""!==a[h]&&(g+="="+encodeURIComponent(String(a[h]))),i.push(g)}}return this.i=i.join("&")};var Z_=function(n,r){this.h=n,this.g=r};function Lw(i){this.l=i||Fw,i=lt.PerformanceNavigationTiming?0<(i=lt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(lt.g&&lt.g.Ea&&lt.g.Ea()&&lt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fw=10;function Y_(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ID(i){return i.h?1:i.g?i.g.size:0}function Ii(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Vw(i,n){i.g?i.g.add(n):i.h=n}function bD(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function CD(i){var n,r;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var a=i.i;try{for(var l=Gh(i.g.values()),h=l.next();!h.done;h=l.next())a=a.concat(h.value.D)}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return a}return Ws(i.i)}function Gg(){}function Uw(){this.g=new Gg}function jw(i,n,r){var a=r||"";try{ef(i,function(l,h){var g=l;yg(l)&&(g=xg(l)),n.push(a+h+"="+encodeURIComponent(g))})}catch(l){throw n.push(a+"type="+encodeURIComponent("_badmap")),l}}function Q_(i,n,r,a,l){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,l(a)}catch(h){}}function $l(i){this.l=i.$b||null,this.j=i.ib||!1}function uf(i,n){Kn.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=J_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lw.prototype.cancel=function(){var i,n;if(this.i=CD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var r=Gh(this.g.values()),a=r.next();!a.done;a=r.next())a.value.cancel()}catch(h){i={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}this.g.clear()}},Gg.prototype.stringify=function(i){return lt.JSON.stringify(i,void 0)},Gg.prototype.parse=function(i){return lt.JSON.parse(i,void 0)},Tr($l,sc),$l.prototype.g=function(){return new uf(this.l,this.j)},$l.prototype.i=function(i){return function(){return i}}({}),Tr(uf,Kn);var J_=0;function Wg(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function cf(i){i.readyState=4,i.l=null,i.j=null,i.A=null,lf(i)}function lf(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(He=uf.prototype).open=function(i,n){if(this.readyState!=J_)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,lf(this)},He.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||lt).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cf(this)),this.readyState=J_},He.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,lf(this)),this.g&&(this.readyState=3,lf(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==lt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wg(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},He.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?cf(this):lf(this),3==this.readyState&&Wg(this)}},He.Ua=function(i){this.g&&(this.response=this.responseText=i,cf(this))},He.Ta=function(i){this.g&&(this.response=i,cf(this))},He.ha=function(){this.g&&cf(this)},He.setRequestHeader=function(i,n){this.v.append(i,n)},He.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],n=this.h.entries(),r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(uf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var TD=lt.JSON.parse;function $n(i){Kn.call(this),this.headers=new tf,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bw,this.K=this.L=!1}Tr($n,Kn);var Bw="",SD=/^https?$/i,zg=["POST","PUT"];function $w(i){return"content-type"==i.toLowerCase()}function Li(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,Gl(i),qg(i)}function Gl(i){i.D||(i.D=!0,mr(i,"complete"),mr(i,"error"))}function Hw(i){if(i.h&&void 0!==__&&(!i.C[1]||4!=tr(i)||2!=i.ba()))if(i.v&&4==tr(i))F_(i.Fa,0,i);else if(mr(i,"readystatechange"),4==tr(i)){i.h=!1;try{var a,n=i.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(a=r)){var l;if(l=0===n){var h=String(i.H).match($g)[1]||null;if(!h&&lt.self&&lt.self.location){var g=lt.self.location.protocol;h=g.substr(0,g.length-1)}l=!SD.test(h?h.toLowerCase():"")}a=l}if(a)mr(i,"complete"),mr(i,"success");else{i.m=6;try{var w=2<tr(i)?i.g.statusText:""}catch(D){w=""}i.j=w+" ["+i.ba()+"]",Gl(i)}}finally{qg(i)}}}function qg(i,n){if(i.g){Kg(i);var r=i.g,a=i.C[0]?v_:null;i.g=null,i.C=null,n||mr(i,"ready");try{r.onreadystatechange=a}catch(l){}}}function Kg(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(lt.clearTimeout(i.A),i.A=null)}function tr(i){return i.g?i.g.readyState:0}function Wl(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Bw:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function Fo(i,n,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(i){var n="";return zs(i,function(r,a){n+=a,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):wn(i,n,r))}function Ra(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function bi(i){this.za=0,this.l=[],this.h=new Og,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ra("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ra("baseRetryDelayMs",5e3,i),this.$a=Ra("retryDelaySeedMs",1e4,i),this.Ya=Ra("forwardChannelMaxRetries",2,i),this.ra=Ra("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Lw(i&&i.concurrentRequestLimit),this.Ca=new Uw,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function df(i){if(hc(i),3==i.G){var n=i.V++,r=Lo(i.F);wn(r,"SID",i.J),wn(r,"RID",n),wn(r,"TYPE","terminate"),qs(i,r),(n=new ac(i,i.h,n,void 0)).K=2,n.v=Hg(Lo(r)),r=!1,lt.navigator&&lt.navigator.sendBeacon&&(r=lt.navigator.sendBeacon(n.v.toString(),"")),!r&&lt.Image&&((new Image).src=n.v,r=!0),r||(n.g=Gw(n.l,null),n.g.ea(n.v)),n.F=Date.now(),Xh(n)}nv(i)}function Vo(i){i.g&&(Yg(i),i.g.cancel(),i.g=null)}function hc(i){Vo(i),i.u&&(lt.clearTimeout(i.u),i.u=null),hf(i),i.i.cancel(),i.m&&("number"==typeof i.m&&lt.clearTimeout(i.m),i.m=null)}function Na(i,n){i.l.push(new Z_(i.Za++,n)),3==i.G&&Uo(i)}function Uo(i){Y_(i.i)||i.m||(i.m=!0,P_(i.Ha,i),i.C=0)}function fc(i,n){var r;r=n?n.m:i.V++;var a=Lo(i.F);wn(a,"SID",i.J),wn(a,"RID",r),wn(a,"AID",i.U),qs(i,a),i.o&&i.s&&Fo(a,i.o,i.s),r=new ac(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=pc(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Vw(i.i,r),Vg(r,a,n)}function qs(i,n){i.j&&ef({},function(r,a){wn(n,a,r)})}function pc(i,n,r){r=Math.min(i.l.length,r);var a=i.j?Dr(i.j.Oa,i.j,i):null;e:for(var l=i.l,h=-1;;){var g=["count="+r];-1==h?0<r?g.push("ofs="+(h=l[0].h)):h=0:g.push("ofs="+h);for(var w=!0,D=0;D<r;D++){var x=l[D].h,N=l[D].g;if(0>(x-=h))h=Math.max(0,l[D].h-100),w=!1;else try{jw(N,g,"req"+x+"_")}catch(P){a&&a(N)}}if(w){a=g.join("&");break e}}return i=i.l.splice(0,r),n.D=i,a}function gc(i){i.g||i.u||(i.Y=1,P_(i.Ga,i),i.A=0)}function Zg(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Mg(Dr(i.Ga,i),tv(i,i.A)),i.A++,0))}function Yg(i){null!=i.B&&(lt.clearTimeout(i.B),i.B=null)}function X_(i){i.g=new ac(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Lo(i.oa);wn(n,"RID","rpc"),wn(n,"SID",i.J),wn(n,"CI",i.N?"0":"1"),wn(n,"AID",i.U),qs(i,n),wn(n,"TYPE","xmlhttp"),i.o&&i.s&&Fo(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=Hg(Lo(n)),r.s=null,r.U=!0,Rw(r,i)}function hf(i){null!=i.v&&(lt.clearTimeout(i.v),i.v=null)}function ev(i,n){var r=null;if(i.g==n){hf(i),Yg(i),i.g=null;var a=2}else{if(!Ii(i.i,n))return;r=n.D,bD(i.i,n),a=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==a){r=n.s?n.s.length:0,n=Date.now()-n.F;var l=i.C;mr(a=Qh(),new Sw(a,r,n,l)),Uo(i)}else gc(i);else if(3==(l=n.o)||0==l&&0<i.I||!(1==a&&function(i,n){return!(ID(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Mg(Dr(i.Ha,i,n),tv(i,i.C)),i.C++,0)))}(i,n)||2==a&&Zg(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),l){case 1:Oa(i,5);break;case 4:Oa(i,10);break;case 3:Oa(i,6);break;default:Oa(i,2)}}function tv(i,n){var r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function Oa(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var a=Dr(i.jb,i);r||(r=new lc("//www.google.com/images/cleardot.gif"),lt.location&&"http"==lt.location.protocol||nf(r,"https"),Hg(r)),function(i,n){var r=new Og;if(lt.Image){var a=new Image;a.onload=I_(Q_,r,a,"TestLoadImage: loaded",!0,n),a.onerror=I_(Q_,r,a,"TestLoadImage: error",!1,n),a.onabort=I_(Q_,r,a,"TestLoadImage: abort",!1,n),a.ontimeout=I_(Q_,r,a,"TestLoadImage: timeout",!1,n),lt.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else n(!1)}(r.toString(),a)}else Wr(2);i.G=0,i.j&&i.j.va(n),nv(i),hc(i)}function nv(i){i.G=0,i.I=-1,i.j&&((0!=CD(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Ws(i.l),i.l.length=0),i.j.ua())}function rv(i,n,r){var a=function(i){return i instanceof lc?Lo(i):new lc(i,void 0)}(r);if(""!=a.i)n&&rf(a,n+"."+a.i),sf(a,a.m);else{var l=lt.location;a=function(i,n,r,a){var l=new lc(null,void 0);return i&&nf(l,i),n&&rf(l,n),r&&sf(l,r),a&&(l.l=a),l}(l.protocol,n?n+"."+l.hostname:l.hostname,+l.port,r)}return i.aa&&zs(i.aa,function(h,g){wn(a,g,h)}),r=i.sa,(n=i.D)&&r&&wn(a,n,r),wn(a,"VER",i.ma),qs(i,a),a}function Gw(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new $n(r&&i.Ba&&!i.qa?new $l({ib:!0}):i.qa)).L=i.H,n}function Ww(){}function Qg(){if(kl&&!(10<=Number(wg)))throw Error("Environmental error: no available transport.")}function Ci(i,n){Kn.call(this),this.g=new bi(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Pl(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Pl(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new ff(this)}function iv(i){Pg.call(this);var n=i.__sm__;if(n){e:{for(var r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function zw(){G_.call(this),this.status=1}function ff(i){this.g=i}(He=$n.prototype).ea=function(i,n,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kg.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:kg),this.g.onreadystatechange=Dr(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(h){return void Li(this,h)}i=r||"";var l=new tf(this.headers);a&&ef(a,function(h,g){l.set(g,h)}),a=function(i){e:{for(var n=$w,r=i.length,a="string"==typeof i?i.split(""):i,l=0;l<r;l++)if(l in a&&n.call(void 0,a[l],l,i)){n=l;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(l.T()),r=lt.FormData&&i instanceof lt.FormData,!(0<=nD(zg,n))||a||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(h,g){this.g.setRequestHeader(g,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kg(this),0<this.B&&((this.K=function(i){return kl&&T_()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.pa,this)):this.A=F_(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Li(this,h)}},He.pa=function(){void 0!==__&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mr(this,"timeout"),this.abort(8))},He.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,mr(this,"complete"),mr(this,"abort"),qg(this))},He.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qg(this,!0)),$n.Z.M.call(this)},He.Fa=function(){this.s||(this.F||this.v||this.l?Hw(this):this.cb())},He.cb=function(){Hw(this)},He.ba=function(){try{return 2<tr(this)?this.g.status:-1}catch(i){return-1}},He.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},He.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),TD(n)}},He.Da=function(){return this.m},He.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=bi.prototype).ma=8,He.G=1,He.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},He.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var n=new ac(this,this.h,i,void 0),r=this.s;if(this.P&&(r?sD(r=b_(r),this.P):r=this.P),null===this.o&&(n.H=r),this.ja)e:{for(var a=0,l=0;l<this.l.length;l++){var h=this.l[l];if(void 0===(h="__data__"in h.g&&"string"==typeof(h=h.g.__data__)?h.length:void 0))break;if(4096<(a+=h)){a=l;break e}if(4096===a||l===this.l.length-1){a=l+1;break e}}a=1e3}else a=1e3;a=pc(this,n,a),wn(l=Lo(this.F),"RID",i),wn(l,"CVER",22),this.D&&wn(l,"X-HTTP-Session-Id",this.D),qs(this,l),this.o&&r&&Fo(l,this.o,r),Vw(this.i,n),this.Ra&&wn(l,"TYPE","init"),this.ja?(wn(l,"$req",a),wn(l,"SID","null"),n.$=!0,Vg(n,l,null)):Vg(n,l,a),this.G=2}}else 3==this.G&&(i?fc(this,i):0==this.l.length||Y_(this.i)||fc(this))},He.Ga=function(){if(this.u=null,X_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Mg(Dr(this.bb,this),i)}},He.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wr(10),Vo(this),X_(this))},He.ab=function(){null!=this.v&&(this.v=null,Vo(this),Zg(this),Wr(19))},He.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Wr(2)):(this.h.info("Failed to ping google.com"),Wr(1))},(He=Ww.prototype).xa=function(){},He.wa=function(){},He.va=function(){},He.ua=function(){},He.Oa=function(){},Qg.prototype.g=function(i,n){return new Ci(i,n)},Tr(Ci,Kn),Ci.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),P_(Dr(i.hb,i,n))),Wr(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=rv(i,null,i.W),Uo(i)},Ci.prototype.close=function(){df(this.g)},Ci.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,Na(this.g,n)}else this.v?((n={}).__data__=xg(i),Na(this.g,n)):Na(this.g,i)},Ci.prototype.M=function(){this.g.j=null,delete this.j,df(this.g),delete this.g,Ci.Z.M.call(this)},Tr(iv,Pg),Tr(zw,G_),Tr(ff,Ww),ff.prototype.xa=function(){mr(this.g,"a")},ff.prototype.wa=function(i){mr(this.g,new iv(i))},ff.prototype.va=function(i){mr(this.g,new zw(i))},ff.prototype.ua=function(){mr(this.g,"b")},Qg.prototype.createWebChannel=Qg.prototype.g,Ci.prototype.send=Ci.prototype.u,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,H_.COMPLETE="complete",Aw.EventType=oc,oc.OPEN="a",oc.CLOSE="b",oc.ERROR="c",oc.MESSAGE="d",Kn.prototype.listen=Kn.prototype.N,$n.prototype.listenOnce=$n.prototype.O,$n.prototype.getLastError=$n.prototype.La,$n.prototype.getLastErrorCode=$n.prototype.Da,$n.prototype.getStatus=$n.prototype.ba,$n.prototype.getResponseJson=$n.prototype.Qa,$n.prototype.getResponseText=$n.prototype.ga,$n.prototype.send=$n.prototype.ea;var Jg=Mo,ov=H_,Kw=xa,av_PROXY=10,av_NOPROXY=11,AD=$l,pf=Aw,uv=$n;class Rr{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let ql="9.0.2";const mc=new Ta.Yd("@firebase/firestore");function cv(){return mc.logLevel}function Me(i,...n){if(mc.logLevel<=Ta.in.DEBUG){const r=n.map(Zw);mc.debug(`Firestore (${ql}): ${i}`,...r)}}function On(i,...n){if(mc.logLevel<=Ta.in.ERROR){const r=n.map(Zw);mc.error(`Firestore (${ql}): ${i}`,...r)}}function gf(i,...n){if(mc.logLevel<=Ta.in.WARN){const r=n.map(Zw);mc.warn(`Firestore (${ql}): ${i}`,...r)}}function Zw(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Ze(i="Unexpected state"){const n=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: `+i;throw On(n),new Error(n)}function ut(i,n){i||Ze()}function Ue(i,n){return i}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sn{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class Yw{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class Qw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Rr.UNAUTHENTICATED))}shutdown(){}}class ND{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Jw{constructor(n){this.t=n,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var a=this;let l=this.i;const h=x=>this.i!==l?(l=this.i,r(x)):Promise.resolve();let g=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Sn,n.enqueueRetryable(()=>h(this.currentUser))};const w=()=>{const x=g;n.enqueueRetryable((0,Ee.Z)(function*(){yield x.promise,yield h(a.currentUser)}))},D=x=>{Me("FirebaseCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(x=>D(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?D(x):(Me("FirebaseCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Sn)}},0),w()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==n?(Me("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ut("string"==typeof a.accessToken),new Yw(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return ut(null===n||"string"==typeof n),new Rr(n)}}class Xg{constructor(n,r,a){this.h=n,this.l=r,this.m=a,this.type="FirstParty",this.user=Rr.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class OD{constructor(n,r,a){this.h=n,this.l=r,this.m=a}getToken(){return Promise.resolve(new Xg(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ai{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=a=>this.g(a),this.p=a=>r.writeSequenceNumber(a))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function MD(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let a=0;a<i;a++)r[a]=Math.floor(256*Math.random());return r}ai.T=-1;class Xw{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let a="";for(;a.length<20;){const l=MD(40);for(let h=0;h<l.length;++h)a.length<20&&l[h]<r&&(a+=n.charAt(l[h]%n.length))}return a}}function Tt(i,n){return i<n?-1:i>n?1:0}function Kl(i,n,r){return i.length===n.length&&i.every((a,l)=>r(a,n[l]))}function eI(i){return i+"\0"}class Zn{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Ae(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Zn.fromMillis(Date.now())}static fromDate(n){return Zn.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),a=Math.floor(1e6*(n-1e3*r));return new Zn(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Tt(this.nanoseconds,n.nanoseconds):Tt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Et(n)}static min(){return new Et(new Zn(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function lv(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function Ma(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function em(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class tm{constructor(n,r,a){void 0===r?r=0:r>n.length&&Ze(),void 0===a?a=n.length-r:a>n.length-r&&Ze(),this.segments=n,this.offset=r,this.len=a}get length(){return this.len}isEqual(n){return 0===tm.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof tm?n.forEach(a=>{r.push(a)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const a=Math.min(n.length,r.length);for(let l=0;l<a;l++){const h=n.get(l),g=r.get(l);if(h<g)return-1;if(h>g)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class Ot extends tm{construct(n,r,a){return new Ot(n,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const a of n){if(a.indexOf("//")>=0)throw new Ae(fe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(l=>l.length>0))}return new Ot(r)}static emptyPath(){return new Ot([])}}const PD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends tm{construct(n,r,a){return new Nr(n,r,a)}static isValidIdentifier(n){return PD.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(n){const r=[];let a="",l=0;const h=()=>{if(0===a.length)throw new Ae(fe.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let g=!1;for(;l<n.length;){const w=n[l];if("\\"===w){if(l+1===n.length)throw new Ae(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const D=n[l+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Ae(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);a+=D,l+=2}else"`"===w?(g=!g,l++):"."!==w||g?(a+=w,l++):(h(),l++)}if(h(),g)throw new Ae(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Nr(r)}static emptyPath(){return new Nr([])}}class Ks{constructor(n){this.fields=n,n.sort(Nr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return Kl(this.fields,n.fields,(r,a)=>r.isEqual(a))}}class Yn{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Yn(r)}static fromUint8Array(n){const r=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(n);return new Yn(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Tt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const dv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(i){if(ut(!!i),"string"==typeof i){let n=0;const r=dv.exec(i);if(ut(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),n=Number(l)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:n}}return{seconds:Mn(i.seconds),nanos:Mn(i.nanos)}}function Mn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ka(i){return"string"==typeof i?Yn.fromBase64String(i):Yn.fromUint8Array(i)}function nm(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function LD(i){const n=i.mapValue.fields.__previous_value__;return nm(n)?LD(n):n}function mf(i){const n=Pa(i.mapValue.fields.__local_write_time__.timestampValue);return new Zn(n.seconds,n.nanos)}function La(i){return null==i}function yf(i){return 0===i&&1/i==-1/0}function tI(i){return"number"==typeof i&&Number.isInteger(i)&&!yf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ke{constructor(n){this.path=n}static fromPath(n){return new Ke(Ot.fromString(n))}static fromName(n){return new Ke(Ot.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===Ot.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return Ot.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Ke(new Ot(n.slice()))}}function jo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?nm(i)?4:10:Ze()}function ds(i,n){const r=jo(i);if(r!==jo(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return mf(i).isEqual(mf(n));case 3:return function(a,l){if("string"==typeof a.timestampValue&&"string"==typeof l.timestampValue&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=Pa(a.timestampValue),g=Pa(l.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return l=n,ka(i.bytesValue).isEqual(ka(l.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(a,l){return Mn(a.geoPointValue.latitude)===Mn(l.geoPointValue.latitude)&&Mn(a.geoPointValue.longitude)===Mn(l.geoPointValue.longitude)}(i,n);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Mn(a.integerValue)===Mn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=Mn(a.doubleValue),g=Mn(l.doubleValue);return h===g?yf(h)===yf(g):isNaN(h)&&isNaN(g)}return!1}(i,n);case 9:return Kl(i.arrayValue.values||[],n.arrayValue.values||[],ds);case 10:return function(a,l){const h=a.mapValue.fields||{},g=l.mapValue.fields||{};if(lv(h)!==lv(g))return!1;for(const w in h)if(h.hasOwnProperty(w)&&(void 0===g[w]||!ds(h[w],g[w])))return!1;return!0}(i,n);default:return Ze()}var l}function yc(i,n){return void 0!==(i.values||[]).find(r=>ds(r,n))}function Fa(i,n){const r=jo(i),a=jo(n);if(r!==a)return Tt(r,a);switch(r){case 0:return 0;case 1:return Tt(i.booleanValue,n.booleanValue);case 2:return function(l,h){const g=Mn(l.integerValue||l.doubleValue),w=Mn(h.integerValue||h.doubleValue);return g<w?-1:g>w?1:g===w?0:isNaN(g)?isNaN(w)?0:-1:1}(i,n);case 3:return hv(i.timestampValue,n.timestampValue);case 4:return hv(mf(i),mf(n));case 5:return Tt(i.stringValue,n.stringValue);case 6:return function(l,h){const g=ka(l),w=ka(h);return g.compareTo(w)}(i.bytesValue,n.bytesValue);case 7:return function(l,h){const g=l.split("/"),w=h.split("/");for(let D=0;D<g.length&&D<w.length;D++){const x=Tt(g[D],w[D]);if(0!==x)return x}return Tt(g.length,w.length)}(i.referenceValue,n.referenceValue);case 8:return function(l,h){const g=Tt(Mn(l.latitude),Mn(h.latitude));return 0!==g?g:Tt(Mn(l.longitude),Mn(h.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(l,h){const g=l.values||[],w=h.values||[];for(let D=0;D<g.length&&D<w.length;++D){const x=Fa(g[D],w[D]);if(x)return x}return Tt(g.length,w.length)}(i.arrayValue,n.arrayValue);case 10:return function(l,h){const g=l.fields||{},w=Object.keys(g),D=h.fields||{},x=Object.keys(D);w.sort(),x.sort();for(let N=0;N<w.length&&N<x.length;++N){const P=Tt(w[N],x[N]);if(0!==P)return P;const K=Fa(g[w[N]],D[x[N]]);if(0!==K)return K}return Tt(w.length,x.length)}(i.mapValue,n.mapValue);default:throw Ze()}}function hv(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Tt(i,n);const r=Pa(i),a=Pa(n),l=Tt(r.seconds,a.seconds);return 0!==l?l:Tt(r.nanos,a.nanos)}function fv(i){return rm(i)}function rm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const l=Pa(a);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ka(i.bytesValue).toBase64():"referenceValue"in i?Ke.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(a){let l="[",h=!0;for(const g of a.values||[])h?h=!1:l+=",",l+=rm(g);return l+"]"}(i.arrayValue):"mapValue"in i?function(a){const l=Object.keys(a.fields||{}).sort();let h="{",g=!0;for(const w of l)g?g=!1:h+=",",h+=`${w}:${rm(a.fields[w])}`;return h+"}"}(i.mapValue):Ze();var n}function _f(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function vf(i){return!!i&&"integerValue"in i}function pv(i){return!!i&&"arrayValue"in i}function nI(i){return!!i&&"nullValue"in i}function rI(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function im(i){return!!i&&"mapValue"in i}function Zl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return Ma(i.mapValue.fields,(r,a)=>n.mapValue.fields[r]=Zl(a)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Zl(i.arrayValue.values[r]);return n}return Object.assign({},i)}class nr{constructor(n){this.value=n}static empty(){return new nr({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let a=0;a<n.length-1;++a)if(r=(r.mapValue.fields||{})[n.get(a)],!im(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=Zl(r)}setAll(n){let r=Nr.emptyPath(),a={},l=[];n.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const D=this.getFieldsMap(r);this.applyChanges(D,a,l),a={},l=[],r=w.popLast()}g?a[w.lastSegment()]=Zl(g):l.push(w.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,a,l)}delete(n){const r=this.field(n.popLast());im(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return ds(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<n.length;++a){let l=r.mapValue.fields[n.get(a)];im(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=l),r=l}return r.mapValue.fields}applyChanges(n,r,a){Ma(r,(l,h)=>n[l]=h);for(const l of a)delete n[l]}clone(){return new nr(Zl(this.value))}}function gv(i){const n=[];return Ma(i.fields,(r,a)=>{const l=new Nr([r]);if(im(a)){const h=gv(a.mapValue).fields;if(0===h.length)n.push(l);else for(const g of h)n.push(l.child(g))}else n.push(l)}),new Ks(n)}class cn{constructor(n,r,a,l,h){this.key=n,this.documentType=r,this.version=a,this.data=l,this.documentState=h}static newInvalidDocument(n){return new cn(n,0,Et.min(),nr.empty(),0)}static newFoundDocument(n,r,a){return new cn(n,1,r,a,0)}static newNoDocument(n,r){return new cn(n,2,r,nr.empty(),0)}static newUnknownDocument(n,r){return new cn(n,3,r,nr.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof cn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new cn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iI{constructor(n,r=null,a=[],l=[],h=null,g=null,w=null){this.path=n,this.collectionGroup=r,this.orderBy=a,this.filters=l,this.limit=h,this.startAt=g,this.endAt=w,this.A=null}}function mv(i,n=null,r=[],a=[],l=null,h=null,g=null){return new iI(i,n,r,a,l,h,g)}function Yl(i){const n=Ue(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(a=>function(i){return i.field.canonicalString()+i.op.toString()+fv(i.value)}(a)).join(","),r+="|ob:",r+=n.orderBy.map(a=>{return(l=a).field.canonicalString()+l.dir;var l}).join(","),La(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=bf(n.startAt)),n.endAt&&(r+="|ub:",r+=bf(n.endAt)),n.A=r}return n.A}function Ef(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!Ql(i.orderBy[l],n.orderBy[l]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((r=i.filters[l]).op!==(a=n.filters[l]).op||!r.field.isEqual(a.field)||!ds(r.value,a.value))return!1;var r,a;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!lI(i.startAt,n.startAt)&&lI(i.endAt,n.endAt)}function wf(i){return Ke.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class ui extends class{}{constructor(n,r,a){super(),this.field=n,this.op=r,this.value=a}static create(n,r,a){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,a):new VD(n,r,a):"array-contains"===r?new aI(n,a):"in"===r?new jD(n,a):"not-in"===r?new BD(n,a):"array-contains-any"===r?new uI(n,a):new ui(n,r,a)}static R(n,r,a){return"in"===r?new oI(n,a):new UD(n,a)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Fa(r,this.value)):null!==r&&jo(this.value)===jo(r)&&this.P(Fa(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Ze()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class VD extends ui{constructor(n,r,a){super(n,r,a),this.key=Ke.fromName(a.referenceValue)}matches(n){const r=Ke.comparator(n.key,this.key);return this.P(r)}}class oI extends ui{constructor(n,r){super(n,"in",r),this.keys=Hn(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class UD extends ui{constructor(n,r){super(n,"not-in",r),this.keys=Hn(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function Hn(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Ke.fromName(a.referenceValue))}class aI extends ui{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return pv(r)&&yc(r.arrayValue,this.value)}}class jD extends ui{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&yc(this.value.arrayValue,r)}}class BD extends ui{constructor(n,r){super(n,"not-in",r)}matches(n){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!yc(this.value.arrayValue,r)}}class uI extends ui{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!pv(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>yc(this.value.arrayValue,a))}}class If{constructor(n,r){this.position=n,this.before=r}}function bf(i){return`${i.before?"b":"a"}:${i.position.map(n=>fv(n)).join(",")}`}class _c{constructor(n,r="asc"){this.field=n,this.dir=r}}function Ql(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function cI(i,n,r){let a=0;for(let l=0;l<i.position.length;l++){const h=n[l],g=i.position[l];if(a=h.field.isKeyField()?Ke.comparator(Ke.fromName(g.referenceValue),r.key):Fa(g,r.data.field(h.field)),"desc"===h.dir&&(a*=-1),0!==a)break}return i.before?a<=0:a<0}function lI(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!ds(i.position[r],n.position[r]))return!1;return!0}class Zs{constructor(n,r=null,a=[],l=[],h=null,g="F",w=null,D=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=l,this.limit=h,this.limitType=g,this.startAt=w,this.endAt=D,this.V=null,this.S=null}}function dI(i,n,r,a,l,h,g,w){return new Zs(i,n,r,a,l,h,g,w)}function vc(i){return new Zs(i)}function yv(i){return!La(i.limit)&&"F"===i.limitType}function Cf(i){return!La(i.limit)&&"L"===i.limitType}function sm(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Fi(i){for(const n of i.filters)if(n.v())return n.field;return null}function _v(i){return null!==i.collectionGroup}function Jl(i){const n=Ue(i);if(null===n.V){n.V=[];const r=Fi(n),a=sm(n);if(null!==r&&null===a)r.isKeyField()||n.V.push(new _c(r)),n.V.push(new _c(Nr.keyField(),"asc"));else{let l=!1;for(const h of n.explicitOrderBy)n.V.push(h),h.field.isKeyField()&&(l=!0);if(!l){const h=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new _c(Nr.keyField(),h))}}}return n.V}function kn(i){const n=Ue(i);if(!n.S)if("F"===n.limitType)n.S=mv(n.path,n.collectionGroup,Jl(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const h of Jl(n))r.push(new _c(h.field,"desc"===h.dir?"asc":"desc"));const a=n.endAt?new If(n.endAt.position,!n.endAt.before):null,l=n.startAt?new If(n.startAt.position,!n.startAt.before):null;n.S=mv(n.path,n.collectionGroup,r,n.filters,n.limit,a,l)}return n.S}function Vi(i,n,r){return new Zs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function zr(i,n){return Ef(kn(i),kn(n))&&i.limitType===n.limitType}function vv(i){return`${Yl(kn(i))}|lt:${i.limitType}`}function om(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${fv(a.value)}`;var a}).join(", ")}]`),La(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(n+=", startAt: "+bf(i.startAt)),i.endAt&&(n+=", endAt: "+bf(i.endAt)),`Target(${n})`}(kn(i))}; limitType=${i.limitType})`}function Df(i,n){return n.isFoundDocument()&&function(r,a){const l=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ke.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,n)&&function(r,a){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===a.data.field(l.field))return!1;return!0}(i,n)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(i,n)&&(a=n,!((r=i).startAt&&!cI(r.startAt,Jl(r),a)||r.endAt&&cI(r.endAt,Jl(r),a)));var r,a}function hI(i){return(n,r)=>{let a=!1;for(const l of Jl(i)){const h=$D(l,n,r);if(0!==h)return h;a=a||l.field.isKeyField()}return 0}}function $D(i,n,r){const a=i.field.isKeyField()?Ke.comparator(n.key,r.key):function(l,h,g){const w=h.data.field(l),D=g.data.field(l);return null!==w&&null!==D?Fa(w,D):Ze()}(i.field,n,r);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ze()}}function fI(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(n)?"-0":n}}function am(i){return{integerValue:""+i}}function Xl(i,n){return tI(n)?am(n):fI(i,n)}class um{constructor(){this._=void 0}}function pI(i,n,r){return i instanceof Ec?function(a,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&(h.fields.__previous_value__=l),{mapValue:h}}(r,n):i instanceof Ys?gI(i,n):i instanceof Va?wv(i,n):function(a,l){const h=Ev(a,l),g=cm(h)+cm(a.C);return vf(h)&&vf(a.C)?am(g):fI(a.N,g)}(i,n)}function HD(i,n,r){return i instanceof Ys?gI(i,n):i instanceof Va?wv(i,n):r}function Ev(i,n){return i instanceof wc?vf(r=n)||(a=r)&&"doubleValue"in a?n:{integerValue:0}:null;var a,r}class Ec extends um{}class Ys extends um{constructor(n){super(),this.elements=n}}function gI(i,n){const r=Iv(n);for(const a of i.elements)r.some(l=>ds(l,a))||r.push(a);return{arrayValue:{values:r}}}class Va extends um{constructor(n){super(),this.elements=n}}function wv(i,n){let r=Iv(n);for(const a of i.elements)r=r.filter(l=>!ds(l,a));return{arrayValue:{values:r}}}class wc extends um{constructor(n,r){super(),this.N=n,this.C=r}}function cm(i){return Mn(i.integerValue||i.doubleValue)}function Iv(i){return pv(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ed{constructor(n,r){this.field=n,this.transform=r}}class yI{constructor(n,r){this.version=n,this.transformResults=r}}class Ln{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Ln}static exists(n){return new Ln(void 0,n)}static updateTime(n){return new Ln(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Tf(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Sf{}function _I(i,n,r){i instanceof Af?function(a,l,h){const g=a.value.clone(),w=II(a.fieldTransforms,l,h.transformResults);g.setAll(w),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,n,r):i instanceof Ua?function(a,l,h){if(!Tf(a.precondition,l))return void l.convertToUnknownDocument(h.version);const g=II(a.fieldTransforms,l,h.transformResults),w=l.data;w.setAll(wI(a)),w.setAll(g),l.convertToFoundDocument(h.version,w).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function bv(i,n,r){var l;i instanceof Af?function(a,l,h){if(!Tf(a.precondition,l))return;const g=a.value.clone(),w=bI(a.fieldTransforms,h,l);g.setAll(w),l.convertToFoundDocument(EI(l),g).setHasLocalMutations()}(i,n,r):i instanceof Ua?function(a,l,h){if(!Tf(a.precondition,l))return;const g=bI(a.fieldTransforms,h,l),w=l.data;w.setAll(wI(a)),w.setAll(g),l.convertToFoundDocument(EI(l),w).setHasLocalMutations()}(i,n,r):Tf(i.precondition,l=n)&&l.convertToNoDocument(Et.min())}function GD(i,n){let r=null;for(const a of i.fieldTransforms){const l=n.data.field(a.field),h=Ev(a.transform,l||null);null!=h&&(null==r&&(r=nr.empty()),r.set(a.field,h))}return r||null}function vI(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(a=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===a||r&&a&&Kl(r,a,(l,h)=>function(i,n){return i.field.isEqual(n.field)&&(a=n.transform,(r=i.transform)instanceof Ys&&a instanceof Ys||r instanceof Va&&a instanceof Va?Kl(r.elements,a.elements,ds):r instanceof wc&&a instanceof wc?ds(r.C,a.C):r instanceof Ec&&a instanceof Ec);var r,a}(l,h))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,a}function EI(i){return i.isFoundDocument()?i.version:Et.min()}class Af extends Sf{constructor(n,r,a,l=[]){super(),this.key=n,this.value=r,this.precondition=a,this.fieldTransforms=l,this.type=0}}class Ua extends Sf{constructor(n,r,a,l,h=[]){super(),this.key=n,this.data=r,this.fieldMask=a,this.precondition=l,this.fieldTransforms=h,this.type=1}}function wI(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=i.data.field(r);n.set(r,a)}}),n}function II(i,n,r){const a=new Map;ut(i.length===r.length);for(let l=0;l<r.length;l++){const h=i[l],g=h.transform,w=n.data.field(h.field);a.set(h.field,HD(g,w,r[l]))}return a}function bI(i,n,r){const a=new Map;for(const l of i){const h=l.transform,g=r.data.field(l.field);a.set(l.field,pI(h,g,n))}return a}class xf extends Sf{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class Cv extends Sf{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class WD{constructor(n){this.count=n}}var Gn,At;function CI(i){switch(i){case fe.OK:return Ze();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ze()}}function DI(i){if(void 0===i)return On("GRPC error has no .code"),fe.UNKNOWN;switch(i){case Gn.OK:return fe.OK;case Gn.CANCELLED:return fe.CANCELLED;case Gn.UNKNOWN:return fe.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return fe.INTERNAL;case Gn.UNAVAILABLE:return fe.UNAVAILABLE;case Gn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Gn.NOT_FOUND:return fe.NOT_FOUND;case Gn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Gn.ABORTED:return fe.ABORTED;case Gn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Gn.DATA_LOSS:return fe.DATA_LOSS;default:return Ze()}}(At=Gn||(Gn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";class Qn{constructor(n,r){this.comparator=n,this.root=r||rr.EMPTY}insert(n,r){return new Qn(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(n){return new Qn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,rr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(n){let r=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(n,a.key);if(0===l)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,a)=>(n(r,a),!1))}toString(){const n=[];return this.inorderTraversal((r,a)=>(n.push(`${r}:${a}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new lm(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new lm(this.root,n,this.comparator,!1)}getReverseIterator(){return new lm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new lm(this.root,n,this.comparator,!0)}}class lm{constructor(n,r,a,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!n.isEmpty();)if(h=r?a(n.key,r):1,l&&(h*=-1),h<0)n=this.isReverse?n.left:n.right;else{if(0===h){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class rr{constructor(n,r,a,l,h){this.key=n,this.value=r,this.color=null!=a?a:rr.RED,this.left=null!=l?l:rr.EMPTY,this.right=null!=h?h:rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,a,l,h){return new rr(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=l?l:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,a){let l=this;const h=a(n,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(n,r,a),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(n,r,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let a,l=this;if(r(n,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(n,l.key)){if(l.right.isEmpty())return rr.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const n=this.left.check();if(n!==this.right.check())throw Ze();return n+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1,rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(i,n,r,a,l){return this}insert(i,n,r){return new rr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(n){this.comparator=n,this.data=new Qn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,a)=>(n(r),!1))}forEachInRange(n,r){const a=this.data.getIteratorFrom(n[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,n[1])>=0)return;r(l.key)}}forEachWhile(n,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(n){return new Dv(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(a=>{r=r.add(a)}),r}isEqual(n){if(!(n instanceof An)||this.size!==n.size)return!1;const r=this.data.getIterator(),a=n.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(0!==this.comparator(l,h))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new An(this.comparator);return r.data=n,r}}class Dv{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const TI=new Qn(Ke.comparator);function Di(){return TI}const SI=new Qn(Ke.comparator);function dm(){return SI}const AI=new Qn(Ke.comparator);function Tv(){return AI}const Sv=new An(Ke.comparator);function jt(...i){let n=Sv;for(const r of i)n=n.add(r);return n}const Ic=new An(Tt);function hm(){return Ic}class Rf{constructor(n,r,a,l,h){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(n,r){const a=new Map;return a.set(n,Qs.createSynthesizedTargetChangeForCurrentChange(n,r)),new Rf(Et.min(),a,hm(),Di(),jt())}}class Qs{constructor(n,r,a,l,h){this.resumeToken=n,this.current=r,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(n,r){return new Qs(Yn.EMPTY_BYTE_STRING,r,jt(),jt(),jt())}}class Av{constructor(n,r,a,l){this.k=n,this.removedTargetIds=r,this.key=a,this.$=l}}class fm{constructor(n,r){this.targetId=n,this.O=r}}class zD{constructor(n,r,a=Yn.EMPTY_BYTE_STRING,l=null){this.state=n,this.targetIds=r,this.resumeToken=a,this.cause=l}}class xv{constructor(){this.F=0,this.M=et(),this.L=Yn.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=jt(),r=jt(),a=jt();return this.M.forEach((l,h)=>{switch(h){case 0:n=n.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:Ze()}}),new Qs(this.L,this.B,n,r,a)}G(){this.U=!1,this.M=et()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class xI{constructor(n){this.tt=n,this.et=new Map,this.nt=Di(),this.st=qD(),this.it=new An(Tt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const a=this.ut(r);switch(n.state){case 0:this.ht(r)&&a.j(n.resumeToken);break;case 1:a.X(),a.q||a.G(),a.j(n.resumeToken);break;case 2:a.X(),a.q||this.removeTarget(r);break;case 3:this.ht(r)&&(a.Z(),a.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),a.j(n.resumeToken));break;default:Ze()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((a,l)=>{this.ht(l)&&r(l)})}ft(n){const r=n.targetId,a=n.O.count,l=this.dt(r);if(l){const h=l.target;if(wf(h))if(0===a){const g=new Ke(h.path);this.at(r,g,cn.newNoDocument(g,Et.min()))}else ut(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((h,g)=>{const w=this.dt(g);if(w){if(h.current&&wf(w.target)){const D=new Ke(w.target.path);null!==this.nt.get(D)||this.gt(g,D)||this.at(g,D,cn.newNoDocument(D,n))}h.K&&(r.set(g,h.W()),h.G())}});let a=jt();this.st.forEach((h,g)=>{let w=!0;g.forEachWhile(D=>{const x=this.dt(D);return!x||2===x.purpose||(w=!1,!1)}),w&&(a=a.add(h))});const l=new Rf(n,r,this.it,this.nt,a);return this.nt=Di(),this.st=qD(),this.it=new An(Tt),l}ot(n,r){if(!this.ht(n))return;const a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,a){if(!this.ht(n))return;const l=this.ut(n);this.gt(n,r)?l.H(r,1):l.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new xv,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new An(Tt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Me("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new xv),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function qD(){return new Qn(Ke.comparator)}function et(){return new Qn(Ke.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},ZD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class YD{constructor(n,r){this.databaseId=n,this.D=r}}function ja(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function RI(i,n){return i.D?n.toBase64():n.toUint8Array()}function pm(i,n){return ja(i,n.toTimestamp())}function Fn(i){return ut(!!i),Et.fromTimestamp(function(n){const r=Pa(n);return new Zn(r.seconds,r.nanos)}(i))}function In(i,n){return(r=i,new Ot(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function QD(i){const n=Ot.fromString(i);return ut(UI(n)),n}function td(i,n){return In(i.databaseId,n.path)}function Ui(i,n){const r=QD(n);if(r.get(1)!==i.databaseId.projectId)throw new Ae(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Ae(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Ke(Ov(r))}function Rv(i,n){return In(i.databaseId,n)}function Nv(i){const n=QD(i);return 4===n.length?Ot.emptyPath():Ov(n)}function nd(i){return new Ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ov(i){return ut(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Mv(i,n,r){return{name:td(i,n),fields:r.value.mapValue.fields}}function NI(i,n,r){const a=Ui(i,n.name),l=Fn(n.updateTime),h=new nr({mapValue:{fields:n.fields}}),g=cn.newFoundDocument(a,l,h);return r&&g.setHasCommittedMutations(),r?g.setHasCommittedMutations():g}function Ba(i,n){let r;if(n instanceof Af)r={update:Mv(i,n.key,n.value)};else if(n instanceof xf)r={delete:td(i,n.key)};else if(n instanceof Ua)r={update:Mv(i,n.key,n.data),updateMask:VI(n.fieldMask)};else{if(!(n instanceof Cv))return Ze();r={verify:td(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(a=>function(l,h){const g=h.transform;if(g instanceof Ec)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ys)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Va)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof wc)return{fieldPath:h.field.canonicalString(),increment:g.C};throw Ze()}(0,a))),n.precondition.isNone||(r.currentDocument=void 0!==(l=n.precondition).updateTime?{updateTime:pm(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Ze()),r;var l}function OI(i,n){const r=n.currentDocument?void 0!==(l=n.currentDocument).updateTime?Ln.updateTime(Fn(l.updateTime)):void 0!==l.exists?Ln.exists(l.exists):Ln.none():Ln.none(),a=n.updateTransforms?n.updateTransforms.map(l=>function(h,g){let w=null;"setToServerValue"in g?(ut("REQUEST_TIME"===g.setToServerValue),w=new Ec):"appendMissingElements"in g?w=new Ys(g.appendMissingElements.values||[]):"removeAllFromArray"in g?w=new Va(g.removeAllFromArray.values||[]):"increment"in g?w=new wc(h,g.increment):Ze();const D=Nr.fromServerFormat(g.fieldPath);return new ed(D,w)}(i,l)):[];var l;if(n.update){const l=Ui(i,n.update.name),h=new nr({mapValue:{fields:n.update.fields}});if(n.updateMask){const g=new Ks((n.updateMask.fieldPaths||[]).map(x=>Nr.fromServerFormat(x)));return new Ua(l,h,g,r,a)}return new Af(l,h,r,a)}if(n.delete){const l=Ui(i,n.delete);return new xf(l,r)}if(n.verify){const l=Ui(i,n.verify);return new Cv(l,r)}return Ze()}function MI(i,n){return{documents:[Rv(i,n.path)]}}function Nf(i,n){const r={structuredQuery:{}},a=n.path;null!==n.collectionGroup?(r.parent=Rv(i,a),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=Rv(i,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const l=function(w){if(0===w.length)return;const D=w.map(x=>function(N){if("=="===N.op){if(rI(N.value))return{unaryFilter:{field:id(N.field),op:"IS_NAN"}};if(nI(N.value))return{unaryFilter:{field:id(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(rI(N.value))return{unaryFilter:{field:id(N.field),op:"IS_NOT_NAN"}};if(nI(N.value))return{unaryFilter:{field:id(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:id(N.field),op:tT(N.op),value:N.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(n.filters);l&&(r.structuredQuery.where=l);const h=function(w){if(0!==w.length)return w.map(D=>{return{field:id((x=D).field),direction:Of(x.dir)};var x})}(n.orderBy);h&&(r.structuredQuery.orderBy=h);const g=(D=n.limit,i.D||La(D)?D:{value:D});var D;return null!==g&&(r.structuredQuery.limit=g),n.startAt&&(r.structuredQuery.startAt=kI(n.startAt)),n.endAt&&(r.structuredQuery.endAt=kI(n.endAt)),r}function Pv(i){let n=Nv(i.parent);const r=i.structuredQuery,a=r.from?r.from.length:0;let l=null;if(a>0){ut(1===a);const N=r.from[0];N.allDescendants?l=N.collectionId:n=n.child(N.collectionId)}let h=[];r.where&&(h=kv(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(N=>{return new _c(sd((P=N).field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let w=null;r.limit&&(w=function(N){let P;return P="object"==typeof N?N.value:N,La(P)?null:P}(r.limit));let D=null;r.startAt&&(D=rd(r.startAt));let x=null;return r.endAt&&(x=rd(r.endAt)),dI(n,l,g,h,w,"F",D,x)}function kv(i){return i?void 0!==i.unaryFilter?[FI(i)]:void 0!==i.fieldFilter?[LI(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>kv(n)).reduce((n,r)=>n.concat(r)):Ze():[]}function kI(i){return{before:i.before,values:i.position}}function rd(i){return new If(i.values||[],!!i.before)}function Of(i){return KD[i]}function tT(i){return ZD[i]}function id(i){return{fieldPath:i.canonicalString()}}function sd(i){return Nr.fromServerFormat(i.fieldPath)}function LI(i){return ui.create(sd(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ze()}}(i.fieldFilter.op),i.fieldFilter.value)}function FI(i){switch(i.unaryFilter.op){case"IS_NAN":const n=sd(i.unaryFilter.field);return ui.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=sd(i.unaryFilter.field);return ui.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sd(i.unaryFilter.field);return ui.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=sd(i.unaryFilter.field);return ui.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ze()}}function VI(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function UI(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ji(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=jI(n)),n=nT(i.get(r),n);return jI(n)}function nT(i,n){let r=n;const a=i.length;for(let l=0;l<a;l++){const h=i.charAt(l);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function jI(i){return i+"\x01\x01"}function $a(i){const n=i.length;if(ut(n>=2),2===n)return ut("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ot.emptyPath();const r=n-2,a=[];let l="";for(let h=0;h<n;){const g=i.indexOf("\x01",h);switch((g<0||g>r)&&Ze(),i.charAt(g+1)){case"\x01":const w=i.substring(h,g);let D;0===l.length?D=w:(l+=w,D=l,l=""),a.push(D);break;case"\x10":l+=i.substring(h,g),l+="\0";break;case"\x11":l+=i.substring(h,g+1);break;default:Ze()}h=g+2}return new Ot(a)}class iA{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class Bi{constructor(n,r,a){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a}}Bi.store="owner",Bi.key="owner";class bc{constructor(n,r,a){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a}}bc.store="mutationQueues",bc.keyPath="userId";class nn{constructor(n,r,a,l,h){this.userId=n,this.batchId=r,this.localWriteTimeMs=a,this.baseMutations=l,this.mutations=h}}nn.store="mutations",nn.keyPath="batchId",nn.userMutationsIndex="userMutationsIndex",nn.userMutationsKeyPath=["userId","batchId"];class Jn{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,ji(r)]}static key(n,r,a){return[n,ji(r),a]}}Jn.store="documentMutations",Jn.PLACEHOLDER=new Jn;class rT{constructor(n,r){this.path=n,this.readTime=r}}class iT{constructor(n,r){this.path=n,this.version=r}}class xn{constructor(n,r,a,l,h,g){this.unknownDocument=n,this.noDocument=r,this.document=a,this.hasCommittedMutations=l,this.readTime=h,this.parentPath=g}}xn.store="remoteDocuments",xn.readTimeIndex="readTimeIndex",xn.readTimeIndexPath="readTime",xn.collectionReadTimeIndex="collectionReadTimeIndex",xn.collectionReadTimeIndexPath=["parentPath","readTime"];class ci{constructor(n){this.byteSize=n}}ci.store="remoteDocumentGlobal",ci.key="remoteDocumentGlobalKey";class li{constructor(n,r,a,l,h,g,w){this.targetId=n,this.canonicalId=r,this.readTime=a,this.resumeToken=l,this.lastListenSequenceNumber=h,this.lastLimboFreeSnapshotVersion=g,this.query=w}}li.store="targets",li.keyPath="targetId",li.queryTargetsIndexName="queryTargetsIndex",li.queryTargetsKeyPath=["canonicalId","targetId"];class yr{constructor(n,r,a){this.targetId=n,this.path=r,this.sequenceNumber=a}}yr.store="targetDocuments",yr.keyPath=["targetId","path"],yr.documentTargetsIndex="documentTargetsIndex",yr.documentTargetsKeyPath=["path","targetId"];class Ti{constructor(n,r,a,l){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=l}}Ti.key="targetGlobalKey",Ti.store="targetGlobal";class Cc{constructor(n,r){this.collectionId=n,this.parent=r}}Cc.store="collectionParents",Cc.keyPath=["collectionId","parent"];class Bo{constructor(n,r,a,l){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=l}}Bo.store="clientMetadata",Bo.keyPath="clientId";class Dc{constructor(n,r,a){this.bundleId=n,this.createTime=r,this.version=a}}Dc.store="bundles",Dc.keyPath="bundleId";class od{constructor(n,r,a){this.name=n,this.readTime=r,this.bundledQuery=a}}od.store="namedQueries",od.keyPath="name";const sT=[bc.store,nn.store,Jn.store,xn.store,li.store,Bi.store,Ti.store,yr.store,Bo.store,ci.store,Cc.store,Dc.store,od.store],Tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Te{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Te((a,l)=>{this.nextCallback=h=>{this.wrapSuccess(n,h).next(a,l)},this.catchCallback=h=>{this.wrapFailure(r,h).next(a,l)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Te?r:Te.resolve(r)}catch(r){return Te.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Te.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Te.reject(r)}static resolve(n){return new Te((r,a)=>{r(n)})}static reject(n){return new Te((r,a)=>{a(n)})}static waitFor(n){return new Te((r,a)=>{let l=0,h=0,g=!1;n.forEach(w=>{++l,w.next(()=>{++h,g&&h===l&&r()},D=>a(D))}),g=!0,h===l&&r()})}static or(n){let r=Te.resolve(!1);for(const a of n)r=r.next(l=>l?Te.resolve(l):a());return r}static forEach(n,r){const a=[];return n.forEach((l,h)=>{a.push(r.call(this,l,h))}),this.waitFor(a)}}class gm{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Sn,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new ad(n,r.error)):this.Tt.resolve()},this.transaction.onerror=a=>{const l=mm(a.target.error);this.Tt.reject(new ad(n,l))}}static open(n,r,a,l){try{return new gm(r,n.transaction(l,a))}catch(h){throw new ad(r,h)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Me("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new Lv(r)}}class $i{constructor(n,r,a){this.name=n,this.version=r,this.At=a,12.2===$i.Rt((0,Ut.z$)())&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Me("SimpleDb","Removing database:",n),Ac(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if($i.Pt())return!0;const n=(0,Ut.z$)(),r=$i.Rt(n),a=0<r&&r<10,l=$i.vt(n),h=0<l&&l<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||h)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static vt(n){const r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Dt(n){var r=this;return(0,Ee.Z)(function*(){return r.db||(Me("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,l)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=g=>{a(g.target.result)},h.onblocked=()=>{l(new ad(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const w=g.target.error;l("VersionError"===w.name?new Ae(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Ae(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new ad(n,w))},h.onupgradeneeded=g=>{Me("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.At.Ct(g.target.result,h.transaction,g.oldVersion,r.version).next(()=>{Me("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=a=>r.Nt(a)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,a,l){var h=this;return(0,Ee.Z)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{h.db=yield h.Dt(n);const D=gm.open(h.db,n,g?"readonly":"readwrite",a),x=l(D).catch(N=>(D.abort(N),Te.reject(N))).toPromise();return x.catch(()=>{}),yield D.It,x}catch(D){const x="FirebaseError"!==D.name&&w<3;if(Me("SimpleDb","Transaction failed with error:",D.message,"Retrying:",x),h.close(),!x)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oT{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Ac(this.kt.delete())}}class ad extends Ae{constructor(n,r){super(fe.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Sc(i){return"IndexedDbTransactionError"===i.name}class Lv{constructor(n){this.store=n}put(n,r){let a;return void 0!==r?(Me("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),Ac(a)}add(n){return Me("SimpleDb","ADD",this.store.name,n,n),Ac(this.store.add(n))}get(n){return Ac(this.store.get(n)).next(r=>(void 0===r&&(r=null),Me("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Me("SimpleDb","DELETE",this.store.name,n),Ac(this.store.delete(n))}count(){return Me("SimpleDb","COUNT",this.store.name),Ac(this.store.count())}Lt(n,r){const a=this.cursor(this.options(n,r)),l=[];return this.Bt(a,(h,g)=>{l.push(g)}).next(()=>l)}Ut(n,r){Me("SimpleDb","DELETE ALL",this.store.name);const a=this.options(n,r);a.qt=!1;const l=this.cursor(a);return this.Bt(l,(h,g,w)=>w.delete())}Kt(n,r){let a;r?a=n:(a={},r=n);const l=this.cursor(a);return this.Bt(l,r)}jt(n){const r=this.cursor({});return new Te((a,l)=>{r.onerror=h=>{const g=mm(h.target.error);l(g)},r.onsuccess=h=>{const g=h.target.result;g?n(g.primaryKey,g.value).next(w=>{w?g.continue():a()}):a()}})}Bt(n,r){const a=[];return new Te((l,h)=>{n.onerror=g=>{h(g.target.error)},n.onsuccess=g=>{const w=g.target.result;if(!w)return void l();const D=new oT(w),x=r(w.primaryKey,w.value,D);if(x instanceof Te){const N=x.catch(P=>(D.done(),Te.reject(P)));a.push(N)}D.isDone?l():null===D.Ft?w.continue():w.continue(D.Ft)}}).next(()=>Te.waitFor(a))}options(n,r){let a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function Ac(i){return new Te((n,r)=>{i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{const l=mm(a.target.error);r(l)}})}let Fv=!1;function mm(i){const n=$i.Rt((0,Ut.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const a=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fv||(Fv=!0,setTimeout(()=>{throw a},0)),a}}return i}class $I extends BI{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function di(i,n){const r=Ue(i);return $i.St(r.Qt,n)}class Vv{constructor(n,r,a,l){this.batchId=n,this.localWriteTime=r,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(n,r){const a=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(n.key)&&_I(h,n,a[l])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&bv(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&bv(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const a=n.get(r.key),l=a;this.applyToLocalView(l),a.isValidDocument()||l.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),jt())}isEqual(n){return this.batchId===n.batchId&&Kl(this.mutations,n.mutations,(r,a)=>vI(r,a))&&Kl(this.baseMutations,n.baseMutations,(r,a)=>vI(r,a))}}class Mf{constructor(n,r,a,l){this.batch=n,this.commitVersion=r,this.mutationResults=a,this.docVersions=l}static from(n,r,a){ut(n.mutations.length===a.length);let l=Tv();const h=n.mutations;for(let g=0;g<h.length;g++)l=l.insert(h[g].key,a[g].version);return new Mf(n,r,a,l)}}class Ha{constructor(n,r,a,l,h=Et.min(),g=Et.min(),w=Yn.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w}withSequenceNumber(n){return new Ha(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class Uv{constructor(n){this.Wt=n}}function jv(i,n){if(n.document)return NI(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Ke.fromSegments(n.noDocument.path),a=cd(n.noDocument.readTime),l=cn.newNoDocument(r,a);return n.hasCommittedMutations?l.setHasCommittedMutations():l}if(n.unknownDocument){const r=Ke.fromSegments(n.unknownDocument.path),a=cd(n.unknownDocument.version);return cn.newUnknownDocument(r,a)}return Ze()}function HI(i,n,r){const a=Bv(r),l=n.key.path.popLast().toArray();if(n.isFoundDocument()){const h={name:td(w=i.Wt,(D=n).key),fields:D.data.value.mapValue.fields,updateTime:ja(w,D.version.toTimestamp())};return new xn(null,null,h,n.hasCommittedMutations,a,l)}var w,D;if(n.isNoDocument()){const h=n.key.path.toArray(),g=ud(n.version),w=n.hasCommittedMutations;return new xn(null,new rT(h,g),null,w,a,l)}if(n.isUnknownDocument()){const h=n.key.path.toArray(),g=ud(n.version);return new xn(new iT(h,g),null,null,!0,a,l)}return Ze()}function Bv(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function GI(i){const n=new Zn(i[0],i[1]);return Et.fromTimestamp(n)}function ud(i){const n=i.toTimestamp();return new iA(n.seconds,n.nanoseconds)}function cd(i){const n=new Zn(i.seconds,i.nanoseconds);return Et.fromTimestamp(n)}function ld(i,n){const r=(n.baseMutations||[]).map(h=>OI(i.Wt,h));for(let h=0;h<n.mutations.length-1;++h){const g=n.mutations[h];h+1<n.mutations.length&&void 0!==n.mutations[h+1].transform&&(g.updateTransforms=n.mutations[h+1].transform.fieldTransforms,n.mutations.splice(h+1,1),++h)}const a=n.mutations.map(h=>OI(i.Wt,h)),l=Zn.fromMillis(n.localWriteTimeMs);return new Vv(n.batchId,l,r,a)}function Pf(i){const n=cd(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?cd(i.lastLimboFreeSnapshotVersion):Et.min();let a;var l;return void 0!==i.query.documents?(ut(1===(l=i.query).documents.length),a=kn(vc(Nv(l.documents[0])))):a=kn(Pv(i.query)),new Ha(a,i.targetId,0,i.lastListenSequenceNumber,n,r,Yn.fromBase64String(i.resumeToken))}function $v(i,n){const r=ud(n.snapshotVersion),a=ud(n.lastLimboFreeSnapshotVersion);let l;l=wf(n.target)?MI(i.Wt,n.target):Nf(i.Wt,n.target);const h=n.resumeToken.toBase64();return new li(n.targetId,Yl(n.target),r,h,n.sequenceNumber,a,l)}function ym(i){const n=Pv({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Vi(n,n.limit,"L"):n}class aT{getBundleMetadata(n,r){return WI(n).get(r).next(a=>{if(a)return{id:(l=a).bundleId,createTime:cd(l.createTime),version:l.version};var l})}saveBundleMetadata(n,r){return WI(n).put({bundleId:(a=r).id,createTime:ud(Fn(a.createTime)),version:a.version});var a}getNamedQuery(n,r){return Hv(n).get(r).next(a=>{if(a)return{name:(l=a).name,query:ym(l.bundledQuery),readTime:cd(l.readTime)};var l})}saveNamedQuery(n,r){return Hv(n).put({name:(a=r).name,readTime:ud(Fn(a.readTime)),bundledQuery:a.bundledQuery});var a}}function WI(i){return di(i,Dc.store)}function Hv(i){return di(i,od.store)}class uT{constructor(){this.Gt=new Gv}addToCollectionParentIndex(n,r){return this.Gt.add(r),Te.resolve()}getCollectionParents(n,r){return Te.resolve(this.Gt.getEntries(r))}}class Gv{constructor(){this.index={}}add(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r]||new An(Ot.comparator),h=!l.has(a);return this.index[r]=l.add(a),h}has(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r];return l&&l.has(a)}getEntries(n){return(this.index[n]||new An(Ot.comparator)).toArray()}}class cT{constructor(){this.zt=new Gv}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const a=r.lastSegment(),l=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const h={collectionId:a,parent:ji(l)};return _m(n).put(h)}return Te.resolve()}getCollectionParents(n,r){const a=[],l=IDBKeyRange.bound([r,""],[eI(r),""],!1,!0);return _m(n).Lt(l).next(h=>{for(const g of h){if(g.collectionId!==r)break;a.push($a(g.parent))}return a})}}function _m(i){return di(i,Cc.store)}const vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qr{constructor(n,r,a){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(n){return new qr(n,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Em(i,n,r){const a=i.store(nn.store),l=i.store(Jn.store),h=[],g=IDBKeyRange.only(r.batchId);let w=0;const D=a.Kt({range:g},(N,P,K)=>(w++,K.delete()));h.push(D.next(()=>{ut(1===w)}));const x=[];for(const N of r.mutations){const P=Jn.key(n,N.key.path,r.batchId);h.push(l.delete(P)),x.push(N.key)}return Te.waitFor(h).next(()=>x)}function wm(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw Ze();n=i.noDocument}return JSON.stringify(n).length}qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(41943040,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);class Wv{constructor(n,r,a,l){this.userId=n,this.N=r,this.Ht=a,this.referenceDelegate=l,this.Jt={}}static Yt(n,r,a,l){ut(""!==n.uid);const h=n.isAuthenticated()?n.uid:"";return new Wv(h,r,a,l)}checkEmpty(n){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ga(n).Kt({index:nn.userMutationsIndex,range:a},(l,h,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(n,r,a,l){const h=dd(n),g=Ga(n);return g.add({}).next(w=>{ut("number"==typeof w);const D=new Vv(w,r,a,l),x=function(K,Z,we){const Ve=we.baseMutations.map(_t=>Ba(K.Wt,_t)),Be=we.mutations.map(_t=>Ba(K.Wt,_t));return new nn(Z,we.batchId,we.localWriteTime.toMillis(),Ve,Be)}(this.N,this.userId,D),N=[];let P=new An((K,Z)=>Tt(K.canonicalString(),Z.canonicalString()));for(const K of l){const Z=Jn.key(this.userId,K.key.path,w);P=P.add(K.key.path.popLast()),N.push(g.put(x)),N.push(h.put(Z,Jn.PLACEHOLDER))}return P.forEach(K=>{N.push(this.Ht.addToCollectionParentIndex(n,K))}),n.addOnCommittedListener(()=>{this.Jt[w]=D.keys()}),Te.waitFor(N).next(()=>D)})}lookupMutationBatch(n,r){return Ga(n).get(r).next(a=>a?(ut(a.userId===this.userId),ld(this.N,a)):null)}Xt(n,r){return this.Jt[r]?Te.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(a=>{if(a){const l=a.keys();return this.Jt[r]=l,l}return null})}getNextMutationBatchAfterBatchId(n,r){const a=r+1,l=IDBKeyRange.lowerBound([this.userId,a]);let h=null;return Ga(n).Kt({index:nn.userMutationsIndex,range:l},(g,w,D)=>{w.userId===this.userId&&(ut(w.batchId>=a),h=ld(this.N,w)),D.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ga(n).Kt({index:nn.userMutationsIndex,range:r,reverse:!0},(l,h,g)=>{a=h.batchId,g.done()}).next(()=>a)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ga(n).Lt(nn.userMutationsIndex,r).next(a=>a.map(l=>ld(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(n,r){const a=Jn.prefixForPath(this.userId,r.path),l=IDBKeyRange.lowerBound(a),h=[];return dd(n).Kt({range:l},(g,w,D)=>{const[x,N,P]=g,K=$a(N);if(x===this.userId&&r.path.isEqual(K))return Ga(n).get(P).next(Z=>{if(!Z)throw Ze();ut(Z.userId===this.userId),h.push(ld(this.N,Z))});D.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new An(Tt);const l=[];return r.forEach(h=>{const g=Jn.prefixForPath(this.userId,h.path),w=IDBKeyRange.lowerBound(g),D=dd(n).Kt({range:w},(x,N,P)=>{const[K,Z,we]=x,Ve=$a(Z);K===this.userId&&h.path.isEqual(Ve)?a=a.add(we):P.done()});l.push(D)}),Te.waitFor(l).next(()=>this.Zt(n,a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1,h=Jn.prefixForPath(this.userId,a),g=IDBKeyRange.lowerBound(h);let w=new An(Tt);return dd(n).Kt({range:g},(D,x,N)=>{const[P,K,Z]=D,we=$a(K);P===this.userId&&a.isPrefixOf(we)?we.length===l&&(w=w.add(Z)):N.done()}).next(()=>this.Zt(n,w))}Zt(n,r){const a=[],l=[];return r.forEach(h=>{l.push(Ga(n).get(h).next(g=>{if(null===g)throw Ze();ut(g.userId===this.userId),a.push(ld(this.N,g))}))}),Te.waitFor(l).next(()=>a)}removeMutationBatch(n,r){return Em(n.Qt,this.userId,r).next(a=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Te.forEach(a,l=>this.referenceDelegate.markPotentiallyOrphaned(n,l))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Te.resolve();const a=IDBKeyRange.lowerBound(Jn.prefixForUser(this.userId)),l=[];return dd(n).Kt({range:a},(h,g,w)=>{if(h[0]===this.userId){const D=$a(h[1]);l.push(D)}else w.done()}).next(()=>{ut(0===l.length)})})}containsKey(n,r){return Im(n,this.userId,r)}ee(n){return zI(n).get(this.userId).next(r=>r||new bc(this.userId,-1,""))}}function Im(i,n,r){const a=Jn.prefixForPath(n,r.path),l=a[1],h=IDBKeyRange.lowerBound(a);let g=!1;return dd(i).Kt({range:h,qt:!0},(w,D,x)=>{const[N,P,K]=w;N===n&&P===l&&(g=!0),x.done()}).next(()=>g)}function Ga(i){return di(i,nn.store)}function dd(i){return di(i,Jn.store)}function zI(i){return di(i,bc.store)}class Wa{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new Wa(0)}static ie(){return new Wa(-1)}}class qI{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const a=new Wa(r.highestTargetId);return r.highestTargetId=a.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>Et.fromTimestamp(new Zn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,a){return this.re(n).next(l=>(l.highestListenSequenceNumber=r,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.oe(n,l)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(a=>(a.targetCount+=1,this.ce(r,a),this.oe(n,a))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>xc(n).delete(r.targetId)).next(()=>this.re(n)).next(a=>(ut(a.targetCount>0),a.targetCount-=1,this.oe(n,a)))}removeTargets(n,r,a){let l=0;const h=[];return xc(n).Kt((g,w)=>{const D=Pf(w);D.sequenceNumber<=r&&null===a.get(D.targetId)&&(l++,h.push(this.removeTargetData(n,D)))}).next(()=>Te.waitFor(h)).next(()=>l)}forEachTarget(n,r){return xc(n).Kt((a,l)=>{const h=Pf(l);r(h)})}re(n){return lT(n).get(Ti.key).next(r=>(ut(null!==r),r))}oe(n,r){return lT(n).put(Ti.key,r)}ae(n,r){return xc(n).put($v(this.N,r))}ce(n,r){let a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const a=Yl(r),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let h=null;return xc(n).Kt({range:l,index:li.queryTargetsIndexName},(g,w,D)=>{const x=Pf(w);Ef(r,x.target)&&(h=x,D.done())}).next(()=>h)}addMatchingKeys(n,r,a){const l=[],h=za(n);return r.forEach(g=>{const w=ji(g.path);l.push(h.put(new yr(a,w))),l.push(this.referenceDelegate.addReference(n,a,g))}),Te.waitFor(l)}removeMatchingKeys(n,r,a){const l=za(n);return Te.forEach(r,h=>{const g=ji(h.path);return Te.waitFor([l.delete([a,g]),this.referenceDelegate.removeReference(n,a,h)])})}removeMatchingKeysForTargetId(n,r){const a=za(n),l=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(n,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),l=za(n);let h=jt();return l.Kt({range:a,qt:!0},(g,w,D)=>{const x=$a(g[1]),N=new Ke(x);h=h.add(N)}).next(()=>h)}containsKey(n,r){const a=ji(r.path),l=IDBKeyRange.bound([a],[eI(a)],!1,!0);let h=0;return za(n).Kt({index:yr.documentTargetsIndex,qt:!0,range:l},([g,w],D,x)=>{0!==g&&(h++,x.done())}).next(()=>h>0)}Et(n,r){return xc(n).get(r).next(a=>a?Pf(a):null)}}function xc(i){return di(i,li.store)}function lT(i){return di(i,Ti.store)}function za(i){return di(i,yr.store)}function Si(i){return KI.apply(this,arguments)}function KI(){return(KI=(0,Ee.Z)(function*(i){if(i.code!==fe.FAILED_PRECONDITION||i.message!==Tc)throw i;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function bm([i,n],[r,a]){const l=Tt(i,r);return 0===l?Tt(n,a):l}class Cm{constructor(n){this.ue=n,this.buffer=new An(bm),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();bm(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class dT{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const a=this.de?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,Ee.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(l){Sc(l)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield Si(l)}yield r._e(n)}))}}class hd{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(a=>Math.floor(r/100*a))}nthSequenceNumber(n,r){if(0===r)return Te.resolve(ai.T);const a=new Cm(r);return this.me.forEachTarget(n,l=>a.fe(l.sequenceNumber)).next(()=>this.me.ye(n,l=>a.fe(l))).next(()=>a.maxValue)}removeTargets(n,r,a){return this.me.removeTargets(n,r,a)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(vm)):this.getCacheSize(n).next(a=>a<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vm):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let a,l,h,g,w,D,x;const N=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),l=this.params.maximumSequenceNumbersToCollect):l=P,g=Date.now(),this.nthSequenceNumber(n,l))).next(P=>(a=P,w=Date.now(),this.removeTargets(n,a,r))).next(P=>(h=P,D=Date.now(),this.removeOrphanedDocuments(n,a))).next(P=>(x=Date.now(),cv()<=Ta.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-N}ms\n\tDetermined least recently used ${l} in `+(w-g)+`ms\n\tRemoved ${h} targets in `+(D-w)+`ms\n\tRemoved ${P} documents in `+(x-D)+`ms\nTotal Duration: ${x-N}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:P})))}}class hT{constructor(n,r){this.db=n,this.garbageCollector=new hd(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(a=>r.next(l=>a+l))}Ee(n){let r=0;return this.ye(n,a=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(a,l)=>r(l))}addReference(n,r,a){return zv(n,a)}removeReference(n,r,a){return zv(n,a)}removeTargets(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}markPotentiallyOrphaned(n,r){return zv(n,r)}Ie(n,r){return function(a,l){let h=!1;return zI(a).jt(g=>Im(a,g,l).next(w=>(w&&(h=!0),Te.resolve(!w)))).next(()=>h)}(n,r)}removeOrphanedDocuments(n,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let h=0;return this.Te(n,(g,w)=>{if(w<=r){const D=this.Ie(n,g).next(x=>{if(!x)return h++,a.getEntry(n,g).next(()=>(a.removeEntry(g),za(n).delete([0,ji(g.path)])))});l.push(D)}}).next(()=>Te.waitFor(l)).next(()=>a.apply(n)).next(()=>h)}removeTarget(n,r){const a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}updateLimboDocument(n,r){return zv(n,r)}Te(n,r){const a=za(n);let l,h=ai.T;return a.Kt({index:yr.documentTargetsIndex},([g,w],{path:D,sequenceNumber:x})=>{0===g?(h!==ai.T&&r(new Ke($a(l)),h),h=x,l=D):h=ai.T}).next(()=>{h!==ai.T&&r(new Ke($a(l)),h)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function zv(i,n){return za(i).put((a=i.currentSequenceNumber,new yr(0,ji(n.path),a)));var a}class fd{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a)for(const[l,h]of a)if(this.equalsFn(l,n))return h}has(n){return void 0!==this.get(n)}set(n,r){const a=this.mapKeyFn(n),l=this.inner[a];if(void 0!==l){for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],n))return void(l[h]=[n,r]);l.push([n,r])}else this.inner[a]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],n))return 1===a.length?delete this.inner[r]:a.splice(l,1),!0;return!1}forEach(n){Ma(this.inner,(r,a)=>{for(const[l,h]of a)n(l,h)})}isEmpty(){return em(this.inner)}}class hs{constructor(){this.changes=new fd(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:Et.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:cn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?Te.resolve(a.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class ZI{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,a){return qa(n).put(Dm(r),a)}removeEntry(n,r){const a=qa(n),l=Dm(r);return a.delete(l)}updateMetadata(n,r){return this.getMetadata(n).next(a=>(a.byteSize+=r,this.Ae(n,a)))}getEntry(n,r){return qa(n).get(Dm(r)).next(a=>this.Re(r,a))}be(n,r){return qa(n).get(Dm(r)).next(a=>({document:this.Re(r,a),size:wm(a)}))}getEntries(n,r){let a=Di();return this.Pe(n,r,(l,h)=>{const g=this.Re(l,h);a=a.insert(l,g)}).next(()=>a)}ve(n,r){let a=Di(),l=new Qn(Ke.comparator);return this.Pe(n,r,(h,g)=>{const w=this.Re(h,g);a=a.insert(h,w),l=l.insert(h,wm(g))}).next(()=>({documents:a,Ve:l}))}Pe(n,r,a){if(r.isEmpty())return Te.resolve();const l=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),h=r.getIterator();let g=h.getNext();return qa(n).Kt({range:l},(w,D,x)=>{const N=Ke.fromSegments(w);for(;g&&Ke.comparator(g,N)<0;)a(g,null),g=h.getNext();g&&g.isEqual(N)&&(a(g,D),g=h.hasNext()?h.getNext():null),g?x.Mt(g.path.toArray()):x.done()}).next(()=>{for(;g;)a(g,null),g=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(n,r,a){let l=Di();const h=r.path.length+1,g={};if(a.isEqual(Et.min())){const w=r.path.toArray();g.range=IDBKeyRange.lowerBound(w)}else{const w=r.path.toArray(),D=Bv(a);g.range=IDBKeyRange.lowerBound([w,D],!0),g.index=xn.collectionReadTimeIndex}return qa(n).Kt(g,(w,D,x)=>{if(w.length!==h)return;const N=jv(this.N,D);r.path.isPrefixOf(N.key.path)?Df(r,N)&&(l=l.insert(N.key,N)):x.done()}).next(()=>l)}newChangeBuffer(n){return new sA(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return kf(n).get(ci.key).next(r=>(ut(!!r),r))}Ae(n,r){return kf(n).put(ci.key,r)}Re(n,r){if(r){const a=jv(this.N,r);if(!a.isNoDocument()||!a.version.isEqual(Et.min()))return a}return cn.newInvalidDocument(n)}}class sA extends hs{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new fd(a=>a.toString(),(a,l)=>a.isEqual(l))}applyChanges(n){const r=[];let a=0,l=new An((h,g)=>Tt(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const w=this.De.get(h);if(g.document.isValidDocument()){const D=HI(this.Se.N,g.document,this.getReadTime(h));l=l.add(h.path.popLast()),a+=wm(D)-w,r.push(this.Se.addEntry(n,h,D))}else if(a-=w,this.trackRemovals){const D=HI(this.Se.N,cn.newNoDocument(h,Et.min()),this.getReadTime(h));r.push(this.Se.addEntry(n,h,D))}else r.push(this.Se.removeEntry(n,h))}),l.forEach(h=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,h))}),r.push(this.Se.updateMetadata(n,a)),Te.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(a=>(this.De.set(r,a.size),a.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:a,Ve:l})=>(l.forEach((h,g)=>{this.De.set(h,g)}),a))}}function kf(i){return di(i,ci.store)}function qa(i){return di(i,xn.store)}function Dm(i){return i.path.toArray()}class oA{constructor(n){this.N=n}Ct(n,r,a,l){ut(a<l&&a>=0&&l<=11);const h=new gm("createOrUpgrade",r);var w;a<1&&l>=1&&(n.createObjectStore(Bi.store),(w=n).createObjectStore(bc.store,{keyPath:bc.keyPath}),w.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0}),w.createObjectStore(Jn.store),YI(n),function(w){w.createObjectStore(xn.store)}(n));let g=Te.resolve();return a<3&&l>=3&&(0!==a&&(function(w){w.deleteObjectStore(yr.store),w.deleteObjectStore(li.store),w.deleteObjectStore(Ti.store)}(n),YI(n)),g=g.next(()=>function(w){const D=w.store(Ti.store),x=new Ti(0,0,Et.min().toTimestamp(),0);return D.put(Ti.key,x)}(h))),a<4&&l>=4&&(0!==a&&(g=g.next(()=>function(w,D){return D.store(nn.store).Lt().next(x=>{w.deleteObjectStore(nn.store),w.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0});const N=D.store(nn.store),P=x.map(K=>N.put(K));return Te.waitFor(P)})}(n,h))),g=g.next(()=>{!function(w){w.createObjectStore(Bo.store,{keyPath:Bo.keyPath})}(n)})),a<5&&l>=5&&(g=g.next(()=>this.Ce(h))),a<6&&l>=6&&(g=g.next(()=>(function(w){w.createObjectStore(ci.store)}(n),this.Ne(h)))),a<7&&l>=7&&(g=g.next(()=>this.xe(h))),a<8&&l>=8&&(g=g.next(()=>this.ke(n,h))),a<9&&l>=9&&(g=g.next(()=>{(function(w){w.objectStoreNames.contains("remoteDocumentChanges")&&w.deleteObjectStore("remoteDocumentChanges")})(n),function(w){const D=w.objectStore(xn.store);D.createIndex(xn.readTimeIndex,xn.readTimeIndexPath,{unique:!1}),D.createIndex(xn.collectionReadTimeIndex,xn.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&l>=10&&(g=g.next(()=>this.$e(h))),a<11&&l>=11&&(g=g.next(()=>{(function(w){w.createObjectStore(Dc.store,{keyPath:Dc.keyPath})})(n),function(w){w.createObjectStore(od.store,{keyPath:od.keyPath})}(n)})),g}Ne(n){let r=0;return n.store(xn.store).Kt((a,l)=>{r+=wm(l)}).next(()=>{const a=new ci(r);return n.store(ci.store).put(ci.key,a)})}Ce(n){const r=n.store(bc.store),a=n.store(nn.store);return r.Lt().next(l=>Te.forEach(l,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return a.Lt(nn.userMutationsIndex,g).next(w=>Te.forEach(w,D=>{ut(D.userId===h.userId);const x=ld(this.N,D);return Em(n,h.userId,x).next(()=>{})}))}))}xe(n){const r=n.store(yr.store),a=n.store(xn.store);return n.store(Ti.store).get(Ti.key).next(l=>{const h=[];return a.Kt((g,w)=>{const D=new Ot(g),x=[0,ji(D)];h.push(r.get(x).next(N=>N?Te.resolve():r.put(new yr(0,ji(D),l.highestListenSequenceNumber))))}).next(()=>Te.waitFor(h))})}ke(n,r){n.createObjectStore(Cc.store,{keyPath:Cc.keyPath});const a=r.store(Cc.store),l=new Gv,h=g=>{if(l.add(g)){const w=g.lastSegment(),D=g.popLast();return a.put({collectionId:w,parent:ji(D)})}};return r.store(xn.store).Kt({qt:!0},(g,w)=>{const D=new Ot(g);return h(D.popLast())}).next(()=>r.store(Jn.store).Kt({qt:!0},([g,w,D],x)=>{const N=$a(w);return h(N.popLast())}))}$e(n){const r=n.store(li.store);return r.Kt((a,l)=>{const h=Pf(l),g=$v(this.N,h);return r.put(g)})}}function YI(i){i.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.documentTargetsIndex,yr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(li.store,{keyPath:li.keyPath}).createIndex(li.queryTargetsIndexName,li.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Ti.store)}const qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kv{constructor(n,r,a,l,h,g,w,D,x,N){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=a,this.Oe=h,this.window=g,this.document=w,this.Fe=x,this.Me=N,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=P=>Promise.resolve(),!Kv.bt())throw new Ae(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hT(this,l),this.We=r+"main",this.N=new Uv(D),this.Ge=new $i(this.We,11,new oA(this.N)),this.ze=new qI(this.referenceDelegate,this.N),this.Ht=new cT,this.He=new ZI(this.N,this.Ht),this.Je=new aT,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===N&&On("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(fe.FAILED_PRECONDITION,qv);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new ai(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var a=(0,Ee.Z)(function*(l){if(r.started)return n(l)});return function(l){return a.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,Ee.Z)(function*(a){null===a.newVersion&&(yield n())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Ee.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>Lf(n).put(new Bo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(Sc(n))return Me("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Rc(n).get(Bi.key).next(r=>Te.resolve(this.cn(r)))}un(n){return Lf(n).delete(this.clientId)}hn(){var n=this;return(0,Ee.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const l=di(a,Bo.store);return l.Lt().next(h=>{const g=n.fn(h,18e5),w=h.filter(D=>-1===g.indexOf(D));return Te.forEach(w,D=>l.delete(D.clientId)).next(()=>w)})}).catch(()=>[]);if(n.Ye)for(const a of r)n.Ye.removeItem(n.dn(a.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Te.resolve(!0):Rc(n).get(Bi.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Ae(fe.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lf(n).Lt().next(a=>void 0===this.fn(a,5e3).find(l=>{if(this.clientId!==l.clientId){const g=!this.inForeground&&l.inForeground,w=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||g&&w)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Me("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,Ee.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Bi.store,Bo.store],r=>{const a=new $I(r,ai.T);return n.on(a).next(()=>n.un(a))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(a=>this.ln(a.updateTimeMs,r)&&!this.wn(a.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>Lf(n).Lt().next(r=>this.fn(r,18e5).map(a=>a.clientId)))}get started(){return this.Be}getMutationQueue(n){return Wv.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,a){let h;return Me("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",sT,g=>(h=new $I(g,this.Le?this.Le.next():ai.T),"readwrite-primary"===r?this.sn(h).next(w=>!!w||this.rn(h)).next(w=>{if(!w)throw On(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ae(fe.FAILED_PRECONDITION,Tc);return a(h)}).next(w=>this.an(h).next(()=>w)):this.En(h).next(()=>a(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}En(n){return Rc(n).get(Bi.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ae(fe.FAILED_PRECONDITION,qv)})}an(n){const r=new Bi(this.clientId,this.allowTabSynchronization,Date.now());return Rc(n).put(Bi.key,r)}static bt(){return $i.bt()}on(n){const r=Rc(n);return r.get(Bi.key).next(a=>this.cn(a)?(Me("IndexedDbPersistence","Releasing primary lease."),r.delete(Bi.key)):Te.resolve())}ln(n,r){const a=Date.now();return!(n<a-r||n>a&&(On(`Detected an update time that is in the future: ${n} > ${a}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,Ut.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Me("IndexedDbPersistence",`Client '${n}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return On("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){On("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Rc(i){return di(i,Bi.store)}function Lf(i){return di(i,Bo.store)}function Ff(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class QI{constructor(n,r){this.progress=n,this.Tn=r}}class JI{constructor(n,r,a){this.He=n,this.In=r,this.Ht=a}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(a=>this.Rn(n,r,a))}Rn(n,r,a){return this.He.getEntry(n,r).next(l=>{for(const h of a)h.applyToLocalView(l);return l})}bn(n,r){n.forEach((a,l)=>{for(const h of r)h.applyToLocalView(l)})}Pn(n,r){return this.He.getEntries(n,r).next(a=>this.vn(n,a).next(()=>a))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(a=>this.bn(r,a))}getDocumentsMatchingQuery(n,r,a){return Ke.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(n,r.path):_v(r)?this.Sn(n,r,a):this.Dn(n,r,a);var l}Vn(n,r){return this.An(n,new Ke(r)).next(a=>{let l=dm();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}Sn(n,r,a){const l=r.collectionGroup;let h=dm();return this.Ht.getCollectionParents(n,l).next(g=>Te.forEach(g,w=>{const D=(x=r,N=w.child(l),new Zs(N,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));var x,N;return this.Dn(n,D,a).next(x=>{x.forEach((N,P)=>{h=h.insert(N,P)})})}).next(()=>h))}Dn(n,r,a){let l,h;return this.He.getDocumentsMatchingQuery(n,r,a).next(g=>(l=g,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(g=>(h=g,this.Cn(n,h,l).next(w=>{l=w;for(const D of h)for(const x of D.mutations){const N=x.key;let P=l.get(N);null==P&&(P=cn.newInvalidDocument(N),l=l.insert(N,P)),bv(x,P,D.localWriteTime),P.isFoundDocument()||(l=l.remove(N))}}))).next(()=>(l.forEach((g,w)=>{Df(r,w)||(l=l.remove(g))}),l))}Cn(n,r,a){let l=jt();for(const g of r)for(const w of g.mutations)w instanceof Ua&&null===a.get(w.key)&&(l=l.add(w.key));let h=a;return this.He.getEntries(n,l).next(g=>(g.forEach((w,D)=>{D.isFoundDocument()&&(h=h.insert(w,D))}),h))}}class XI{constructor(n,r,a,l){this.targetId=n,this.fromCache=r,this.Nn=a,this.xn=l}static kn(n,r){let a=jt(),l=jt();for(const h of r.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new XI(n,r.fromCache,a,l)}}class eb{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,a,l){return 0===(h=r).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||a.isEqual(Et.min())?this.Fn(n,r):this.On.Pn(n,l).next(h=>{const g=this.Mn(r,h);return(yv(r)||Cf(r))&&this.Ln(r.limitType,g,l,a)?this.Fn(n,r):(cv()<=Ta.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),om(r)),this.On.getDocumentsMatchingQuery(n,r,a).next(w=>(g.forEach(D=>{w=w.insert(D.key,D)}),w)))});var h}Mn(n,r){let a=new An(hI(n));return r.forEach((l,h)=>{Df(n,h)&&(a=a.add(h))}),a}Ln(n,r,a,l){if(a.size!==r.size)return!0;const h="F"===n?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Fn(n,r){return cv()<=Ta.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",om(r)),this.On.getDocumentsMatchingQuery(n,r,Et.min())}}class fT{constructor(n,r,a,l){this.persistence=n,this.Bn=r,this.N=l,this.Un=new Qn(Tt),this.qn=new fd(h=>Yl(h),Ef),this.Kn=Et.min(),this.In=n.getMutationQueue(a),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new JI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function tb(i,n,r,a){return new fT(i,n,r,a)}function Zv(i,n){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,Ee.Z)(function*(i,n){const r=Ue(i);let a=r.In,l=r.Qn;const h=yield r.persistence.runTransaction("Handle user change","readonly",g=>{let w;return r.In.getAllMutationBatches(g).next(D=>(w=D,a=r.persistence.getMutationQueue(n),l=new JI(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(g))).next(D=>{const x=[],N=[];let P=jt();for(const K of w){x.push(K.batchId);for(const Z of K.mutations)P=P.add(Z.key)}for(const K of D){N.push(K.batchId);for(const Z of K.mutations)P=P.add(Z.key)}return l.Pn(g,P).next(K=>({Wn:K,removedBatchIds:x,addedBatchIds:N}))})});return r.In=a,r.Qn=l,r.Bn.$n(r.Qn),h})).apply(this,arguments)}function nb(i,n){const r=Ue(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=n.batch.keys(),h=r.jn.newChangeBuffer({trackRemovals:!0});return function(g,w,D,x){const N=D.batch,P=N.keys();let K=Te.resolve();return P.forEach(Z=>{K=K.next(()=>x.getEntry(w,Z)).next(we=>{const Ve=D.docVersions.get(Z);ut(null!==Ve),we.version.compareTo(Ve)<0&&(N.applyToRemoteDocument(we,D),we.isValidDocument()&&x.addEntry(we,D.commitVersion))})}),K.next(()=>g.In.removeMutationBatch(w,N))}(r,a,n,h).next(()=>h.apply(a)).next(()=>r.In.performConsistencyCheck(a)).next(()=>r.Qn.Pn(a,l))})}function rb(i){const n=Ue(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function pT(i,n){const r=Ue(i),a=n.snapshotVersion;let l=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=r.jn.newChangeBuffer({trackRemovals:!0});l=r.Un;const w=[];n.targetChanges.forEach((x,N)=>{const P=l.get(N);if(!P)return;w.push(r.ze.removeMatchingKeys(h,x.removedDocuments,N).next(()=>r.ze.addMatchingKeys(h,x.addedDocuments,N)));const K=x.resumeToken;if(K.approximateByteSize()>0){const Z=P.withResumeToken(K,a).withSequenceNumber(h.currentSequenceNumber);l=l.insert(N,Z),we=P,Be=x,ut((Ve=Z).resumeToken.approximateByteSize()>0),(0===we.resumeToken.approximateByteSize()||Ve.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=3e8||Be.addedDocuments.size+Be.modifiedDocuments.size+Be.removedDocuments.size>0)&&w.push(r.ze.updateTargetData(h,Z))}var we,Ve,Be});let D=Di();if(n.documentUpdates.forEach((x,N)=>{n.resolvedLimboDocuments.has(x)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(h,x))}),w.push(Yv(h,g,n.documentUpdates,a,void 0).next(x=>{D=x})),!a.isEqual(Et.min())){const x=r.ze.getLastRemoteSnapshotVersion(h).next(N=>r.ze.setTargetsMetadata(h,h.currentSequenceNumber,a));w.push(x)}return Te.waitFor(w).next(()=>g.apply(h)).next(()=>r.Qn.vn(h,D)).next(()=>D)}).then(h=>(r.Un=l,h))}function Yv(i,n,r,a,l){let h=jt();return r.forEach(g=>h=h.add(g)),n.getEntries(i,h).next(g=>{let w=Di();return r.forEach((D,x)=>{const N=g.get(D),P=(null==l?void 0:l.get(D))||a;x.isNoDocument()&&x.version.isEqual(Et.min())?(n.removeEntry(D,P),w=w.insert(D,x)):!N.isValidDocument()||x.version.compareTo(N.version)>0||0===x.version.compareTo(N.version)&&N.hasPendingWrites?(n.addEntry(x,P),w=w.insert(D,x)):Me("LocalStore","Ignoring outdated watch update for ",D,". Current version:",N.version," Watch version:",x.version)}),w})}function Sm(i,n){const r=Ue(i);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(a,n)))}function pd(i,n){const r=Ue(i);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return r.ze.getTargetData(a,n).next(h=>h?(l=h,Te.resolve(l)):r.ze.allocateTargetId(a).next(g=>(l=new Ha(n,g,0,a.currentSequenceNumber),r.ze.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=r.Un.get(a.targetId);return(null===l||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Un=r.Un.insert(a.targetId,a),r.qn.set(n,a.targetId)),a})}function Nc(i,n,r){return gd.apply(this,arguments)}function gd(){return(gd=(0,Ee.Z)(function*(i,n,r){const a=Ue(i),l=a.Un.get(n),h=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",h,g=>a.persistence.referenceDelegate.removeTarget(g,l)))}catch(g){if(!Sc(g))throw g;Me("LocalStore",`Failed to update sequence numbers for target ${n}: ${g}`)}a.Un=a.Un.remove(n),a.qn.delete(l.target)})).apply(this,arguments)}function Oc(i,n,r){const a=Ue(i);let l=Et.min(),h=jt();return a.persistence.runTransaction("Execute query","readonly",g=>function(w,D,x){const N=Ue(w),P=N.qn.get(x);return void 0!==P?Te.resolve(N.Un.get(P)):N.ze.getTargetData(D,x)}(a,g,kn(n)).next(w=>{if(w)return l=w.lastLimboFreeSnapshotVersion,a.ze.getMatchingKeysForTargetId(g,w.targetId).next(D=>{h=D})}).next(()=>a.Bn.getDocumentsMatchingQuery(g,n,r?l:Et.min(),r?h:jt())).next(w=>({documents:w,Gn:h})))}function md(i,n){const r=Ue(i),a=Ue(r.ze),l=r.Un.get(n);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",h=>a.Et(h,n).next(g=>g?g.target:null))}function ib(i){const n=Ue(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(a,l,h){const g=Ue(a);let w=Di(),D=Bv(h);const x=qa(l),N=IDBKeyRange.lowerBound(D,!0);return x.Kt({index:xn.readTimeIndex,range:N},(P,K)=>{const Z=jv(g.N,K);w=w.insert(Z.key,Z),D=K.readTime}).next(()=>({Tn:w,readTime:GI(D)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:a})=>(n.Kn=a,r))}function sb(){return(sb=(0,Ee.Z)(function*(i){const n=Ue(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(a){const l=qa(a);let h=Et.min();return l.Kt({index:xn.readTimeIndex,reverse:!0},(g,w,D)=>{w.readTime&&(h=GI(w.readTime)),D.done()}).next(()=>h)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function Qv(){return(Qv=(0,Ee.Z)(function*(i,n,r,a){const l=Ue(i);let h=jt(),g=Di(),w=Tv();for(const N of r){const P=n.zn(N.metadata.name);N.document&&(h=h.add(P)),g=g.insert(P,n.Hn(N)),w=w.insert(P,n.Jn(N.metadata.readTime))}const D=l.jn.newChangeBuffer({trackRemovals:!0}),x=yield pd(l,(N=a,kn(vc(Ot.fromString(`__bundle__/docs/${N}`)))));var N;return l.persistence.runTransaction("Apply bundle documents","readwrite",N=>Yv(N,D,g,Et.min(),w).next(P=>(D.apply(N),P)).next(P=>l.ze.removeMatchingKeysForTargetId(N,x.targetId).next(()=>l.ze.addMatchingKeys(N,h,x.targetId)).next(()=>l.Qn.vn(N,P)).next(()=>P)))})).apply(this,arguments)}function yT(i,n){return Jv.apply(this,arguments)}function Jv(){return(Jv=(0,Ee.Z)(function*(i,n,r=jt()){const a=yield pd(i,kn(ym(n.bundledQuery))),l=Ue(i);return l.persistence.runTransaction("Save named query","readwrite",h=>{const g=Fn(n.readTime);if(a.snapshotVersion.compareTo(g)>=0)return l.Je.saveNamedQuery(h,n);const w=a.withResumeToken(Yn.EMPTY_BYTE_STRING,g);return l.Un=l.Un.insert(w.targetId,w),l.ze.updateTargetData(h,w).next(()=>l.ze.removeMatchingKeysForTargetId(h,a.targetId)).next(()=>l.ze.addMatchingKeys(h,r,a.targetId)).next(()=>l.Je.saveNamedQuery(h,n))})})).apply(this,arguments)}class _T{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Te.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:Fn(a.createTime)}),Te.resolve()}getNamedQuery(n,r){return Te.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:ym(a.bundledQuery),readTime:Fn(a.readTime)}),Te.resolve();var a}}class Xv{constructor(){this.Zn=new An(ir.ts),this.es=new An(ir.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const a=new ir(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(n,r){n.forEach(a=>this.addReference(a,r))}removeReference(n,r){this.rs(new ir(n,r))}os(n,r){n.forEach(a=>this.removeReference(a,r))}cs(n){const r=new Ke(new Ot([])),a=new ir(r,n),l=new ir(r,n+1),h=[];return this.es.forEachInRange([a,l],g=>{this.rs(g),h.push(g.key)}),h}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Ke(new Ot([])),a=new ir(r,n),l=new ir(r,n+1);let h=jt();return this.es.forEachInRange([a,l],g=>{h=h.add(g.key)}),h}containsKey(n){const r=new ir(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}class ir{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Ke.comparator(n.key,r.key)||Tt(n.ls,r.ls)}static ns(n,r){return Tt(n.ls,r.ls)||Ke.comparator(n.key,r.key)}}class vT{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new An(ir.ts)}checkEmpty(n){return Te.resolve(0===this.In.length)}addMutationBatch(n,r,a,l){const h=this.fs;this.fs++;const g=new Vv(h,r,a,l);this.In.push(g);for(const w of l)this.ds=this.ds.add(new ir(w.key,h)),this.Ht.addToCollectionParentIndex(n,w.key.path.popLast());return Te.resolve(g)}lookupMutationBatch(n,r){return Te.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const l=this._s(r+1),h=l<0?0:l;return Te.resolve(this.In.length>h?this.In[h]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Te.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const a=new ir(r,0),l=new ir(r,Number.POSITIVE_INFINITY),h=[];return this.ds.forEachInRange([a,l],g=>{const w=this.ws(g.ls);h.push(w)}),Te.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new An(Tt);return r.forEach(l=>{const h=new ir(l,0),g=new ir(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([h,g],w=>{a=a.add(w.ls)})}),Te.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1;let h=a;Ke.isDocumentKey(h)||(h=h.child(""));const g=new ir(new Ke(h),0);let w=new An(Tt);return this.ds.forEachWhile(D=>{const x=D.key.path;return!!a.isPrefixOf(x)&&(x.length===l&&(w=w.add(D.ls)),!0)},g),Te.resolve(this.gs(w))}gs(n){const r=[];return n.forEach(a=>{const l=this.ws(a);null!==l&&r.push(l)}),r}removeMutationBatch(n,r){ut(0===this.ys(r.batchId,"removed")),this.In.shift();let a=this.ds;return Te.forEach(r.mutations,l=>{const h=new ir(l.key,r.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(n,l.key)}).next(()=>{this.ds=a})}te(n){}containsKey(n,r){const a=new ir(r,0),l=this.ds.firstAfterOrEqual(a);return Te.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(n){return Te.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class ET{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Qn(Ke.comparator),this.size=0}addEntry(n,r,a){const l=r.key,h=this.docs.get(l),g=h?h.size:0,w=this.ps(r);return this.docs=this.docs.insert(l,{document:r.clone(),size:w,readTime:a}),this.size+=w-g,this.Ht.addToCollectionParentIndex(n,l.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const a=this.docs.get(r);return Te.resolve(a?a.document.clone():cn.newInvalidDocument(r))}getEntries(n,r){let a=Di();return r.forEach(l=>{const h=this.docs.get(l);a=a.insert(l,h?h.document.clone():cn.newInvalidDocument(l))}),Te.resolve(a)}getDocumentsMatchingQuery(n,r,a){let l=Di();const h=new Ke(r.path.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:w,value:{document:D,readTime:x}}=g.getNext();if(!r.path.isPrefixOf(w.path))break;x.compareTo(a)<=0||Df(r,D)&&(l=l.insert(D.key,D.clone()))}return Te.resolve(l)}Es(n,r){return Te.forEach(this.docs,a=>r(a))}newChangeBuffer(n){return new aA(this)}getSize(n){return Te.resolve(this.size)}}class aA extends hs{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((a,l)=>{l.document.isValidDocument()?r.push(this.Se.addEntry(n,l.document,this.getReadTime(a))):this.Se.removeEntry(a)}),Te.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class wT{constructor(n){this.persistence=n,this.Ts=new fd(r=>Yl(r),Ef),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Is=0,this.As=new Xv,this.targetCount=0,this.Rs=Wa.se()}forEachTarget(n,r){return this.Ts.forEach((a,l)=>r(l)),Te.resolve()}getLastRemoteSnapshotVersion(n){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Te.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),Te.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new Wa(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Te.resolve()}updateTargetData(n,r){return this.ae(r),Te.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Te.resolve()}removeTargets(n,r,a){let l=0;const h=[];return this.Ts.forEach((g,w)=>{w.sequenceNumber<=r&&null===a.get(w.targetId)&&(this.Ts.delete(g),h.push(this.removeMatchingKeysForTargetId(n,w.targetId)),l++)}),Te.waitFor(h).next(()=>l)}getTargetCount(n){return Te.resolve(this.targetCount)}getTargetData(n,r){const a=this.Ts.get(r)||null;return Te.resolve(a)}addMatchingKeys(n,r,a){return this.As.ss(r,a),Te.resolve()}removeMatchingKeys(n,r,a){this.As.os(r,a);const l=this.persistence.referenceDelegate,h=[];return l&&r.forEach(g=>{h.push(l.markPotentiallyOrphaned(n,g))}),Te.waitFor(h)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Te.resolve()}getMatchingKeysForTargetId(n,r){const a=this.As.hs(r);return Te.resolve(a)}containsKey(n,r){return Te.resolve(this.As.containsKey(r))}}class Vf{constructor(n,r){this.bs={},this.Le=new ai(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new wT(this),this.Ht=new uT,this.He=new ET(this.Ht,a=>this.referenceDelegate.Ps(a)),this.N=new Uv(r),this.Je=new _T(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new vT(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,a){Me("MemoryPersistence","Starting transaction:",n);const l=new IT(this.Le.next());return this.referenceDelegate.vs(),a(l).next(h=>this.referenceDelegate.Vs(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ss(n,r){return Te.or(Object.values(this.bs).map(a=>()=>a.containsKey(n,r)))}}class IT extends BI{constructor(n){super(),this.currentSequenceNumber=n}}class eE{constructor(n){this.persistence=n,this.Ds=new Xv,this.Cs=null}static Ns(n){return new eE(n)}get xs(){if(this.Cs)return this.Cs;throw Ze()}addReference(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),Te.resolve()}removeReference(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),Te.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Te.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(l=>this.xs.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(n,r.targetId).next(l=>{l.forEach(h=>this.xs.add(h.toString()))}).next(()=>a.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.xs,a=>{const l=Ke.fromPath(a);return this.ks(n,l).next(h=>{h||r.removeEntry(l)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(a=>{a?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Te.or([()=>Te.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function ob(i,n){return`firestore_clients_${i}_${n}`}function Uf(i,n,r){let a=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(a+=`_${n.uid}`),a}function $o(i,n){return`firestore_targets_${i}_${n}`}class jf{constructor(n,r,a,l){this.user=n,this.batchId=r,this.state=a,this.error=l}static $s(n,r,a){const l=JSON.parse(a);let h,g="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return g&&l.error&&(g="string"==typeof l.error.message&&"string"==typeof l.error.code,g&&(h=new Ae(l.error.code,l.error.message))),g?new jf(n,r,l.state,h):(On("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Bf{constructor(n,r,a){this.targetId=n,this.state=r,this.error=a}static $s(n,r){const a=JSON.parse(r);let l,h="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new Ae(a.error.code,a.error.message))),h?new Bf(n,a.state,l):(On("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class tE{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const a=JSON.parse(r);let l="object"==typeof a&&a.activeTargetIds instanceof Array,h=hm();for(let g=0;l&&g<a.activeTargetIds.length;++g)l=tI(a.activeTargetIds[g]),h=h.add(a.activeTargetIds[g]);return l?new tE(n,h):(On("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class nE{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new nE(r.clientId,r.onlineState):(On("SharedClientState",`Failed to parse online state: ${n}`),null)}}class yd{constructor(){this.activeTargetIds=hm()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class rE{constructor(n,r,a,l,h){this.window=n,this.Oe=r,this.persistenceKey=a,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Qn(Tt),this.started=!1,this.Ks=[];const g=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.js=ob(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new yd),this.Ws=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(w){return`firestore_bundle_loaded_${w}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,Ee.Z)(function*(){const r=yield n.syncEngine.pn();for(const l of r){if(l===n.Ls)continue;const h=n.getItem(ob(n.persistenceKey,l));if(h){const g=tE.$s(l,h);g&&(n.qs=n.qs.insert(g.clientId,g))}}n.Ys();const a=n.storage.getItem(n.Hs);if(a){const l=n.Xs(a);l&&n.Zs(l)}for(const l of n.Ks)n.Us(l);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((a,l)=>{l.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,a){this.ei(n,r,a),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const a=this.storage.getItem($o(this.persistenceKey,n));if(a){const l=Bf.$s(n,a);l&&(r=l.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem($o(this.persistenceKey,n))}updateQueryState(n,r,a){this.ii(n,r,a)}handleUserChange(n,r,a){r.forEach(l=>{this.ni(l)}),this.currentUser=n,a.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Me("SharedClientState","READ",n,r),r}setItem(n,r){Me("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Me("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const a=n;if(a.storageArea===this.storage){if(Me("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void On("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ee.Z)(function*(){if(r.started){if(null!==a.key)if(r.Ws.test(a.key)){if(null==a.newValue){const l=r.ai(a.key);return r.ci(l,null)}{const l=r.ui(a.key,a.newValue);if(l)return r.ci(l.clientId,l)}}else if(r.Gs.test(a.key)){if(null!==a.newValue){const l=r.hi(a.key,a.newValue);if(l)return r.li(l)}}else if(r.zs.test(a.key)){if(null!==a.newValue){const l=r.fi(a.key,a.newValue);if(l)return r.di(l)}}else if(a.key===r.Hs){if(null!==a.newValue){const l=r.Xs(a.newValue);if(l)return r.Zs(l)}}else if(a.key===r.Qs){const l=function(h){let g=ai.T;if(null!=h)try{const w=JSON.parse(h);ut("number"==typeof w),g=w}catch(w){On("SharedClientState","Failed to read sequence number from WebStorage",w)}return g}(a.newValue);l!==ai.T&&r.sequenceNumberHandler(l)}else if(a.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(a)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,a){const l=new jf(this.currentUser,n,r,a),h=Uf(this.persistenceKey,this.currentUser,n);this.setItem(h,l.Os())}ni(n){const r=Uf(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,a){const l=$o(this.persistenceKey,n),h=new Bf(n,r,a);this.setItem(l,h.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const a=this.ai(n);return tE.$s(a,r)}hi(n,r){const a=this.Gs.exec(n),l=Number(a[1]);return jf.$s(new Rr(void 0!==a[2]?a[2]:null),l,r)}fi(n,r){const a=this.zs.exec(n),l=Number(a[1]);return Bf.$s(l,r)}Xs(n){return nE.$s(n)}li(n){var r=this;return(0,Ee.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Me("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const a=r?this.qs.insert(n,r):this.qs.remove(n),l=this.ti(this.qs),h=this.ti(a),g=[],w=[];return h.forEach(D=>{l.has(D)||g.push(D)}),l.forEach(D=>{h.has(D)||w.push(D)}),this.syncEngine.gi(g,w).then(()=>{this.qs=a})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=hm();return n.forEach((a,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class ab{constructor(){this.yi=new yd,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,a){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,a){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new yd,Promise.resolve()}handleUserChange(n,r,a){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class ub{Ei(n){}shutdown(){}}class iE{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cb{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class lb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,a,l){const h=this.Bi(n,r);Me("RestConnection","Sending: ",h,a);const g={};return this.Ui(g,l),this.qi(n,h,g,a).then(w=>(Me("RestConnection","Received: ",w),w),w=>{throw gf("RestConnection",`${n} failed with error: `,w,"url: ",h,"request:",a),w})}Ki(n,r,a,l){return this.Li(n,r,a,l)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+ql,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}Bi(n,r){return`${this.Fi}/v1/${r}:${sE[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,a,l){return new Promise((h,g)=>{const w=new uv;w.listenOnce(ov.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Jg.NO_ERROR:const x=w.getResponseJson();Me("Connection","XHR received:",JSON.stringify(x)),h(x);break;case Jg.TIMEOUT:Me("Connection",'RPC "'+n+'" timed out'),g(new Ae(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Jg.HTTP_ERROR:const N=w.getStatus();if(Me("Connection",'RPC "'+n+'" failed with status:',N,"response text:",w.getResponseText()),N>0){const P=w.getResponseJson().error;if(P&&P.status&&P.message){const K=function(Z){const we=Z.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(we)>=0?we:fe.UNKNOWN}(P.status);g(new Ae(K,P.message))}else g(new Ae(fe.UNKNOWN,"Server responded with status "+w.getStatus()))}else g(new Ae(fe.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Me("Connection",'RPC "'+n+'" completed.')}});const D=JSON.stringify(l);w.send(r,"POST",D,a,15)})}ji(n,r){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],l=new Qg,h=Qh(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new AD({})),this.Ui(g.initMessageHeaders,r),(0,Ut.uI)()||(0,Ut.b$)()||(0,Ut.d)()||(0,Ut.w1)()||(0,Ut.Mn)()||(0,Ut.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const w=a.join("");Me("Connection","Creating WebChannel: "+w,g);const D=l.createWebChannel(w,g);let x=!1,N=!1;const P=new cb({vi:Z=>{N?Me("Connection","Not sending because WebChannel is closed:",Z):(x||(Me("Connection","Opening WebChannel transport."),D.open(),x=!0),Me("Connection","WebChannel sending:",Z),D.send(Z))},Vi:()=>D.close()}),K=(Z,we,Ve)=>{Z.listen(we,Be=>{try{Ve(Be)}catch(_t){setTimeout(()=>{throw _t},0)}})};return K(D,pf.EventType.OPEN,()=>{N||Me("Connection","WebChannel transport opened.")}),K(D,pf.EventType.CLOSE,()=>{N||(N=!0,Me("Connection","WebChannel transport closed"),P.$i())}),K(D,pf.EventType.ERROR,Z=>{N||(N=!0,gf("Connection","WebChannel transport errored:",Z),P.$i(new Ae(fe.UNAVAILABLE,"The operation could not be completed")))}),K(D,pf.EventType.MESSAGE,Z=>{var we;if(!N){const Ve=Z.data[0];ut(!!Ve);const Be=Ve,_t=Be.error||(null===(we=Be[0])||void 0===we?void 0:we.error);if(_t){Me("Connection","WebChannel received error:",_t);const xt=_t.status;let wt=function(Mr){const Bc=Gn[Mr];if(void 0!==Bc)return DI(Bc)}(xt),Ft=_t.message;void 0===wt&&(wt=fe.INTERNAL,Ft="Unknown error status: "+xt+" with message "+_t.message),N=!0,P.$i(new Ae(wt,Ft)),D.close()}else Me("Connection","WebChannel received:",Ve),P.Oi(Ve)}}),K(h,Kw.STAT_EVENT,Z=>{Z.stat===av_PROXY?Me("Connection","Detected buffering proxy"):Z.stat===av_NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.ki()},0),P}}function db(){return"undefined"!=typeof window?window:null}function Am(){return"undefined"!=typeof document?document:null}function _d(i){return new YD(i,!0)}class oE{constructor(n,r,a=1e3,l=1.5,h=6e4){this.Oe=n,this.timerId=r,this.Qi=a,this.Wi=l,this.Gi=h,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),a=Math.max(0,Date.now()-this.Ji),l=Math.max(0,r-a);l>0&&Me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class aE{constructor(n,r,a,l,h,g){this.Oe=n,this.er=a,this.nr=l,this.credentialsProvider=h,this.listener=g,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new oE(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,Ee.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,Ee.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var a=this;return(0,Ee.Z)(function*(){a._r(),a.rr.cancel(),a.sr++,3!==n?a.rr.reset():r&&r.code===fe.RESOURCE_EXHAUSTED?(On(r.toString()),On("Using maximum backoff delay to prevent overloading the backend."),a.rr.Yi()):r&&r.code===fe.UNAUTHENTICATED&&a.credentialsProvider.invalidateToken(),null!==a.stream&&(a.mr(),a.stream.close(),a.stream=null),a.state=n,yield a.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(a=>{this.sr===r&&this.yr(a)},a=>{n(()=>{const l=new Ae(fe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.pr(l)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(a=>{r(()=>this.pr(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}ur(){var n=this;this.state=4,this.rr.Xi((0,Ee.Z)(function*(){n.state=0,n.start()}))}pr(n){return Me("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xm extends aE{constructor(n,r,a,l,h){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,a,h),this.N=l}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const a="NO_CHANGE"===(D=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:Ze(),l=n.targetChange.targetIds||[],h=function(D,x){return D.D?(ut(void 0===x||"string"==typeof x),Yn.fromBase64String(x||"")):(ut(void 0===x||x instanceof Uint8Array),Yn.fromUint8Array(x||new Uint8Array))}(i,n.targetChange.resumeToken),g=n.targetChange.cause,w=g&&function(D){const x=void 0===D.code?fe.UNKNOWN:DI(D.code);return new Ae(x,D.message||"")}(g);r=new zD(a,l,h,w||null)}else if("documentChange"in n){const a=n.documentChange,l=Ui(i,a.document.name),h=Fn(a.document.updateTime),g=new nr({mapValue:{fields:a.document.fields}}),w=cn.newFoundDocument(l,h,g);r=new Av(a.targetIds||[],a.removedTargetIds||[],w.key,w)}else if("documentDelete"in n){const a=n.documentDelete,l=Ui(i,a.document),h=a.readTime?Fn(a.readTime):Et.min(),g=cn.newNoDocument(l,h);r=new Av([],a.removedTargetIds||[],g.key,g)}else if("documentRemove"in n){const a=n.documentRemove,l=Ui(i,a.document);r=new Av([],a.removedTargetIds||[],l,null)}else{if(!("filter"in n))return Ze();{const a=n.filter,h=new WD(a.count||0);r=new fm(a.targetId,h)}}var D;return r}(this.N,n),a=function(l){if(!("targetChange"in l))return Et.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Et.min():h.readTime?Fn(h.readTime):Et.min()}(n);return this.listener.Tr(r,a)}Ir(n){const r={};r.database=nd(this.N),r.addTarget=function(l,h){let g;const w=h.target;return g=wf(w)?{documents:MI(l,w)}:{query:Nf(l,w)},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?g.resumeToken=RI(l,h.resumeToken):h.snapshotVersion.compareTo(Et.min())>0&&(g.readTime=ja(l,h.snapshotVersion.toTimestamp())),g}(this.N,n);const a=function(i,n){const r=function(a,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ze()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);a&&(r.labels=a),this.wr(r)}Ar(n){const r={};r.database=nd(this.N),r.removeTarget=n,this.wr(r)}}class Rm extends aE{constructor(n,r,a,l,h){super(n,"write_stream_connection_backoff","write_stream_idle",r,a,h),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(ut(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(ut(void 0!==n),i.map(r=>function(a,l){let h=Fn(a.updateTime?a.updateTime:l);return h.isEqual(Et.min())&&(h=Fn(l)),new yI(h,a.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),a=Fn(n.commitTime);return this.listener.vr(a,r)}return ut(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=nd(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(a=>Ba(this.N,a))};this.wr(r)}}class uA extends class{}{constructor(n,r,a){super(),this.credentials=n,this.nr=r,this.N=a,this.Dr=!1}Cr(){if(this.Dr)throw new Ae(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Ae(fe.UNKNOWN,l.toString())})}Ki(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Ae(fe.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class $f{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(On(r),this.$r=!1):Me("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Bt{constructor(n,r,a,l,h){var g=this;this.localStore=n,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=h,this.Qr.Ei(w=>{a.enqueueAndForget((0,Ee.Z)(function*(){var D;Ho(g)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,Ee.Z)(function*(x){const N=Ue(x);N.Kr.add(4),yield Js(N),N.Wr.set("Unknown"),N.Kr.delete(4),yield Hi(N)}),function(x){return D.apply(this,arguments)})(g))}))}),this.Wr=new $f(a,l)}}function Hi(i){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,Ee.Z)(function*(i){if(Ho(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Js(i){return hb.apply(this,arguments)}function hb(){return(hb=(0,Ee.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function st(i,n){const r=Ue(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),Nm(r)?fb(r):Go(r).cr()&&Hf(r,n))}function Or(i,n){const r=Ue(i),a=Go(r);r.qr.delete(n),a.cr()&&Za(r,n),0===r.qr.size&&(a.cr()?a.lr():Ho(r)&&r.Wr.set("Unknown"))}function Hf(i,n){i.Gr.Y(n.targetId),Go(i).Ir(n)}function Za(i,n){i.Gr.Y(n),Go(i).Ar(n)}function fb(i){i.Gr=new xI({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Go(i).start(),i.Wr.Or()}function Nm(i){return Ho(i)&&!Go(i).ar()&&i.qr.size>0}function Ho(i){return 0===Ue(i).Kr.size}function bT(i){i.Gr=void 0}function CT(i){return uE.apply(this,arguments)}function uE(){return(uE=(0,Ee.Z)(function*(i){i.qr.forEach((n,r)=>{Hf(i,n)})})).apply(this,arguments)}function Gi(i,n){return ln.apply(this,arguments)}function ln(){return(ln=(0,Ee.Z)(function*(i,n){bT(i),Nm(i)?(i.Wr.Lr(n),fb(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function fs(i,n,r){return Om.apply(this,arguments)}function Om(){return(Om=(0,Ee.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof zD&&2===n.state&&n.cause)try{yield(a=(0,Ee.Z)(function*(l,h){const g=h.cause;for(const w of h.targetIds)l.qr.has(w)&&(yield l.remoteSyncer.rejectListen(w,g),l.qr.delete(w),l.Gr.removeTarget(w))}),function(l,h){return a.apply(this,arguments)})(i,n)}catch(a){Me("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),a),yield Mm(i,a)}else if(n instanceof Av?i.Gr.rt(n):n instanceof fm?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(Et.min()))try{const a=yield rb(i.localStore);r.compareTo(a)>=0&&(yield function(l,h){const g=l.Gr._t(h);return g.targetChanges.forEach((w,D)=>{if(w.resumeToken.approximateByteSize()>0){const x=l.qr.get(D);x&&l.qr.set(D,x.withResumeToken(w.resumeToken,h))}}),g.targetMismatches.forEach(w=>{const D=l.qr.get(w);if(!D)return;l.qr.set(w,D.withResumeToken(Yn.EMPTY_BYTE_STRING,D.snapshotVersion)),Za(l,w);const x=new Ha(D.target,w,1,D.sequenceNumber);Hf(l,x)}),l.remoteSyncer.applyRemoteEvent(g)}(i,r))}catch(a){Me("RemoteStore","Failed to raise snapshot:",a),yield Mm(i,a)}var a})).apply(this,arguments)}function Mm(i,n,r){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,Ee.Z)(function*(i,n,r){if(!Sc(n))throw n;i.Kr.add(1),yield Js(i),i.Wr.set("Offline"),r||(r=()=>rb(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield Hi(i)}))})).apply(this,arguments)}function km(i,n){return n().catch(r=>Mm(i,r,n))}function ps(i){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,Ee.Z)(function*(i){const n=Ue(i),r=Ya(n);let a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;DT(n);)try{const l=yield Sm(n.localStore,a);if(null===l){0===n.Ur.length&&r.lr();break}a=l.batchId,Pc(n,l)}catch(l){yield Mm(n,l)}pb(n)&&cE(n)})).apply(this,arguments)}function DT(i){return Ho(i)&&i.Ur.length<10}function Pc(i,n){i.Ur.push(n);const r=Ya(i);r.cr()&&r.br&&r.Pr(n.mutations)}function pb(i){return Ho(i)&&!Ya(i).ar()&&i.Ur.length>0}function cE(i){Ya(i).start()}function lE(i){return kc.apply(this,arguments)}function kc(){return(kc=(0,Ee.Z)(function*(i){Ya(i).Sr()})).apply(this,arguments)}function dE(i){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,Ee.Z)(function*(i){const n=Ya(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function vd(i,n,r){return hE.apply(this,arguments)}function hE(){return(hE=(0,Ee.Z)(function*(i,n,r){const a=i.Ur.shift(),l=Mf.from(a,n,r);yield km(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield ps(i)})).apply(this,arguments)}function Fm(i,n){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Ee.Z)(function*(i,n){var r;n&&Ya(i).br&&(yield(r=(0,Ee.Z)(function*(a,l){if(CI(h=l.code)&&h!==fe.ABORTED){const g=a.Ur.shift();Ya(a).hr(),yield km(a,()=>a.remoteSyncer.rejectFailedWrite(g.batchId,l)),yield ps(a)}var h}),function(a,l){return r.apply(this,arguments)})(i,n)),pb(i)&&cE(i)})).apply(this,arguments)}function Um(i,n){return jm.apply(this,arguments)}function jm(){return(jm=(0,Ee.Z)(function*(i,n){const r=Ue(i);n?(r.Kr.delete(2),yield Hi(r)):n||(r.Kr.add(2),yield Js(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Go(i){return i.zr||(i.zr=function(n,r,a){const l=Ue(n);return l.Cr(),new xm(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:CT.bind(null,i),Ci:Gi.bind(null,i),Tr:fs.bind(null,i)}),i.jr.push(function(){var n=(0,Ee.Z)(function*(r){r?(i.zr.hr(),Nm(i)?fb(i):i.Wr.set("Unknown")):(yield i.zr.stop(),bT(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function Ya(i){return i.Hr||(i.Hr=function(n,r,a){const l=Ue(n);return l.Cr(),new Rm(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:lE.bind(null,i),Ci:Fm.bind(null,i),Vr:dE.bind(null,i),vr:vd.bind(null,i)}),i.jr.push(function(){var n=(0,Ee.Z)(function*(r){r?(i.Hr.hr(),yield ps(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Me("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class Gf{constructor(n,r,a,l,h){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=a,this.op=l,this.removalCallback=h,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(n,r,a,l,h){const g=Date.now()+a,w=new Gf(n,r,g,l,h);return w.start(a),w}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(fe.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qa(i,n){if(On("AsyncQueue",`${n}: ${i}`),Sc(i))return new Ae(fe.UNAVAILABLE,`${n}: ${i}`);throw i}class Wf{constructor(n){this.comparator=n?(r,a)=>n(r,a)||Ke.comparator(r.key,a.key):(r,a)=>Ke.comparator(r.key,a.key),this.keyedMap=dm(),this.sortedSet=new Qn(this.comparator)}static emptySet(n){return new Wf(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,a)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof Wf)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const a=new Wf;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}class TT{constructor(){this.Jr=new Qn(Ke.comparator)}track(n){const r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Ze():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,a)=>{n.push(a)}),n}}class nt{constructor(n,r,a,l,h,g,w,D){this.query=n,this.docs=r,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=D}static fromInitialDocuments(n,r,a,l){const h=[];return r.forEach(g=>{h.push({type:0,doc:g})}),new nt(n,r,Wf.emptySet(r),h,a,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&zr(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0}}class cA{constructor(){this.Xr=void 0,this.listeners=[]}}class zf{constructor(){this.queries=new fd(n=>vv(n),zr),this.onlineState="Unknown",this.Zr=new Set}}function fE(i,n){return pE.apply(this,arguments)}function pE(){return(pE=(0,Ee.Z)(function*(i,n){const r=Ue(i),a=n.query;let l=!1,h=r.queries.get(a);if(h||(l=!0,h=new cA),l)try{h.Xr=yield r.onListen(a)}catch(g){const w=Qa(g,`Initialization of query '${om(n.query)}' failed`);return void n.onError(w)}r.queries.set(a,h),h.listeners.push(n),n.eo(r.onlineState),h.Xr&&n.no(h.Xr)&&sr(r)})).apply(this,arguments)}function gE(i,n){return gb.apply(this,arguments)}function gb(){return(gb=(0,Ee.Z)(function*(i,n){const r=Ue(i),a=n.query;let l=!1;const h=r.queries.get(a);if(h){const g=h.listeners.indexOf(n);g>=0&&(h.listeners.splice(g,1),l=0===h.listeners.length)}if(l)return r.queries.delete(a),r.onUnlisten(a)})).apply(this,arguments)}function lA(i,n){const r=Ue(i);let a=!1;for(const l of n){const g=r.queries.get(l.query);if(g){for(const w of g.listeners)w.no(l)&&(a=!0);g.Xr=l}}a&&sr(r)}function ST(i,n,r){const a=Ue(i),l=a.queries.get(n);if(l)for(const h of l.listeners)h.onError(r);a.queries.delete(n)}function sr(i){i.Zr.forEach(n=>{n.next()})}class mE{constructor(n,r,a){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=a||{}}no(n){if(!this.options.includeMetadataChanges){const a=[];for(const l of n.docChanges)3!==l.type&&a.push(l);n=new nt(n.query,n.docs,n.oldDocs,a,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=nt.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class AT{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class Bm{constructor(n){this.N=n}zn(n){return Ui(this.N,n)}Hn(n){return n.metadata.exists?NI(this.N,n.document,!1):cn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Fn(n)}}class xT{constructor(n,r,a){this.lo=n,this.localStore=r,this.N=a,this.queries=[],this.documents=[],this.progress=mb(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,a=new Bm(this.N);for(const l of n)if(l.metadata.queries){const h=a.zn(l.metadata.name);for(const g of l.metadata.queries){const w=(r.get(g)||jt()).add(h);r.set(g,w)}}return r}complete(){var n=this;return(0,Ee.Z)(function*(){const r=yield function(i,n,r,a){return Qv.apply(this,arguments)}(n.localStore,new Bm(n.N),n.documents,n.lo.id),a=n.wo(n.documents);for(const l of n.queries)yield yT(n.localStore,l,a.get(l.name));return n.progress.taskState="Success",new QI(Object.assign({},n.progress),r)})()}}function mb(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class yb{constructor(n){this.key=n}}class _b{constructor(n){this.key=n}}class vb{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=jt(),this.mutatedKeys=jt(),this.po=hI(n),this.Eo=new Wf(this.po)}get To(){return this._o}Io(n,r){const a=r?r.Ao:new TT,l=r?r.Eo:this.Eo;let h=r?r.mutatedKeys:this.mutatedKeys,g=l,w=!1;const D=yv(this.query)&&l.size===this.query.limit?l.last():null,x=Cf(this.query)&&l.size===this.query.limit?l.first():null;if(n.inorderTraversal((N,P)=>{const K=l.get(N),Z=Df(this.query,P)?P:null,we=!!K&&this.mutatedKeys.has(K.key),Ve=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Be=!1;K&&Z?K.data.isEqual(Z.data)?we!==Ve&&(a.track({type:3,doc:Z}),Be=!0):this.Ro(K,Z)||(a.track({type:2,doc:Z}),Be=!0,(D&&this.po(Z,D)>0||x&&this.po(Z,x)<0)&&(w=!0)):!K&&Z?(a.track({type:0,doc:Z}),Be=!0):K&&!Z&&(a.track({type:1,doc:K}),Be=!0,(D||x)&&(w=!0)),Be&&(Z?(g=g.add(Z),h=Ve?h.add(N):h.delete(N)):(g=g.delete(N),h=h.delete(N)))}),yv(this.query)||Cf(this.query))for(;g.size>this.query.limit;){const N=yv(this.query)?g.last():g.first();g=g.delete(N.key),h=h.delete(N.key),a.track({type:1,doc:N})}return{Eo:g,Ao:a,Ln:w,mutatedKeys:h}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,a){const l=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const h=n.Ao.Yr();h.sort((x,N)=>function(P,K){const Z=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return Z(P)-Z(K)}(x.type,N.type)||this.po(x.doc,N.doc)),this.bo(a);const g=r?this.Po():[],w=0===this.yo.size&&this.current?1:0,D=w!==this.mo;return this.mo=w,0!==h.length||D?{snapshot:new nt(this.query,n.Eo,l,h,n.mutatedKeys,0===w,D,!1),vo:g}:{vo:g}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new TT,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=jt(),this.Eo.forEach(a=>{this.Vo(a.key)&&(this.yo=this.yo.add(a.key))});const r=[];return n.forEach(a=>{this.yo.has(a)||r.push(new _b(a))}),this.yo.forEach(a=>{n.has(a)||r.push(new yb(a))}),r}So(n){this._o=n.Gn,this.yo=jt();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return nt.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class RT{constructor(n,r,a){this.query=n,this.targetId=r,this.view=a}}class yE{constructor(n){this.key=n,this.Co=!1}}class NT{constructor(n,r,a,l,h,g){this.localStore=n,this.remoteStore=r,this.eventManager=a,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.No={},this.xo=new fd(w=>vv(w),zr),this.ko=new Map,this.$o=new Set,this.Oo=new Qn(Ke.comparator),this.Fo=new Map,this.Mo=new Xv,this.Lo={},this.Bo=new Map,this.Uo=Wa.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function OT(i,n){return $m.apply(this,arguments)}function $m(){return($m=(0,Ee.Z)(function*(i,n){const r=qm(i);let a,l;const h=r.xo.get(n);if(h)a=h.targetId,r.sharedClientState.addLocalQueryTarget(a),l=h.view.Do();else{const g=yield pd(r.localStore,kn(n)),w=r.sharedClientState.addLocalQueryTarget(g.targetId);a=g.targetId,l=yield qf(r,n,a,"current"===w),r.isPrimaryClient&&st(r.remoteStore,g)}return l})).apply(this,arguments)}function qf(i,n,r,a){return _E.apply(this,arguments)}function _E(){return(_E=(0,Ee.Z)(function*(i,n,r,a){i.Ko=(N,P,K)=>{return(Z=(0,Ee.Z)(function*(we,Ve,Be,_t){let xt=Ve.view.Io(Be);xt.Ln&&(xt=yield Oc(we.localStore,Ve.query,!1).then(({documents:Mr})=>Ve.view.Io(Mr,xt)));const wt=_t&&_t.targetChanges.get(Ve.targetId),Ft=Ve.view.applyChanges(xt,we.isPrimaryClient,wt);return Gm(we,Ve.targetId,Ft.vo),Ft.snapshot}),function(we,Ve,Be,_t){return Z.apply(this,arguments)})(i,N,P,K);var Z};const l=yield Oc(i.localStore,n,!0),h=new vb(n,l.Gn),g=h.Io(l.documents),w=Qs.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==i.onlineState),D=h.applyChanges(g,i.isPrimaryClient,w);Gm(i,r,D.vo);const x=new RT(n,r,h);return i.xo.set(n,x),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),D.snapshot})).apply(this,arguments)}function dA(i,n){return vE.apply(this,arguments)}function vE(){return(vE=(0,Ee.Z)(function*(i,n){const r=Ue(i),a=r.xo.get(n),l=r.ko.get(a.targetId);if(l.length>1)return r.ko.set(a.targetId,l.filter(h=>!zr(h,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Nc(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Or(r.remoteStore,a.targetId),Ed(r,a.targetId)}).catch(Si))):(Ed(r,a.targetId),yield Nc(r.localStore,a.targetId,!0))})).apply(this,arguments)}function EE(){return(EE=(0,Ee.Z)(function*(i,n,r){const a=PE(i);try{const l=yield function(h,g){const w=Ue(h),D=Zn.now(),x=g.reduce((P,K)=>P.add(K.key),jt());let N;return w.persistence.runTransaction("Locally write mutations","readwrite",P=>w.Qn.Pn(P,x).next(K=>{N=K;const Z=[];for(const we of g){const Ve=GD(we,N.get(we.key));null!=Ve&&Z.push(new Ua(we.key,Ve,gv(Ve.value.mapValue),Ln.exists(!0)))}return w.In.addMutationBatch(P,D,Z,g)})).then(P=>(P.applyToLocalDocumentSet(N),{batchId:P.batchId,changes:N}))}(a.localStore,n);a.sharedClientState.addPendingMutation(l.batchId),function(h,g,w){let D=h.Lo[h.currentUser.toKey()];D||(D=new Qn(Tt)),D=D.insert(g,w),h.Lo[h.currentUser.toKey()]=D}(a,l.batchId,r),yield Ja(a,l.changes),yield ps(a.remoteStore)}catch(l){const h=Qa(l,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function Eb(i,n){return wE.apply(this,arguments)}function wE(){return(wE=(0,Ee.Z)(function*(i,n){const r=Ue(i);try{const a=yield pT(r.localStore,n);n.targetChanges.forEach((l,h)=>{const g=r.Fo.get(h);g&&(ut(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?g.Co=!0:l.modifiedDocuments.size>0?ut(g.Co):l.removedDocuments.size>0&&(ut(g.Co),g.Co=!1))}),yield Ja(r,a,n)}catch(a){yield Si(a)}})).apply(this,arguments)}function wb(i,n,r){const a=Ue(i);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const l=[];a.xo.forEach((h,g)=>{const w=g.view.eo(n);w.snapshot&&l.push(w.snapshot)}),function(h,g){const w=Ue(h);w.onlineState=g;let D=!1;w.queries.forEach((x,N)=>{for(const P of N.listeners)P.eo(g)&&(D=!0)}),D&&sr(w)}(a.eventManager,n),l.length&&a.No.Tr(l),a.onlineState=n,a.isPrimaryClient&&a.sharedClientState.setOnlineState(n)}}function Kf(i,n,r){return IE.apply(this,arguments)}function IE(){return(IE=(0,Ee.Z)(function*(i,n,r){const a=Ue(i);a.sharedClientState.updateQueryState(n,"rejected",r);const l=a.Fo.get(n),h=l&&l.key;if(h){let g=new Qn(Ke.comparator);g=g.insert(h,cn.newNoDocument(h,Et.min()));const w=jt().add(h),D=new Rf(Et.min(),new Map,new An(Tt),g,w);yield Eb(a,D),a.Oo=a.Oo.remove(h),a.Fo.delete(n),TE(a)}else yield Nc(a.localStore,n,!1).then(()=>Ed(a,n,r)).catch(Si)})).apply(this,arguments)}function PT(i,n){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,Ee.Z)(function*(i,n){const r=Ue(i),a=n.batch.batchId;try{const l=yield nb(r.localStore,n);DE(r,a,null),CE(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Ja(r,l)}catch(l){yield Si(l)}})).apply(this,arguments)}function Zf(i,n,r){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,Ee.Z)(function*(i,n,r){const a=Ue(i);try{const l=yield function(h,g){const w=Ue(h);return w.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let x;return w.In.lookupMutationBatch(D,g).next(N=>(ut(null!==N),x=N.keys(),w.In.removeMutationBatch(D,N))).next(()=>w.In.performConsistencyCheck(D)).next(()=>w.Qn.Pn(D,x))})}(a.localStore,n);DE(a,n,r),CE(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),yield Ja(a,l)}catch(l){yield Si(l)}})).apply(this,arguments)}function bE(){return(bE=(0,Ee.Z)(function*(i,n){const r=Ue(i);Ho(r.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(h){const g=Ue(h);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",w=>g.In.getHighestUnacknowledgedBatchId(w))}(r.localStore);if(-1===a)return void n.resolve();const l=r.Bo.get(a)||[];l.push(n),r.Bo.set(a,l)}catch(a){const l=Qa(a,"Initialization of waitForPendingWrites() operation failed");n.reject(l)}})).apply(this,arguments)}function CE(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function DE(i,n,r){const a=Ue(i);let l=a.Lo[a.currentUser.toKey()];if(l){const h=l.get(n);h&&(r?h.reject(r):h.resolve(),l=l.remove(n)),a.Lo[a.currentUser.toKey()]=l}}function Ed(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const a of i.ko.get(n))i.xo.delete(a),r&&i.No.jo(a,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(a=>{i.Mo.containsKey(a)||Cb(i,a)})}function Cb(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Or(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),TE(i))}function Gm(i,n,r){for(const a of r)a instanceof yb?(i.Mo.addReference(a.key,n),kT(i,a)):a instanceof _b?(Me("SyncEngine","Document no longer in limbo: "+a.key),i.Mo.removeReference(a.key,n),i.Mo.containsKey(a.key)||Cb(i,a.key)):Ze()}function kT(i,n){const r=n.key,a=r.path.canonicalString();i.Oo.get(r)||i.$o.has(a)||(Me("SyncEngine","New document in limbo: "+r),i.$o.add(a),TE(i))}function TE(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new Ke(Ot.fromString(n)),a=i.Uo.next();i.Fo.set(a,new yE(r)),i.Oo=i.Oo.insert(r,a),st(i.remoteStore,new Ha(kn(vc(r.path)),a,2,ai.T))}}function Ja(i,n,r){return Db.apply(this,arguments)}function Db(){return(Db=(0,Ee.Z)(function*(i,n,r){const a=Ue(i),l=[],h=[],g=[];var w;a.xo.isEmpty()||(a.xo.forEach((w,D)=>{g.push(a.Ko(D,n,r).then(x=>{if(x){a.isPrimaryClient&&a.sharedClientState.updateQueryState(D.targetId,x.fromCache?"not-current":"current"),l.push(x);const N=XI.kn(D.targetId,x);h.push(N)}}))}),yield Promise.all(g),a.No.Tr(l),yield(w=(0,Ee.Z)(function*(D,x){const N=Ue(D);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Te.forEach(x,K=>Te.forEach(K.Nn,Z=>N.persistence.referenceDelegate.addReference(P,K.targetId,Z)).next(()=>Te.forEach(K.xn,Z=>N.persistence.referenceDelegate.removeReference(P,K.targetId,Z)))))}catch(P){if(!Sc(P))throw P;Me("LocalStore","Failed to update sequence numbers: "+P)}for(const P of x){const K=P.targetId;if(!P.fromCache){const Z=N.Un.get(K),Ve=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);N.Un=N.Un.insert(K,Ve)}}}),function(D,x){return w.apply(this,arguments)})(a.localStore,h))})).apply(this,arguments)}function hA(i,n){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,Ee.Z)(function*(i,n){const r=Ue(i);if(!r.currentUser.isEqual(n)){Me("SyncEngine","User change. New user:",n.toKey());const a=yield Zv(r.localStore,n);r.currentUser=n,(l=r).Bo.forEach(g=>{g.forEach(w=>{w.reject(new Ae(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),yield Ja(r,a.Wn)}var l})).apply(this,arguments)}function LT(i,n){const r=Ue(i),a=r.Fo.get(n);if(a&&a.Co)return jt().add(a.key);{let l=jt();const h=r.ko.get(n);if(!h)return l;for(const g of h){const w=r.xo.get(g);l=l.unionWith(w.view.To)}return l}}function FT(i,n){return SE.apply(this,arguments)}function SE(){return(SE=(0,Ee.Z)(function*(i,n){const r=Ue(i),a=yield Oc(r.localStore,n.query,!0),l=n.view.So(a);return r.isPrimaryClient&&Gm(r,n.targetId,l.vo),l})).apply(this,arguments)}function VT(i){return AE.apply(this,arguments)}function AE(){return(AE=(0,Ee.Z)(function*(i){const n=Ue(i);return ib(n.localStore).then(r=>Ja(n,r))})).apply(this,arguments)}function UT(i,n,r,a){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,Ee.Z)(function*(i,n,r,a){const l=Ue(i),h=yield function(g,w){const D=Ue(g),x=Ue(D.In);return D.persistence.runTransaction("Lookup mutation documents","readonly",N=>x.Xt(N,w).next(P=>P?D.Qn.Pn(N,P):Te.resolve(null)))}(l.localStore,n);var w;null!==h?("pending"===r?yield ps(l.remoteStore):"acknowledged"===r||"rejected"===r?(DE(l,n,a||null),CE(l,n),w=n,Ue(Ue(l.localStore).In).te(w)):Ze(),yield Ja(l,h)):Me("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function RE(){return(RE=(0,Ee.Z)(function*(i,n){const r=Ue(i);if(qm(r),PE(r),!0===n&&!0!==r.qo){const a=r.sharedClientState.getAllActiveQueryTargets(),l=yield Lc(r,a.toArray());r.qo=!0,yield Um(r.remoteStore,!0);for(const h of l)st(r.remoteStore,h)}else if(!1===n&&!1!==r.qo){const a=[];let l=Promise.resolve();r.ko.forEach((h,g)=>{r.sharedClientState.isLocalQueryTarget(g)?a.push(g):l=l.then(()=>(Ed(r,g),Nc(r.localStore,g,!0))),Or(r.remoteStore,g)}),yield l,yield Lc(r,a),function(h){const g=Ue(h);g.Fo.forEach((w,D)=>{Or(g.remoteStore,D)}),g.Mo.us(),g.Fo=new Map,g.Oo=new Qn(Ke.comparator)}(r),r.qo=!1,yield Um(r.remoteStore,!1)}})).apply(this,arguments)}function Lc(i,n,r){return or.apply(this,arguments)}function or(){return(or=(0,Ee.Z)(function*(i,n,r){const a=Ue(i),l=[],h=[];for(const g of n){let w;const D=a.ko.get(g);if(D&&0!==D.length){w=yield pd(a.localStore,kn(D[0]));for(const x of D){const N=a.xo.get(x),P=yield FT(a,N);P.snapshot&&h.push(P.snapshot)}}else{const x=yield md(a.localStore,g);w=yield pd(a.localStore,x),yield qf(a,NE(x),g,!1)}l.push(w)}return a.No.Tr(h),l})).apply(this,arguments)}function NE(i){return dI(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gs(i){const n=Ue(i);return Ue(Ue(n.localStore).persistence).pn()}function OE(i,n,r,a){return ME.apply(this,arguments)}function ME(){return(ME=(0,Ee.Z)(function*(i,n,r,a){const l=Ue(i);if(l.qo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(n))switch(r){case"current":case"not-current":{const h=yield ib(l.localStore),g=Rf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Ja(l,h,g);break}case"rejected":yield Nc(l.localStore,n,!0),Ed(l,n,a);break;default:Ze()}})).apply(this,arguments)}function Tb(i,n,r){return zm.apply(this,arguments)}function zm(){return(zm=(0,Ee.Z)(function*(i,n,r){const a=qm(i);if(a.qo){for(const l of n){if(a.ko.has(l)){Me("SyncEngine","Adding an already active target "+l);continue}const h=yield md(a.localStore,l),g=yield pd(a.localStore,h);yield qf(a,NE(h),g.targetId,!1),st(a.remoteStore,g)}for(const l of r)a.ko.has(l)&&(yield Nc(a.localStore,l,!1).then(()=>{Or(a.remoteStore,l),Ed(a,l)}).catch(Si))}})).apply(this,arguments)}function qm(i){const n=Ue(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=Eb.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=LT.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=Kf.bind(null,n),n.No.Tr=lA.bind(null,n.eventManager),n.No.jo=ST.bind(null,n.eventManager),n}function PE(i){const n=Ue(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=PT.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=Zf.bind(null,n),n}class Sb{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,Ee.Z)(function*(){r.N=_d(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return tb(this.persistence,new eb,n.initialUser,this.N)}Go(n){return new Vf(eE.Ns,this.N)}Wo(n){return new ab}terminate(){var n=this;return(0,Ee.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class kE extends Sb{constructor(n,r,a){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,a=this;return(0,Ee.Z)(function*(){yield r().call(a,n),yield function(i){return sb.apply(this,arguments)}(a.localStore),yield a.Jo.initialize(a,n),yield PE(a.Jo.syncEngine),yield ps(a.Jo.remoteStore),yield a.persistence.nn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ho(n){return tb(this.persistence,new eb,n.initialUser,this.N)}zo(n){return new dT(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=Ff(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new Kv(this.synchronizeTabs,r,n.clientId,a,n.asyncQueue,db(),Am(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new ab}}class BT extends kE{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,a=this;return(0,Ee.Z)(function*(){yield r().call(a,n);const l=a.Jo.syncEngine;a.sharedClientState instanceof rE&&(a.sharedClientState.syncEngine={_i:UT.bind(null,l),mi:OE.bind(null,l),gi:Tb.bind(null,l),pn:gs.bind(null,l),wi:VT.bind(null,l)},yield a.sharedClientState.start()),yield a.persistence.nn(function(){var h=(0,Ee.Z)(function*(g){yield function(i,n){return RE.apply(this,arguments)}(a.Jo.syncEngine,g),a.gcScheduler&&(g&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):g||a.gcScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}Wo(n){const r=db();if(!rE.bt(r))throw new Ae(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Ff(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new rE(r,n.asyncQueue,a,n.clientId,n.initialUser)}}class Ab{initialize(n,r){var a=this;return(0,Ee.Z)(function*(){a.localStore||(a.localStore=n.localStore,a.sharedClientState=n.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!n.synchronizeTabs),a.sharedClientState.onlineStateHandler=l=>wb(a.syncEngine,l,1),a.remoteStore.remoteSyncer.handleCredentialChange=hA.bind(null,a.syncEngine),yield Um(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(n){return new zf}createDatastore(n){const r=_d(n.databaseInfo.databaseId),a=new lb(n.databaseInfo);return new uA(n.credentials,a,r)}createRemoteStore(n){return r=this.localStore,a=this.datastore,l=n.asyncQueue,h=w=>wb(this.syncEngine,w,0),g=iE.bt()?new iE:new ub,new Bt(r,a,l,h,g);var r,a,l,h,g}createSyncEngine(n,r){return function(a,l,h,g,w,D,x){const N=new NT(a,l,h,g,w,D);return x&&(N.qo=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,Ee.Z)(function*(r){const a=Ue(r);Me("RemoteStore","RemoteStore shutting down."),a.Kr.add(5),yield Js(a),a.Qr.shutdown(),a.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function xb(i,n=10240){let r=0;return{read:()=>(0,Ee.Z)(function*(){if(r<i.byteLength){const a={value:i.slice(r,r+n),done:!1};return r+=n,a}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Km{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class wd{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Sn,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(a=>{a&&a.ho()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,Ee.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,Ee.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,Ee.Z)(function*(){const r=yield n.na();if(null===r)return null;const a=n.ta.decode(r),l=Number(a);isNaN(l)&&n.sa(`length string (${a}) is not valid number`);const h=yield n.ia(l);return new AT(JSON.parse(h),r.length+l)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,Ee.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const a=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),a})()}ia(n){var r=this;return(0,Ee.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const a=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),a})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,Ee.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const a=new Uint8Array(n.buffer.length+r.value.length);a.set(n.buffer),a.set(r.value,n.buffer.length),n.buffer=a}return r.done})()}}class fA{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,Ee.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ae(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(l=(0,Ee.Z)(function*(h,g){const w=Ue(h),D=nd(w.N)+"/documents",x={documents:g.map(Z=>td(w.N,Z))},N=yield w.Ki("BatchGetDocuments",D,x),P=new Map;N.forEach(Z=>{const we=function(i,n){return"found"in n?function(r,a){ut(!!a.found);const l=Ui(r,a.found.name),h=Fn(a.found.updateTime),g=new nr({mapValue:{fields:a.found.fields}});return cn.newFoundDocument(l,h,g)}(i,n):"missing"in n?function(r,a){ut(!!a.missing),ut(!!a.readTime);const l=Ui(r,a.missing),h=Fn(a.readTime);return cn.newNoDocument(l,h)}(i,n):Ze()}(w.N,Z);P.set(we.key.toString(),we)});const K=[];return g.forEach(Z=>{const we=P.get(Z.toString());ut(!!we),K.push(we)}),K}),function(h,g){return l.apply(this,arguments)})(r.datastore,n);var l;return a.forEach(l=>r.recordVersion(l)),a})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}delete(n){this.write(new xf(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,Ee.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var a;n.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,l)=>{const h=Ke.fromPath(l);n.mutations.push(new Cv(h,n.precondition(h)))}),yield(a=(0,Ee.Z)(function*(l,h){const g=Ue(l),w=nd(g.N)+"/documents",D={writes:h.map(x=>Ba(g.N,x))};yield g.Li("Commit",w,D)}),function(l,h){return a.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Ze();r=Et.min()}const a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new Ae(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Ln.updateTime(r):Ln.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(Et.min()))throw new Ae(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(r)}return Ln.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class Rb{constructor(n,r,a,l){this.asyncQueue=n,this.datastore=r,this.updateFunction=a,this.deferred=l,this.aa=5,this.rr=new oE(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,Ee.Z)(function*(){const r=new fA(n.datastore),a=n.ua(r);a&&a.then(l=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(l)}).catch(h=>{n.ha(h)}))}).catch(l=>{n.ha(l)})}))}ua(n){try{const r=this.updateFunction(n);return!La(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!CI(r)}return!1}}class $T{constructor(n,r,a){var l=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Rr.UNAUTHENTICATED,this.clientId=Xw.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var h=(0,Ee.Z)(function*(g){Me("FirestoreClient","Received user=",g.uid),yield l.credentialListener(g),l.user=g});return function(g){return h.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,Ee.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(a){const l=Qa(a,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function HT(i,n){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,Ee.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let a=r.initialUser;i.setCredentialChangeListener(function(){var l=(0,Ee.Z)(function*(h){a.isEqual(h)||(yield Zv(n.localStore,h),a=h)});return function(h){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function Nb(i,n){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,Ee.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield LE(i);Me("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield n.initialize(r,a),i.setCredentialChangeListener(l=>{return(h=(0,Ee.Z)(function*(g,w){const D=Ue(g);D.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const x=Ho(D);D.Kr.add(3),yield Js(D),x&&D.Wr.set("Unknown"),yield D.remoteSyncer.handleCredentialChange(w),D.Kr.delete(3),yield Hi(D)}),function(g,w){return h.apply(this,arguments)})(n.remoteStore,l);var h}),i.onlineComponents=n})).apply(this,arguments)}function LE(i){return FE.apply(this,arguments)}function FE(){return(FE=(0,Ee.Z)(function*(i){return i.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield HT(i,new Sb)),i.offlineComponents})).apply(this,arguments)}function Ym(i){return VE.apply(this,arguments)}function VE(){return(VE=(0,Ee.Z)(function*(i){return i.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield Nb(i,new Ab)),i.onlineComponents})).apply(this,arguments)}function Ob(i){return LE(i).then(n=>n.persistence)}function UE(i){return LE(i).then(n=>n.localStore)}function Mb(i){return Ym(i).then(n=>n.remoteStore)}function jE(i){return Ym(i).then(n=>n.syncEngine)}function Id(i){return BE.apply(this,arguments)}function BE(){return(BE=(0,Ee.Z)(function*(i){const n=yield Ym(i),r=n.eventManager;return r.onListen=OT.bind(null,n.syncEngine),r.onUnlisten=dA.bind(null,n.syncEngine),r})).apply(this,arguments)}function $E(i,n,r={}){const a=new Sn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,h,g,w,D){const x=new Km({next:P=>{h.enqueueAndForget(()=>gE(l,N));const K=P.docs.has(g);!K&&P.fromCache?D.reject(new Ae(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&P.fromCache&&w&&"server"===w.source?D.reject(new Ae(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(P)},error:P=>D.reject(P)}),N=new mE(vc(g.path),x,{includeMetadataChanges:!0,uo:!0});return fE(l,N)}(yield Id(i),i.asyncQueue,n,r,a)})),a.promise}function HE(i,n,r={}){const a=new Sn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,h,g,w,D){const x=new Km({next:P=>{h.enqueueAndForget(()=>gE(l,N)),P.fromCache&&"server"===w.source?D.reject(new Ae(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(P)},error:P=>D.reject(P)}),N=new mE(g,x,{includeMetadataChanges:!0,uo:!0});return fE(l,N)}(yield Id(i),i.asyncQueue,n,r,a)})),a.promise}class KT{constructor(n,r,a,l,h,g,w,D){this.databaseId=n,this.appId=r,this.persistenceKey=a,this.host=l,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.useFetchStreams=D}}class bd{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof bd&&n.projectId===this.projectId&&n.database===this.database}}const Fb=new Map;function Fc(i,n,r){if(!r)throw new Ae(fe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function Cd(i,n,r,a){if(!0===n&&!0===a)throw new Ae(fe.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Vb(i){if(!Ke.isDocumentKey(i))throw new Ae(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Qm(i){if(Ke.isDocumentKey(i))throw new Ae(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ai(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=function(r){if(r.constructor){const a=/function\s+([^\s(]+)\s*\(/.exec(r.constructor.toString());if(a&&a.length>1)return a[1]}return null}(i);return n?`a custom ${n} object`:"an object"}}return"function"==typeof i?"a function":Ze()}function Mt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Ae(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ai(i);throw new Ae(fe.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function Xf(i,n){if(n<=0)throw new Ae(fe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class Ub{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Ae(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Ae(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,Cd("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class ep{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ub({}),this._settingsFrozen=!1,n instanceof bd?this._databaseId=n:(this._app=n,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ae(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(a.options.projectId)}(n))}get app(){if(!this._app)throw new Ae(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Ae(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ub(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new Qw;switch(r.type){case"gapi":const a=r.client;return ut(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new OD(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Ae(fe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fb.get(n);r&&(Me("ComponentProvider","Removing Datastore"),Fb.delete(n),r.terminate())}(this),Promise.resolve()}}class Zt{constructor(n,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Zt(this.firestore,n,this._key)}}class ar{constructor(n,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=n}withConverter(n){return new ar(this.firestore,n,this._query)}}class ms extends ar{constructor(n,r,a){super(n,r,vc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Zt(this.firestore,null,new Ke(n))}withConverter(n){return new ms(this.firestore,n,this._path)}}function Jm(i,n,...r){if(i=(0,Ut.m9)(i),Fc("collection","path",n),i instanceof ep){const a=Ot.fromString(n,...r);return Qm(a),new ms(i,null,a)}{if(!(i instanceof Zt||i instanceof ms))throw new Ae(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Ot.fromString(n,...r));return Qm(a),new ms(i.firestore,null,a)}}function Xm(i,n,...r){if(i=(0,Ut.m9)(i),1===arguments.length&&(n=Xw.I()),Fc("doc","path",n),i instanceof ep){const a=Ot.fromString(n,...r);return Vb(a),new Zt(i,null,new Ke(a))}{if(!(i instanceof Zt||i instanceof ms))throw new Ae(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Ot.fromString(n,...r));return Vb(a),new Zt(i.firestore,i instanceof ms?i.converter:null,new Ke(a))}}function jb(i,n){return i=(0,Ut.m9)(i),n=(0,Ut.m9)(n),(i instanceof Zt||i instanceof ms)&&(n instanceof Zt||n instanceof ms)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function Bb(i,n){return i=(0,Ut.m9)(i),n=(0,Ut.m9)(n),i instanceof ar&&n instanceof ar&&i.firestore===n.firestore&&zr(i._query,n._query)&&i.converter===n.converter}class ZT{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new oE(this,"async_queue_retry"),this.Ea=()=>{const r=Am();r&&Me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Am();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Am();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Sn;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,Ee.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!Sc(r))throw r;Me("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(a=>{throw this.ma=a,this.ga=!1,On("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(a)),a}).then(a=>(this.ga=!1,a))));return this.fa=r,r}enqueueAfterDelay(n,r,a){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const l=Gf.createAndSchedule(this,n,r,a,h=>this.Ra(h));return this._a.push(l),l}Ta(){this.ma&&Ze()}verifyOperationInProgress(){}ba(){var n=this;return(0,Ee.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function ey(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const a=n;for(const l of["next","error","complete"])if(l in a&&"function"==typeof a[l])return!0;return!1}(i)}class WE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,a){this._progressObserver={next:n,error:r,complete:a}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class Pn extends ep{constructor(n,r){super(n,r),this.type="firestore",this._queue=new ZT,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zE(this),this._firestoreClient.terminate()}}function Xn(i){return i._firestoreClient||zE(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function zE(i){var n;const r=i._freezeSettings(),a=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new KT(i._databaseId,h,i._persistenceKey,(w=r).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w.useFetchStreams));var h,w;i._firestoreClient=new $T(i._credentials,i._queue,a)}function qE(i,n,r){const a=new Sn;return i.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield HT(i,r),yield Nb(i,n),a.resolve()}catch(l){if(!("FirebaseError"===(h=l).name?h.code===fe.FAILED_PRECONDITION||h.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),a.reject(l)}var h})).then(()=>a.promise)}function Td(i){if(i._initialized||i._terminated)throw new Ae(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wo{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Ae(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Xs{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Xs(Yn.fromBase64String(n))}catch(r){throw new Ae(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Xs(Yn.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class Xa{constructor(n){this._methodName=n}}class ty{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Ae(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Ae(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Tt(this._lat,n._lat)||Tt(this._long,n._long)}}const tS=/^__.*__$/;class KE{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return null!==this.fieldMask?new Ua(n,this.data,this.fieldMask,r,this.fieldTransforms):new Af(n,this.data,r,this.fieldTransforms)}}class ZE{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return new Ua(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function YE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze()}}class Vc{constructor(n,r,a,l,h,g){this.settings=n,this.databaseId=r,this.N=a,this.ignoreUndefinedProperties=l,void 0===h&&this.Sa(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new Vc(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.ka(n),l}$a(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.Sa(),l}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return ry(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(YE(this.Da)&&tS.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class QE{constructor(n,r,a){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=a||_d(n)}Ba(n,r,a,l=!1){return new Vc({Da:n,methodName:r,La:a,path:Nr.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Sd(i){const n=i._freezeSettings(),r=_d(i._databaseId);return new QE(i._databaseId,!!n.ignoreUndefinedProperties,r)}function tp(i,n,r,a,l,h={}){const g=i.Ba(h.merge||h.mergeFields?2:0,n,r,l);r0("Data must be an object, but it was:",g,a);const w=t0(a,g);let D,x;if(h.merge)D=new Ks(g.fieldMask),x=g.fieldTransforms;else if(h.mergeFields){const N=[];for(const P of h.mergeFields){const K=ny(n,P,r);if(!g.contains(K))throw new Ae(fe.INVALID_ARGUMENT,`Field '${K}' is specified in your field mask but missing from your input data.`);o0(N,K)||N.push(K)}D=new Ks(N),x=g.fieldTransforms.filter(P=>D.covers(P.field))}else D=null,x=g.fieldTransforms;return new KE(new nr(w),D,x)}class np extends Xa{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof np}}function JE(i,n,r){return new Vc({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class Ad extends Xa{_toFieldTransform(n){return new ed(n.path,new Ec)}isEqual(n){return n instanceof Ad}}class Wb extends Xa{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=JE(this,n,!0),a=this.Ua.map(h=>eu(h,r)),l=new Ys(a);return new ed(n.path,l)}isEqual(n){return this===n}}class nS extends Xa{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=JE(this,n,!0),a=this.Ua.map(h=>eu(h,r)),l=new Va(a);return new ed(n.path,l)}isEqual(n){return this===n}}class XE extends Xa{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new wc(n.N,Xl(n.N,this.qa));return new ed(n.path,r)}isEqual(n){return this===n}}function rp(i,n,r,a){const l=i.Ba(1,n,r);r0("Data must be an object, but it was:",l,a);const h=[],g=nr.empty();Ma(a,(D,x)=>{const N=s0(n,D,r);x=(0,Ut.m9)(x);const P=l.$a(N);if(x instanceof np)h.push(N);else{const K=eu(x,P);null!=K&&(h.push(N),g.set(N,K))}});const w=new Ks(h);return new ZE(g,w,l.fieldTransforms)}function e0(i,n,r,a,l,h){const g=i.Ba(1,n,r),w=[ny(n,a,r)],D=[l];if(h.length%2!=0)throw new Ae(fe.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let K=0;K<h.length;K+=2)w.push(ny(n,h[K])),D.push(h[K+1]);const x=[],N=nr.empty();for(let K=w.length-1;K>=0;--K)if(!o0(x,w[K])){const Z=w[K];let we=D[K];we=(0,Ut.m9)(we);const Ve=g.$a(Z);if(we instanceof np)x.push(Z);else{const Be=eu(we,Ve);null!=Be&&(x.push(Z),N.set(Z,Be))}}const P=new Ks(x);return new ZE(N,P,g.fieldTransforms)}function zb(i,n,r,a=!1){return eu(r,i.Ba(a?4:3,n))}function eu(i,n){if(n0(i=(0,Ut.m9)(i)))return r0("Unsupported field value:",n,i),t0(i,n);if(i instanceof Xa)return function(r,a){if(!YE(a.Da))throw a.Fa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fa(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,a){const l=[];let h=0;for(const g of r){let w=eu(g,a.Oa(h));null==w&&(w={nullValue:"NULL_VALUE"}),l.push(w),h++}return{arrayValue:{values:l}}}(i,n)}return function(r,a){if(null===(r=(0,Ut.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Xl(a.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=Zn.fromDate(r);return{timestampValue:ja(a.N,l)}}if(r instanceof Zn){const l=new Zn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ja(a.N,l)}}if(r instanceof ty)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:RI(a.N,r._byteString)};if(r instanceof Zt){const l=a.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw a.Fa(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:In(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.Fa(`Unsupported field value: ${Ai(r)}`)}(i,n)}function t0(i,n){const r={};return em(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Ma(i,(a,l)=>{const h=eu(l,n.Na(a));null!=h&&(r[a]=h)}),{mapValue:{fields:r}}}function n0(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Zn||i instanceof ty||i instanceof Xs||i instanceof Zt||i instanceof Xa)}function r0(i,n,r){if(!n0(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Ai(r);throw n.Fa("an object"===a?i+" a custom object":i+" "+a)}var a}function ny(i,n,r){if((n=(0,Ut.m9)(n))instanceof Wo)return n._internalPath;if("string"==typeof n)return s0(i,n);throw ry("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const qb=new RegExp("[~\\*/\\[\\]]");function s0(i,n,r){if(n.search(qb)>=0)throw ry(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Wo(...n.split("."))._internalPath}catch(a){throw ry(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function ry(i,n,r,a,l){const h=a&&!a.isEmpty(),g=void 0!==l;let w=`Function ${n}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let D="";return(h||g)&&(D+=" (found",h&&(D+=` in field ${a}`),g&&(D+=` in document ${l}`),D+=")"),new Ae(fe.INVALID_ARGUMENT,w+i+D)}function o0(i,n){return i.some(r=>r.isEqual(n))}class ip{constructor(n,r,a,l,h){this._firestore=n,this._userDataWriter=r,this._key=a,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new Kb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(sp("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Kb extends ip{data(){return super.data()}}function sp(i,n){return"string"==typeof n?s0(i,n):n instanceof Wo?n._internalPath:n._delegate._internalPath}class tu{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class eo extends ip{constructor(n,r,a,l,h,g){super(n,r,a,l,g),this._firestore=n,this._firestoreImpl=n,this.metadata=h}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const a=this._document.data.field(sp("DocumentSnapshot.get",n));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class op extends eo{data(n={}){return super.data(n)}}class nu{constructor(n,r,a,l){this._firestore=n,this._userDataWriter=r,this._snapshot=l,this.metadata=new tu(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(a=>{n.call(r,new op(this._firestore,this._userDataWriter,a.key,a,new tu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ae(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(g=>({type:"added",doc:new op(a._firestore,a._userDataWriter,g.doc.key,g.doc,new tu(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>l||3!==g.type).map(g=>{const w=new op(a._firestore,a._userDataWriter,g.doc.key,g.doc,new tu(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let D=-1,x=-1;return 0!==g.type&&(D=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),1!==g.type&&(h=h.add(g.doc),x=h.indexOf(g.doc.key)),{type:rS(g.type),doc:w,oldIndex:D,newIndex:x}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function rS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}function a0(i,n){return i instanceof eo&&n instanceof eo?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof nu&&n instanceof nu&&i._firestore===n._firestore&&Bb(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function iS(i){if(Cf(i)&&0===i.explicitOrderBy.length)throw new Ae(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}function Uc(i,...n){for(const r of n)i=r._apply(i);return i}class _A extends iy{constructor(n,r,a){super(),this.Ka=n,this.ja=r,this.Qa=a,this.type="where"}_apply(n){const r=Sd(n.firestore),a=function(l,h,g,w,D,x,N){let P;if(D.isKeyField()){if("array-contains"===x||"array-contains-any"===x)throw new Ae(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on FieldPath.documentId().`);if("in"===x||"not-in"===x){Yb(N,x);const Z=[];for(const we of N)Z.push(Zb(w,l,we));P={arrayValue:{values:Z}}}else P=Zb(w,l,N)}else"in"!==x&&"not-in"!==x&&"array-contains-any"!==x||Yb(N,x),P=zb(g,"where",N,"in"===x||"not-in"===x);const K=ui.create(D,x,P);return function(Z,we){if(we.v()){const Be=Fi(Z);if(null!==Be&&!Be.isEqual(we.field))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Be.toString()}' and '${we.field.toString()}'`);const _t=sm(Z);null!==_t&&Qb(0,we.field,_t)}const Ve=function(Be,_t){for(const xt of Be.filters)if(_t.indexOf(xt.op)>=0)return xt.op;return null}(Z,function(Be){switch(Be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(we.op));if(null!==Ve)throw new Ae(fe.INVALID_ARGUMENT,Ve===we.op?`Invalid query. You cannot use more than one '${we.op.toString()}' filter.`:`Invalid query. You cannot use '${we.op.toString()}' filters with '${Ve.toString()}' filters.`)}(l,K),K}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new ar(n.firestore,n.converter,function(l,h){const g=l.filters.concat([h]);return new Zs(l.path,l.collectionGroup,l.explicitOrderBy.slice(),g,l.limit,l.limitType,l.startAt,l.endAt)}(n._query,a))}}class EA extends iy{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(a,l,h){if(null!==a.startAt)throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new _c(l,h);return function(w,D){if(null===sm(w)){const x=Fi(w);null!==x&&Qb(0,x,D.field)}}(a,g),g}(n._query,this.Ka,this.Wa);return new ar(n.firestore,n.converter,function(a,l){const h=a.explicitOrderBy.concat([l]);return new Zs(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(n._query,r))}}class sS extends iy{constructor(n,r,a){super(),this.type=n,this.Ga=r,this.za=a}_apply(n){return new ar(n.firestore,n.converter,Vi(n._query,this.Ga,this.za))}}class oS extends iy{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=uS(n,this.type,this.Ha,this.Ja);return new ar(n.firestore,n.converter,(l=r,new Zs((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)));var a,l}}class aS extends iy{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=uS(n,this.type,this.Ha,this.Ja);return new ar(n.firestore,n.converter,(l=r,new Zs((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)));var a,l}}function uS(i,n,r,a){if(r[0]=(0,Ut.m9)(r[0]),r[0]instanceof ip)return function(l,h,g,w,D){if(!w)throw new Ae(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const x=[];for(const N of Jl(l))if(N.field.isKeyField())x.push(_f(h,w.key));else{const P=w.data.field(N.field);if(nm(P))throw new Ae(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const K=N.field.canonicalString();throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${K}' (used as the orderBy) does not exist.`)}x.push(P)}return new If(x,D)}(i._query,i.firestore._databaseId,n,r[0]._document,a);{const l=Sd(i.firestore);return function(h,g,w,D,x,N){const P=h.explicitOrderBy;if(x.length>P.length)throw new Ae(fe.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const K=[];for(let Z=0;Z<x.length;Z++){const we=x[Z];if(P[Z].field.isKeyField()){if("string"!=typeof we)throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof we}`);if(!_v(h)&&-1!==we.indexOf("/"))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${D}() must be a plain document ID, but '${we}' contains a slash.`);const Ve=h.path.child(Ot.fromString(we));if(!Ke.isDocumentKey(Ve))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${D}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Be=new Ke(Ve);K.push(_f(g,Be))}else{const Ve=zb(w,D,we);K.push(Ve)}}return new If(K,N)}(i._query,i.firestore._databaseId,l,n,r,a)}}function Zb(i,n,r){if("string"==typeof(r=(0,Ut.m9)(r))){if(""===r)throw new Ae(fe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_v(n)&&-1!==r.indexOf("/"))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=n.path.child(Ot.fromString(r));if(!Ke.isDocumentKey(a))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return _f(i,new Ke(a))}if(r instanceof Zt)return _f(i,r._key);throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ai(r)}.`)}function Yb(i,n){if(!Array.isArray(i)||0===i.length)throw new Ae(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new Ae(fe.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function Qb(i,n,r){if(!r.isEqual(n))throw new Ae(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Jb{convertValue(n,r="none"){switch(jo(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Mn(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(ka(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Ze()}}convertObject(n,r){const a={};return Ma(n.fields,(l,h)=>{a[l]=this.convertValue(h,r)}),a}convertGeoPoint(n){return new ty(Mn(n.latitude),Mn(n.longitude))}convertArray(n,r){return(n.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(n,r){switch(r){case"previous":const a=LD(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(mf(n));default:return null}}convertTimestamp(n){const r=Pa(n);return new Zn(r.seconds,r.nanos)}convertDocumentKey(n,r){const a=Ot.fromString(n);ut(UI(a));const l=new bd(a.get(1),a.get(3)),h=new Ke(a.popFirst(5));return l.isEqual(r)||On(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function u0(i,n,r){let a;return a=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,a}class AA extends Jb{constructor(n){super(),this.firestore=n}convertBytes(n){return new Xs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zt(this.firestore,null,r)}}class Xb{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Sd(n)}set(n,r,a){this._verifyNotCommitted();const l=ru(n,this._firestore),h=u0(l.converter,r,a),g=tp(this._dataReader,"WriteBatch.set",l._key,h,null!==l.converter,a);return this._mutations.push(g.toMutation(l._key,Ln.none())),this}update(n,r,a,...l){this._verifyNotCommitted();const h=ru(n,this._firestore);let g;return g="string"==typeof(r=(0,Ut.m9)(r))||r instanceof Wo?e0(this._dataReader,"WriteBatch.update",h._key,r,a,l):rp(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(g.toMutation(h._key,Ln.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=ru(n,this._firestore);return this._mutations=this._mutations.concat(new xf(r._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ru(i,n){if((i=(0,Ut.m9)(i)).firestore!==n)throw new Ae(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class xd extends Jb{constructor(n){super(),this.firestore=n}convertBytes(n){return new Xs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zt(this.firestore,null,r)}}function eC(i,n,r){i=Mt(i,Zt);const a=Mt(i.firestore,Pn),l=u0(i.converter,n,r);return iu(a,[tp(Sd(a),"setDoc",i._key,l,null!==i.converter,r).toMutation(i._key,Ln.none())])}function sy(i,n,r,...a){i=Mt(i,Zt);const l=Mt(i.firestore,Pn),h=Sd(l);let g;return g="string"==typeof(n=(0,Ut.m9)(n))||n instanceof Wo?e0(h,"updateDoc",i._key,n,r,a):rp(h,"updateDoc",i._key,n),iu(l,[g.toMutation(i._key,Ln.exists(!0))])}function nC(i,...n){var r,a,l;i=(0,Ut.m9)(i);let h={includeMetadataChanges:!1},g=0;"object"!=typeof n[g]||ey(n[g])||(h=n[g],g++);const w={includeMetadataChanges:h.includeMetadataChanges};if(ey(n[g])){const P=n[g];n[g]=null===(r=P.next)||void 0===r?void 0:r.bind(P),n[g+1]=null===(a=P.error)||void 0===a?void 0:a.bind(P),n[g+2]=null===(l=P.complete)||void 0===l?void 0:l.bind(P)}let D,x,N;if(i instanceof Zt)x=Mt(i.firestore,Pn),N=vc(i._key.path),D={next:P=>{n[g]&&n[g](oy(x,i,P))},error:n[g+1],complete:n[g+2]};else{const P=Mt(i,ar);x=Mt(P.firestore,Pn),N=P._query;const K=new xd(x);D={next:Z=>{n[g]&&n[g](new nu(x,K,P,Z))},error:n[g+1],complete:n[g+2]},iS(i._query)}return function(P,K,Z,we){const Ve=new Km(we),Be=new mE(K,Ve,Z);return P.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return fE(yield Id(P),Be)})),()=>{Ve.Xo(),P.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return gE(yield Id(P),Be)}))}}(Xn(x),N,w,D)}function iu(i,n){return function(r,a){const l=new Sn;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,n,r){return EE.apply(this,arguments)}(yield jE(r),a,l)})),l.promise}(Xn(i),n)}function oy(i,n,r){const a=r.docs.get(n._key),l=new xd(i);return new eo(i,l,n._key,a,new tu(r.hasPendingWrites,r.fromCache),n.converter)}class rC extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Sd(n)}get(n){const r=ru(n,this._firestore),a=new AA(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return Ze();const h=l[0];if(h.isFoundDocument())return new ip(this._firestore,a,h.key,h,r.converter);if(h.isNoDocument())return new ip(this._firestore,a,r._key,null,r.converter);throw Ze()})}set(n,r,a){const l=ru(n,this._firestore),h=u0(l.converter,r,a),g=tp(this._dataReader,"Transaction.set",l._key,h,null!==l.converter,a);return this._transaction.set(l._key,g),this}update(n,r,a,...l){const h=ru(n,this._firestore);let g;return g="string"==typeof(r=(0,Ut.m9)(r))||r instanceof Wo?e0(this._dataReader,"Transaction.update",h._key,r,a,l):rp(this._dataReader,"Transaction.update",h._key,r),this._transaction.update(h._key,g),this}delete(n){const r=ru(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=ru(n,this._firestore),a=new xd(this._firestore);return super.get(n).then(l=>new eo(this._firestore,a,r._key,l._document,new tu(!1,!1),r.converter))}}function Nd(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function aC(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function fS(){if("undefined"==typeof atob)throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){ql=i})(Hh.SDK_VERSION),(0,Hh._registerComponent)(new eD.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),a=new Pn(r,new Jw(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,Hh.registerVersion)("@firebase/firestore","3.0.2",void 0);class uy{constructor(n){this._delegate=n}static fromBase64String(n){return fS(),new uy(Xs.fromBase64String(n))}static fromUint8Array(n){return aC(),new uy(Xs.fromUint8Array(n))}toBase64(){return fS(),this._delegate.toBase64()}toUint8Array(){return aC(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ap(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(i)}class FA{enableIndexedDbPersistence(n,r){return function(i,n){Td(i=Mt(i,Pn));const r=Xn(i),a=i._freezeSettings(),l=new Ab;return qE(r,l,new kE(l,a.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){Td(i=Mt(i,Pn));const n=Xn(i),r=i._freezeSettings(),a=new Ab;return qE(n,a,new BT(a,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new Ae(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Sn;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(r=(0,Ee.Z)(function*(a){if(!$i.bt())return Promise.resolve();const l=a+"main";yield $i.delete(l)}),function(a){return r.apply(this,arguments)})(Ff(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class gS{constructor(n,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},n instanceof bd||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&gf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,a={}){!function(i,n,r,a={}){var l;const h=(i=Mt(i,ep))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==n&&gf("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${n}:${r}`,ssl:!1})),a.mockUserToken){let g,w;if("string"==typeof a.mockUserToken)g=a.mockUserToken,w=Rr.MOCK_USER;else{g=(0,Ut.Sg)(a.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const D=a.mockUserToken.sub||a.mockUserToken.user_id;if(!D)throw new Ae(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Rr(D)}i._credentials=new ND(new Yw(g,w))}}(this._delegate,n,r,a)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){const n=yield Ob(i),r=yield Mb(i);return n.setNetworkEnabled(!0),function(a){const l=Ue(a);return l.Kr.delete(0),Hi(l)}(r)}))}(Xn(i=Mt(i,Pn)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){const n=yield Ob(i),r=yield Mb(i);return n.setNetworkEnabled(!1),(a=(0,Ee.Z)(function*(l){const h=Ue(l);h.Kr.add(0),yield Js(h),h.Wr.set("Offline")}),function(l){return a.apply(this,arguments)})(r);var a}))}(Xn(i=Mt(i,Pn)))}(this._delegate)}enablePersistence(n){let r=!1,a=!1;return n&&(r=!!n.synchronizeTabs,a=!!n.experimentalForceOwningTab,Cd("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,n){return bE.apply(this,arguments)}(yield jE(n),r)})),r.promise}(Xn(i=Mt(i,Pn)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new Km(n);return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return a=yield Id(i),l=r,Ue(a).Zr.add(l),void l.next();var a,l})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return a=yield Id(i),l=r,void Ue(a).Zr.delete(l);var a,l}))}}(Xn(i=Mt(i,Pn)),ey(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Pd(this,Jm(this._delegate,n))}catch(r){throw Zr(r,"collection()","Firestore.collection()")}}doc(n){try{return new ys(this,Xm(this._delegate,n))}catch(r){throw Zr(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new _r(this,function(i,n){if(i=Mt(i,ep),Fc("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Ae(fe.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ar(i,null,(r=n,new Zs(Ot.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw Zr(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const a=yield(l=i,Ym(l).then(h=>h.datastore));var l;new Rb(i.asyncQueue,a,n,r).run()})),r.promise}(Xn(i),r=>n(new rC(i,r)))}(this._delegate,r=>n(new c0(this,r)))}batch(){return Xn(this._delegate),new uC(new Xb(this._delegate,n=>iu(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Xn(i=Mt(i,Pn)),a=new WE;return function(i,n,r,a){const l=function(h,g){let w;return w="string"==typeof h?(new TextEncoder).encode(h):h,D=function(D,x){if(D instanceof Uint8Array)return xb(D,x);if(D instanceof ArrayBuffer)return xb(new Uint8Array(D),x);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(w),new wd(D,g);var D}(r,_d(n));i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(i,n,r){const a=Ue(i);var l;(l=(0,Ee.Z)(function*(h,g,w){try{const D=yield g.getMetadata();if(yield function(K,Z){const we=Ue(K),Ve=Fn(Z.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",Be=>we.Je.getBundleMetadata(Be,Z.id)).then(Be=>!!Be&&Be.createTime.compareTo(Ve)>=0)}(h.localStore,D))return yield g.close(),void w._completeWith((K=D,{taskState:"Success",documentsLoaded:K.totalDocuments,bytesLoaded:K.totalBytes,totalDocuments:K.totalDocuments,totalBytes:K.totalBytes}));w._updateProgress(mb(D));const x=new xT(D,h.localStore,g.N);let N=yield g.Qo();for(;N;){const K=yield x.fo(N);K&&w._updateProgress(K),N=yield g.Qo()}const P=yield x.complete();yield Ja(h,P.Tn,void 0),yield function(K,Z){const we=Ue(K);return we.persistence.runTransaction("Save bundle","readwrite",Ve=>we.Je.saveBundleMetadata(Ve,Z))}(h.localStore,D),w._completeWith(P.progress)}catch(D){gf("SyncEngine",`Loading bundle failed with ${D}`),w._failWith(D)}var K}),function(h,g,w){return l.apply(this,arguments)})(a,n,r).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield jE(i),l,a)}))}(r,i._databaseId,n,a),a}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(r,a){const l=Ue(r);return l.persistence.runTransaction("Get named query","readonly",h=>l.Je.getNamedQuery(h,a))}(yield UE(i),n)}))}(Xn(i=Mt(i,Pn)),n).then(r=>r?new ar(i,null,r.query):null)}(this._delegate,n).then(r=>r?new _r(this,r):null)}}class cy extends Jb{constructor(n){super(),this.firestore=n}convertBytes(n){return new uy(new Xs(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return ys.forKey(r,this.firestore,null)}}class c0{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new cy(n)}get(n){const r=zo(n);return this._delegate.get(r).then(a=>new up(this._firestore,new eo(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(n,r,a){const l=zo(n);return a?(Nd("Transaction.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=zo(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=zo(n);return this._delegate.delete(r),this}}class uC{constructor(n){this._delegate=n}set(n,r,a){const l=zo(n);return a?(Nd("WriteBatch.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=zo(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=zo(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Od{constructor(n,r,a){this._firestore=n,this._userDataWriter=r,this._delegate=a}fromFirestore(n,r){const a=new op(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new cp(this._firestore,a),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const a=Od.INSTANCES;let l=a.get(n);l||(l=new WeakMap,a.set(n,l));let h=l.get(r);return h||(h=new Od(n,new cy(n),r),l.set(r,h)),h}}Od.INSTANCES=new WeakMap;class ys{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new cy(n)}static forPath(n,r,a){if(n.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new ys(r,new Zt(r._delegate,a,new Ke(n)))}static forKey(n,r,a){return new ys(r,new Zt(r._delegate,a,n))}get id(){return this._delegate.id}get parent(){return new Pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Pd(this.firestore,Jm(this._delegate,n))}catch(r){throw Zr(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,Ut.m9)(n))instanceof Zt&&jb(this._delegate,n)}set(n,r){r=Nd("DocumentReference.set",r);try{return r?eC(this._delegate,n,r):eC(this._delegate,n)}catch(a){throw Zr(a,"setDoc()","DocumentReference.set()")}}update(n,r,...a){try{return 1===arguments.length?sy(this._delegate,n):sy(this._delegate,n,r,...a)}catch(l){throw Zr(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return iu(Mt(i.firestore,Pn),[new xf(i._key,Ln.none())])}(this._delegate)}onSnapshot(...n){const r=Md(n),a=cC(n,l=>new up(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return nC(this._delegate,r,a)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Mt(i,Zt);const n=Mt(i.firestore,Pn),r=Xn(n),a=new xd(n);return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(a=(0,Ee.Z)(function*(l,h,g){try{const w=yield function(D,x){const N=Ue(D);return N.persistence.runTransaction("read document","readonly",P=>N.Qn.An(P,x))}(l,h);w.isFoundDocument()?g.resolve(w):w.isNoDocument()?g.resolve(null):g.reject(new Ae(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(w){const D=Qa(w,`Failed to get document '${h} from cache`);g.reject(D)}}),function(l,h,g){return a.apply(this,arguments)})(yield UE(i),n,r);var a})),r.promise}(r,i._key).then(l=>new eo(n,a,i._key,l,new tu(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Mt(i,Zt);const n=Mt(i.firestore,Pn);return $E(Xn(n),i._key,{source:"server"}).then(r=>oy(n,i,r))}(this._delegate):function(i){i=Mt(i,Zt);const n=Mt(i.firestore,Pn);return $E(Xn(n),i._key).then(r=>oy(n,i,r))}(this._delegate),r.then(a=>new up(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(n){return new ys(this.firestore,this._delegate.withConverter(n?Od.getInstance(this.firestore,n):null))}}function Zr(i,n,r){return i.message=i.message.replace(n,r),i}function Md(i){for(const n of i)if("object"==typeof n&&!ap(n))return n;return{}}function cC(i,n){var r,a;let l;return l=ap(i[0])?i[0]:ap(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{l.next&&l.next(n(h))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(a=l.complete)||void 0===a?void 0:a.bind(l)}}class up{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new ys(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return a0(this._delegate,n._delegate)}}class cp extends up{data(n){const r=this._delegate.data(n);return function(i,n){i||Ze()}(void 0!==r),r}}class _r{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new cy(n)}where(n,r,a){try{return new _r(this.firestore,Uc(this._delegate,function(i,n,r){const a=n,l=sp("where",i);return new _A(l,a,r)}(n,r,a)))}catch(l){throw Zr(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new _r(this.firestore,Uc(this._delegate,function(i,n="asc"){const r=n,a=sp("orderBy",i);return new EA(a,r)}(n,r)))}catch(a){throw Zr(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new _r(this.firestore,Uc(this._delegate,function(i){return Xf("limit",i),new sS("limit",i,"F")}(n)))}catch(r){throw Zr(r,"limit()","Query.limit()")}}limitToLast(n){try{return new _r(this.firestore,Uc(this._delegate,function(i){return Xf("limitToLast",i),new sS("limitToLast",i,"L")}(n)))}catch(r){throw Zr(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new _r(this.firestore,Uc(this._delegate,function(...i){return new oS("startAt",i,!0)}(...n)))}catch(r){throw Zr(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new _r(this.firestore,Uc(this._delegate,function(...i){return new oS("startAfter",i,!1)}(...n)))}catch(r){throw Zr(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new _r(this.firestore,Uc(this._delegate,function(...i){return new aS("endBefore",i,!0)}(...n)))}catch(r){throw Zr(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new _r(this.firestore,Uc(this._delegate,function(...i){return new aS("endAt",i,!1)}(...n)))}catch(r){throw Zr(r,"endAt()","Query.endAt()")}}isEqual(n){return Bb(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Mt(i,ar);const n=Mt(i.firestore,Pn),r=Xn(n),a=new xd(n);return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(a=(0,Ee.Z)(function*(l,h,g){try{const w=yield Oc(l,h,!0),D=new vb(h,w.Gn),x=D.Io(w.documents),N=D.applyChanges(x,!1);g.resolve(N.snapshot)}catch(w){const D=Qa(w,`Failed to execute query '${h} against cache`);g.reject(D)}}),function(l,h,g){return a.apply(this,arguments)})(yield UE(i),n,r);var a})),r.promise}(r,i._query).then(l=>new nu(n,a,i,l))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Mt(i,ar);const n=Mt(i.firestore,Pn),r=Xn(n),a=new xd(n);return HE(r,i._query,{source:"server"}).then(l=>new nu(n,a,i,l))}(this._delegate):function(i){i=Mt(i,ar);const n=Mt(i.firestore,Pn),r=Xn(n),a=new xd(n);return iS(i._query),HE(r,i._query).then(l=>new nu(n,a,i,l))}(this._delegate),r.then(a=>new Yr(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...n){const r=Md(n),a=cC(n,l=>new Yr(this.firestore,new nu(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return nC(this._delegate,r,a)}withConverter(n){return new _r(this.firestore,this._delegate.withConverter(n?Od.getInstance(this.firestore,n):null))}}class mS{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new cp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yr{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new _r(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new cp(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new mS(this._firestore,r))}forEach(n,r){this._delegate.forEach(a=>{n.call(r,new cp(this._firestore,a))})}isEqual(n){return a0(this._delegate,n._delegate)}}class Pd extends _r{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new ys(this.firestore,n):null}doc(n){try{return new ys(this.firestore,void 0===n?Xm(this._delegate):Xm(this._delegate,n))}catch(r){throw Zr(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=Mt(i.firestore,Pn),a=Xm(i),l=u0(i.converter,n);return iu(r,[tp(Sd(i.firestore),"addDoc",a._key,l,null!==i.converter,{}).toMutation(a._key,Ln.exists(!1))]).then(()=>a)}(this._delegate,n).then(r=>new ys(this.firestore,r))}isEqual(n){return jb(this._delegate,n._delegate)}withConverter(n){return new Pd(this.firestore,this._delegate.withConverter(n?Od.getInstance(this.firestore,n):null))}}function zo(i){return Mt(i,Zt)}class l0{constructor(...n){this._delegate=new Wo(...n)}static documentId(){return new l0(Nr.keyField().canonicalString())}isEqual(n){return(n=(0,Ut.m9)(n))instanceof Wo&&this._delegate._internalPath.isEqual(n._internalPath)}}class jc{constructor(n){this._delegate=n}static serverTimestamp(){const n=new Ad("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new jc(n)}static delete(){const n=new np("deleteField");return n._methodName="FieldValue.delete",new jc(n)}static arrayUnion(...n){const r=function(...i){return new Wb("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new jc(r)}static arrayRemove(...n){const r=function(...i){return new nS("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new jc(r)}static increment(n){const r=function(i){return new XE("increment",i)}(n);return r._methodName="FieldValue.increment",new jc(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const d0={Firestore:gS,GeoPoint:ty,Timestamp:Zn,Blob:uy,Transaction:c0,WriteBatch:uC,DocumentReference:ys,DocumentSnapshot:up,Query:_r,QueryDocumentSnapshot:cp,QuerySnapshot:Yr,CollectionReference:Pd,FieldPath:l0,FieldValue:jc,setLogLevel:function(i){!function(i){mc.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new eD.wA("firestore-compat",r=>((n,r)=>new gS(n,r,new FA))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},d0)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.2")}(m_.Z);var yS=k(6682),kd=k(309),hC=k(7771),_S=k(8858);class vS extends br.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new h0(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,a=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,h=a.length;let g;if(this.closed)throw new ol.N;if(this.isStopped||this.hasError?g=vh.w.EMPTY:(this.observers.push(n),g=new _S.W(this,n)),l&&n.add(n=new kd.ht(n,l)),r)for(let w=0;w<h&&!n.closed;w++)n.next(a[w]);else for(let w=0;w<h&&!n.closed;w++)n.next(a[w].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),g}_getNow(){return(this.scheduler||hC.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,a=this._windowTime,l=this._events,h=l.length;let g=0;for(;g<h&&!(n-l[g].time<a);)g++;return h>r&&(g=Math.max(g,h-r)),g>0&&l.splice(0,g),l}}class h0{constructor(n,r){this.time=n,this.value=r}}function f0(i,n,r){let a;return a=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:a}){let l,g,h=0,w=!1,D=!1;return function(N){let P;h++,!l||w?(w=!1,l=new vS(i,n,a),P=l.subscribe(this),g=N.subscribe({next(K){l.next(K)},error(K){w=!0,l.error(K)},complete(){D=!0,g=void 0,l.complete()}}),D&&(g=void 0)):P=l.subscribe(this),this.add(()=>{h--,P.unsubscribe(),P=void 0,g&&!D&&r&&0===h&&(g.unsubscribe(),g=void 0,l=void 0)})}}(a))}function ly(i,n){return n?_n(()=>i,n):_n(()=>i)}var p0=k(3101),_s=k(7841);const wS=new I.OlP("angularfire2.auth.use-emulator"),pC=new I.OlP("angularfire2.auth.settings"),IS=new I.OlP("angularfire2.auth.tenant-id"),gC=new I.OlP("angularfire2.auth.langugage-code"),mC=new I.OlP("angularfire2.auth.use-device-language"),yC=new I.OlP("angularfire.auth.persistence"),bS=(i,n,r,a,l,h,g,w)=>(0,pr.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const D=n.runOutsideAngular(()=>i.auth());if(r&&D.useEmulator(...r),a&&(D.tenantId=a),D.languageCode=l,h&&D.useDeviceLanguage(),g)for(const[x,N]of Object.entries(g))D.settings[x]=N;return w&&D.setPersistence(w),D},[r,a,l,h,g,w]);let _C=(()=>{class i{constructor(r,a,l,h,g,w,D,x,N,P,K){const Z=new br.xQ,we=(0,tt.of)(void 0).pipe((0,kd.QV)(g.outsideAngular),_n(()=>h.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,6780)))),(0,mt.U)(()=>(0,Oo.on)(r,h,a)),(0,mt.U)(Ve=>bS(Ve,h,w,x,N,P,D,K)),f0({bufferSize:1,refCount:!1}));if(lu(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,tt.of)(null);else{we.pipe(wo()).subscribe();const Be=we.pipe(_n(wt=>wt.getRedirectResult().then(Ft=>Ft,()=>null)),pr.iC,f0({bufferSize:1,refCount:!1})),_t=we.pipe(_n(wt=>new vi.y(Ft=>({unsubscribe:h.runOutsideAngular(()=>wt.onAuthStateChanged(Mr=>Ft.next(Mr),Mr=>Ft.error(Mr),()=>Ft.complete()))})))),xt=we.pipe(_n(wt=>new vi.y(Ft=>({unsubscribe:h.runOutsideAngular(()=>wt.onIdTokenChanged(Mr=>Ft.next(Mr),Mr=>Ft.error(Mr),()=>Ft.complete()))}))));this.authState=Be.pipe(ly(_t),(0,p0.R)(g.outsideAngular),(0,kd.QV)(g.insideAngular)),this.user=Be.pipe(ly(xt),(0,p0.R)(g.outsideAngular),(0,kd.QV)(g.insideAngular)),this.idToken=this.user.pipe(_n(wt=>wt?(0,yn.D)(wt.getIdToken()):(0,tt.of)(null))),this.idTokenResult=this.user.pipe(_n(wt=>wt?(0,yn.D)(wt.getIdTokenResult()):(0,tt.of)(null))),this.credential=(0,yS.T)(Be,Z,this.authState.pipe(Ei(wt=>!wt))).pipe((0,mt.U)(wt=>(null==wt?void 0:wt.user)?wt:null),(0,p0.R)(g.outsideAngular),(0,kd.QV)(g.insideAngular))}return(0,Oo.pX)(this,we,h,{spy:{apply:(Ve,Be,_t)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&_t.then(xt=>Z.next(xt))}}})}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(Oo.Dh),I.LFG(Oo.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(pr.HU),I.LFG(wS,8),I.LFG(pC,8),I.LFG(IS,8),I.LFG(gC,8),I.LFG(mC,8),I.LFG(yC,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function vC(i,n){return function(i,n=ft.z){return new vi.y(r=>{let a;return null!=n?n.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},r)}):a=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(i,n)}function g0(i,n){return vC(i,n).pipe((0,mt.U)(r=>({payload:r,type:"query"})))}function m0(i,n){return g0(i,n).pipe(Ou(void 0),pg(),(0,mt.U)(([r,a])=>{const l=a.payload.docChanges(),h=l.map(g=>({type:g.type,payload:g}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((g,w)=>{const D=l.find(N=>N.doc.ref.isEqual(g.ref)),x=null==r?void 0:r.payload.docs.find(N=>N.ref.isEqual(g.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(g.metadata)||!D&&x&&JSON.stringify(x.metadata)===JSON.stringify(g.metadata)||h.push({type:"modified",payload:{oldIndex:w,newIndex:w,type:"modified",doc:g}})}),h}))}function y0(i,n,r){return m0(i,r).pipe(da((a,l)=>function(i,n,r){return n.forEach(a=>{r.indexOf(a.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return _0(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return _0(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return _0(i,n.oldIndex,1)}return i}(i,a))}),i}(a,l.map(h=>h.payload),n),[]),r=>r.lift(new XC(void 0,void 0)),(0,mt.U)(a=>a.map(l=>({type:l.type,payload:l}))))}function _0(i,n,r,...a){const l=i.slice();return l.splice(n,r,...a),l}function v0(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Ld{constructor(n,r,a){this.ref=n,this.query=r,this.afs=a}stateChanges(n){let r=m0(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,mt.U)(a=>a.filter(l=>n.indexOf(l.type)>-1)))),r.pipe(Ou(void 0),pg(),Ei(([a,l])=>l.length>0||!a),(0,mt.U)(([a,l])=>l),pr.iC)}auditTrail(n){return this.stateChanges(n).pipe(da((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=v0(n);return y0(this.query,r,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(n={}){return g0(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(a=>n.idField?Object.assign(Object.assign({},a.data()),{[n.idField]:a.id}):a.data())),pr.iC)}get(n){return(0,yn.D)(this.query.get(n)).pipe(pr.iC)}add(n){return this.ref.add(n)}doc(n){return new dy(this.ref.doc(n),this.afs)}}class dy{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const a=this.ref.collection(n),{ref:l,query:h}=SS(a,r);return new Ld(l,h,this.afs)}snapshotChanges(){return function(i,n){return vC(i,n).pipe(Ou(void 0),pg(),(0,mt.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,yn.D)(this.ref.get(n)).pipe(pr.iC)}}class IC{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?m0(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.filter(a=>n.indexOf(a.type)>-1)),Ei(r=>r.length>0),pr.iC):m0(this.query,this.afs.schedulers.outsideAngular).pipe(pr.iC)}auditTrail(n){return this.stateChanges(n).pipe(da((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=v0(n);return y0(this.query,r,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(n={}){return g0(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(a=>a.payload.docs.map(l=>n.idField?Object.assign({[n.idField]:l.id},l.data()):l.data())),pr.iC)}get(n){return(0,yn.D)(this.query.get(n)).pipe(pr.iC)}}const bC=new I.OlP("angularfire2.enableFirestorePersistence"),CC=new I.OlP("angularfire2.firestore.persistenceSettings"),UA=new I.OlP("angularfire2.firestore.settings"),jA=new I.OlP("angularfire2.firestore.use-emulator");function SS(i,n=(r=>r)){return{query:n(i),ref:i}}let DC=(()=>{class i{constructor(r,a,l,h,g,w,D,x,N,P,K,Z,we,Ve,Be,_t){this.schedulers=D;const xt=(0,Oo.on)(r,w,a),wt=N;P&&bS(xt,w,K,we,Ve,Be,Z,_t),[this.firestore,this.persistenceEnabled$]=(0,pr.cc)(`${xt.name}.firestore`,"AngularFirestore",xt.name,()=>{const Ft=w.runOutsideAngular(()=>xt.firestore());if(h&&Ft.settings(h),wt&&Ft.useEmulator(...wt),l&&!lu(g)){const Mr=()=>{try{return(0,yn.D)(Ft.enablePersistence(x||void 0).then(()=>!0,()=>!1))}catch(Bc){return"undefined"!=typeof console&&console.warn(Bc),(0,tt.of)(!1)}};return[Ft,w.runOutsideAngular(Mr)]}return[Ft,(0,tt.of)(!1)]},[h,wt,l])}collection(r,a){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:g}=SS(l,a),w=this.schedulers.ngZone.run(()=>h);return new Ld(w,g,this)}collectionGroup(r,a){const l=a||(g=>g),h=this.firestore.collectionGroup(r);return new IC(l(h),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>a);return new dy(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(I.LFG(Oo.Dh),I.LFG(Oo.xv,8),I.LFG(bC,8),I.LFG(UA,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(pr.HU),I.LFG(CC,8),I.LFG(jA,8),I.LFG(_C,8),I.LFG(wS,8),I.LFG(pC,8),I.LFG(IS,8),I.LFG(gC,8),I.LFG(mC,8),I.LFG(yC,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),TC=(()=>{class i{constructor(){_s.Z.registerVersion("angularfire",pr.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:bC,useValue:!0},{provide:CC,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({providers:[DC]}),i})(),AS=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=I.oAB({type:i,bootstrap:[JC]}),i.\u0275inj=I.cJS({providers:[],imports:[[Du,uw,Oo.hO.initializeApp(ph_firebaseConfig),TC]]}),i})();(0,I.G48)(),Sy().bootstrapModule(AS).catch(i=>console.error(i))},4762:(Ge,Ie,k)=>{"use strict";k.d(Ie,{ZT:()=>oe,pi:()=>B,_T:()=>ne,mG:()=>pe,Jh:()=>q,XA:()=>$,CR:()=>U,ev:()=>te});var I=function(re,se){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,ue){de.__proto__=ue}||function(de,ue){for(var he in ue)Object.prototype.hasOwnProperty.call(ue,he)&&(de[he]=ue[he])})(re,se)};function oe(re,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function de(){this.constructor=re}I(re,se),re.prototype=null===se?Object.create(se):(de.prototype=se.prototype,new de)}var B=function(){return(B=Object.assign||function(se){for(var de,ue=1,he=arguments.length;ue<he;ue++)for(var Q in de=arguments[ue])Object.prototype.hasOwnProperty.call(de,Q)&&(se[Q]=de[Q]);return se}).apply(this,arguments)};function ne(re,se){var de={};for(var ue in re)Object.prototype.hasOwnProperty.call(re,ue)&&se.indexOf(ue)<0&&(de[ue]=re[ue]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ue=Object.getOwnPropertySymbols(re);he<ue.length;he++)se.indexOf(ue[he])<0&&Object.prototype.propertyIsEnumerable.call(re,ue[he])&&(de[ue[he]]=re[ue[he]])}return de}function pe(re,se,de,ue){return new(de||(de=Promise))(function(Q,Ne){function We(bt){try{Je(ue.next(bt))}catch(Vt){Ne(Vt)}}function It(bt){try{Je(ue.throw(bt))}catch(Vt){Ne(Vt)}}function Je(bt){bt.done?Q(bt.value):function(Q){return Q instanceof de?Q:new de(function(Ne){Ne(Q)})}(bt.value).then(We,It)}Je((ue=ue.apply(re,se||[])).next())})}function q(re,se){var ue,he,Q,Ne,de={label:0,sent:function(){if(1&Q[0])throw Q[1];return Q[1]},trys:[],ops:[]};return Ne={next:We(0),throw:We(1),return:We(2)},"function"==typeof Symbol&&(Ne[Symbol.iterator]=function(){return this}),Ne;function We(Je){return function(bt){return function(Je){if(ue)throw new TypeError("Generator is already executing.");for(;de;)try{if(ue=1,he&&(Q=2&Je[0]?he.return:Je[0]?he.throw||((Q=he.return)&&Q.call(he),0):he.next)&&!(Q=Q.call(he,Je[1])).done)return Q;switch(he=0,Q&&(Je=[2&Je[0],Q.value]),Je[0]){case 0:case 1:Q=Je;break;case 4:return de.label++,{value:Je[1],done:!1};case 5:de.label++,he=Je[1],Je=[0];continue;case 7:Je=de.ops.pop(),de.trys.pop();continue;default:if(!(Q=(Q=de.trys).length>0&&Q[Q.length-1])&&(6===Je[0]||2===Je[0])){de=0;continue}if(3===Je[0]&&(!Q||Je[1]>Q[0]&&Je[1]<Q[3])){de.label=Je[1];break}if(6===Je[0]&&de.label<Q[1]){de.label=Q[1],Q=Je;break}if(Q&&de.label<Q[2]){de.label=Q[2],de.ops.push(Je);break}Q[2]&&de.ops.pop(),de.trys.pop();continue}Je=se.call(re,de)}catch(bt){Je=[6,bt],he=0}finally{ue=Q=0}if(5&Je[0])throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}([Je,bt])}}}function $(re){var se="function"==typeof Symbol&&Symbol.iterator,de=se&&re[se],ue=0;if(de)return de.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&ue>=re.length&&(re=void 0),{value:re&&re[ue++],done:!re}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(re,se){var de="function"==typeof Symbol&&re[Symbol.iterator];if(!de)return re;var he,Ne,ue=de.call(re),Q=[];try{for(;(void 0===se||se-- >0)&&!(he=ue.next()).done;)Q.push(he.value)}catch(We){Ne={error:We}}finally{try{he&&!he.done&&(de=ue.return)&&de.call(ue)}finally{if(Ne)throw Ne.error}}return Q}function te(re,se,de){if(de||2===arguments.length)for(var Q,ue=0,he=se.length;ue<he;ue++)(Q||!(ue in se))&&(Q||(Q=Array.prototype.slice.call(se,0,ue)),Q[ue]=se[ue]);return re.concat(Q||Array.prototype.slice.call(se))}},8239:(Ge,Ie,k)=>{"use strict";function I(B,ne,me,ie,_e,pe,q){try{var L=B[pe](q),j=L.value}catch($){return void me($)}L.done?ne(j):Promise.resolve(j).then(ie,_e)}function oe(B){return function(){var ne=this,me=arguments;return new Promise(function(ie,_e){var pe=B.apply(ne,me);function q(j){I(pe,ie,_e,q,L,"next",j)}function L(j){I(pe,ie,_e,q,L,"throw",j)}q(void 0)})}}k.d(Ie,{Z:()=>oe})}},Ge=>{Ge(Ge.s=1143)}]);